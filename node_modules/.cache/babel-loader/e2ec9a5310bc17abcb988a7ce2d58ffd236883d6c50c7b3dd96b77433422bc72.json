{"ast":null,"code":"export class ScoringEngine {\n  // Helper methods for category and dimension handling\n  normalizeCategory(category) {\n    // Map various category names to standard categories\n    const categoryMap = {\n      'tech': 'technology',\n      'technology': 'technology',\n      'tools': 'technology',\n      'process': 'process',\n      'processes': 'process',\n      'workflow': 'process',\n      'people': 'people',\n      'team': 'people',\n      'skills': 'people',\n      'talent': 'people',\n      'strategy': 'strategy',\n      'plan': 'strategy',\n      'planning': 'strategy',\n      'content': 'content',\n      'analytics': 'analytics'\n    };\n    return categoryMap[category.toLowerCase()] || 'technology';\n  }\n  formatDimension(dimension) {\n    // Format dimension names for display\n    const dimensionLabels = {\n      'technology': 'Technology',\n      'process': 'Process',\n      'people': 'People',\n      'strategy': 'Strategy',\n      'content': 'Content',\n      'analytics': 'Analytics'\n    };\n    return dimensionLabels[dimension.toLowerCase()] || dimension.charAt(0).toUpperCase() + dimension.slice(1);\n  }\n  generateReport(scores, context) {\n    // Generate a complete report based on scores and context and assessment type\n    try {\n      const overallScore = scores.overall || 0;\n\n      // Get assessment-specific configurations and titles\n      const reportConfig = {\n        'agency-vulnerability': {\n          title: 'Agency AI Vulnerability Assessment',\n          readinessTitle: 'Agency AI Readiness Assessment',\n          readinessSubtitle: 'How your agency compares across key dimensions',\n          bookingHeadline: 'Ready to Future-Proof Your Agency?',\n          bookingSubheadline: 'Schedule a consultation to get personalized insights',\n          testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our agency has doubled client retention.',\n          testimonialAuthor: 'Creative Director',\n          testimonialCompany: 'Mid-Size Agency'\n        },\n        'inhouse-marketing': {\n          title: 'Marketing AI Maturity Assessment',\n          readinessTitle: 'Marketing AI Readiness Assessment',\n          readinessSubtitle: 'How your marketing organization compares across key dimensions',\n          bookingHeadline: 'Ready to Elevate Your Marketing?',\n          bookingSubheadline: 'Schedule a consultation to get personalized insights',\n          testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our marketing ROI has doubled.',\n          testimonialAuthor: 'Marketing Director',\n          testimonialCompany: 'B2B Software Company'\n        }\n      };\n\n      // Get configuration for this assessment type (with fallback)\n      const config = reportConfig[this.assessmentType] || reportConfig['agency-vulnerability'];\n\n      // Executive summary section\n      const executive = {\n        headline: 'Your Assessment Results',\n        subheadline: 'Detailed analysis and recommendations below',\n        narrative: this.generateSummary(scores),\n        snapshot: this.generateSnapshot(scores, context),\n        keyMetrics: {\n          roi: {\n            value: `${Math.round(overallScore * 1.5)}%`,\n            label: this.assessmentType === 'agency-vulnerability' ? 'Potential Revenue Impact' : 'Potential ROI',\n            interpretation: overallScore < 40 ? 'Significant room for improvement' : 'Strong foundation for growth'\n          },\n          efficiency: {\n            value: `${Math.round(overallScore * 0.8)}%`,\n            label: 'Operational Efficiency',\n            interpretation: 'Based on your process maturity'\n          },\n          readiness: {\n            value: overallScore < 30 ? 'Low' : overallScore < 60 ? 'Medium' : 'High',\n            label: 'AI Readiness',\n            interpretation: this.assessmentType === 'agency-vulnerability' ? 'Your overall agency AI readiness' : 'Your overall marketing AI maturity'\n          }\n        }\n      };\n\n      // Readiness section\n      const readiness = {\n        title: config.readinessTitle,\n        subtitle: config.readinessSubtitle,\n        dimensions: this.generateDimensionCards(scores)\n      };\n\n      // Create full report object based on assessment type\n      return {\n        title: config.title,\n        summary: this.generateSummary(scores) || 'Thank you for completing the assessment.',\n        executive: executive,\n        readiness: readiness,\n        recommendations: this.generateRecommendations(scores, context),\n        nextSteps: {\n          booking: {\n            headline: config.bookingHeadline,\n            subheadline: config.bookingSubheadline,\n            buttonText: 'Book Your Strategy Session'\n          },\n          urgency: {\n            message: 'Limited spots available this month'\n          },\n          testimonial: {\n            quote: config.testimonialQuote,\n            author: config.testimonialAuthor,\n            company: config.testimonialCompany\n          }\n        },\n        roadmap: this.generateRoadmap(scores),\n        valuation: this.generateValuationImpact(scores, context)\n      };\n    } catch (error) {\n      console.error('Error generating report:', error);\n      // Return default report if error occurs\n      return this.generateDefaultReport();\n    }\n  }\n  generateDefaultReport() {\n    // Generate a default report when scoring fails\n    return {\n      title: 'Marketing Maturity Assessment',\n      summary: 'Based on your responses, we have prepared an initial assessment of your marketing maturity.',\n      recommendations: [],\n      nextSteps: {\n        booking: {\n          headline: 'Get a Complete Assessment',\n          subheadline: 'Schedule a consultation to get personalized insights',\n          buttonText: 'Book Your Strategy Session'\n        }\n      },\n      roadmap: {\n        phases: [{\n          name: 'Foundation',\n          duration: '1-3 months',\n          focus: 'Establish core marketing processes',\n          milestones: ['Marketing strategy', 'Basic analytics', 'Content planning']\n        }, {\n          name: 'Growth',\n          duration: '3-6 months',\n          focus: 'Scale effective channels',\n          milestones: ['Channel optimization', 'Automation', 'Lead scoring']\n        }]\n      }\n    };\n  }\n  generateSummary(scores) {\n    // Generate summary text based on overall score\n    if (!scores || typeof scores.overall !== 'number') {\n      return 'Thank you for completing the assessment.';\n    }\n    if (scores.overall < 30) {\n      return 'Your marketing organization is in the early stages of development. There are significant opportunities to build a more effective marketing function.';\n    } else if (scores.overall < 60) {\n      return 'Your marketing organization has established some foundations but needs further development in key areas to become fully effective.';\n    } else if (scores.overall < 80) {\n      return 'Your marketing organization demonstrates good maturity with specific opportunities for optimization to reach excellence.';\n    } else {\n      return 'Your marketing organization shows high maturity across multiple dimensions. Focus on refinement and innovation to maintain your competitive edge.';\n    }\n  }\n  generateRecommendations(scores, context) {\n    const recommendations = [];\n\n    // Only proceed if we have valid scores\n    if (!scores || !scores.dimensions) return recommendations;\n\n    // Define assessment-type specific recommendations\n    const recommendationsByType = {\n      'agency-vulnerability': {\n        technology: {\n          title: 'Agency Technology Modernization',\n          description: 'Your agency technology score indicates vulnerability to AI disruption.',\n          specificAction: 'Conduct an AI readiness audit to identify tools that can augment your team capabilities.'\n        },\n        process: {\n          title: 'AI-Ready Process Development',\n          description: 'Integrating AI into your agency workflows will improve efficiency and client deliverables.',\n          specificAction: 'Document your creative and production processes to identify AI integration opportunities.'\n        },\n        people: {\n          title: 'AI Talent Development',\n          description: 'Building AI fluency in your agency team will be critical to remain competitive.',\n          specificAction: 'Identify AI champions and create a skills development plan for your agency team.'\n        },\n        strategy: {\n          title: 'AI Positioning Strategy',\n          description: 'A clear AI strategy will help your agency differentiate and retain clients.',\n          specificAction: 'Develop an AI capabilities roadmap that you can share with clients and prospects.'\n        },\n        general: {\n          title: 'Agency AI Readiness',\n          description: 'While your agency is ahead on AI adoption, continuous innovation will maintain your advantage.',\n          specificAction: 'Establish an AI innovation process to continuously evaluate and integrate new capabilities.'\n        }\n      },\n      'inhouse-marketing': {\n        technology: {\n          title: 'Marketing AI Technology Integration',\n          description: 'Your marketing technology score indicates opportunities to leverage AI tools.',\n          specificAction: 'Evaluate AI-powered marketing tools that can augment your existing technology stack.'\n        },\n        process: {\n          title: 'Marketing Workflow Optimization',\n          description: 'Integrating AI into your marketing processes will improve efficiency and results.',\n          specificAction: 'Map your content and campaign workflows to identify AI automation opportunities.'\n        },\n        people: {\n          title: 'Marketing AI Capability Building',\n          description: 'Developing AI skills in your marketing team will drive better performance.',\n          specificAction: 'Create an AI training program focused on practical marketing applications.'\n        },\n        strategy: {\n          title: 'AI-Powered Marketing Strategy',\n          description: 'Incorporating AI into your marketing strategy will improve targeting and personalization.',\n          specificAction: 'Develop an AI-enhanced customer journey that leverages predictive analytics.'\n        },\n        general: {\n          title: 'Marketing AI Excellence',\n          description: 'While your marketing AI maturity is strong, continuous improvement will maintain your advantage.',\n          specificAction: 'Establish quarterly AI marketing reviews to identify new optimization opportunities.'\n        }\n      }\n    };\n\n    // Get recommendations for the current assessment type (with fallback)\n    const typeRecommendations = recommendationsByType[this.assessmentType] || recommendationsByType['agency-vulnerability'];\n\n    // Generate recommendations for each dimension with low scores\n    Object.entries(scores.dimensions).forEach(([dimension, data]) => {\n      if (data.score < 50) {\n        const rec = typeRecommendations[dimension] || {\n          title: `${this.formatDimension(dimension)} Enhancement`,\n          description: `Your ${this.formatDimension(dimension)} capabilities need strengthening.`,\n          specificAction: `Evaluate your current ${dimension} approach and develop an improvement plan.`\n        };\n        recommendations.push({\n          dimension: dimension,\n          title: rec.title,\n          description: rec.description,\n          specificAction: rec.specificAction\n        });\n      }\n    });\n\n    // Add general recommendations if needed\n    if (recommendations.length === 0) {\n      const generalRec = typeRecommendations.general || {\n        title: 'Continuous Improvement',\n        description: 'While your scores are strong, continuous improvement will maintain your advantage.',\n        specificAction: 'Establish quarterly reviews to identify optimization opportunities.'\n      };\n      recommendations.push({\n        dimension: 'general',\n        title: generalRec.title,\n        description: generalRec.description,\n        specificAction: generalRec.specificAction\n      });\n    }\n    return recommendations;\n  }\n  generateRoadmap(scores) {\n    // Generate a roadmap based on scores\n    const phases = [{\n      name: 'Foundation',\n      duration: '1-3 months',\n      focus: 'Establish core marketing capabilities',\n      milestones: ['Develop marketing strategy', 'Implement basic analytics', 'Standardize content production', 'Set up CRM processes']\n    }, {\n      name: 'Growth',\n      duration: '3-6 months',\n      focus: 'Scale effective channels and processes',\n      milestones: ['Optimize high-performing channels', 'Implement marketing automation', 'Develop lead scoring model', 'Create customer journey maps']\n    }, {\n      name: 'Optimization',\n      duration: '6-12 months',\n      focus: 'Refine performance and integration',\n      milestones: ['Advanced attribution modeling', 'Cross-channel integration', 'Personalization at scale', 'ROI optimization']\n    }];\n    return {\n      phases\n    };\n  }\n  constructor(customScoring, assessmentType = 'agency-vulnerability') {\n    var _this$customScoring;\n    this.customScoring = customScoring;\n    this.assessmentType = assessmentType;\n\n    // Get configuration for this assessment type\n    const config = ScoringEngine.assessmentTypes[this.assessmentType] || ScoringEngine.assessmentTypes['agency-vulnerability']; // Fallback\n\n    // Set default weights based on assessment type\n    this.defaultWeights = config.defaultWeights || {\n      technology: 0.25,\n      process: 0.25,\n      people: 0.25,\n      strategy: 0.25\n    };\n    this.dimensionConfig = config.dimensionConfig || {};\n\n    // Allow custom scoring to override default weights\n    this.weights = ((_this$customScoring = this.customScoring) === null || _this$customScoring === void 0 ? void 0 : _this$customScoring.weights) || this.defaultWeights;\n  }\n  calculate(responses, context) {\n    console.log('Starting score calculation with responses:', Object.keys(responses).length);\n    console.log('Context for calculation:', context);\n    try {\n      var _this$customScoring2;\n      // Base scoring logic used by all assessments\n      let scores = this.calculateDimensionScores(responses);\n\n      // Apply custom scoring if provided\n      if ((_this$customScoring2 = this.customScoring) !== null && _this$customScoring2 !== void 0 && _this$customScoring2.calculate) {\n        try {\n          const customScores = this.customScoring.calculate(scores, responses, context);\n          if (customScores) scores = customScores;\n        } catch (error) {\n          console.error('Error in custom scoring calculation:', error);\n        }\n      }\n\n      // Apply context-based adjustments\n      scores = this.applyContextAdjustments(scores, context);\n\n      // Calculate overall score\n      const overall = this.calculateOverallScore(scores);\n\n      // Generate insights\n      const result = {\n        scores: {\n          overall: overall,\n          categories: scores\n        },\n        insights: this.generateInsights({\n          overall,\n          dimensions: scores\n        }, context),\n        report: this.generateReport({\n          overall,\n          dimensions: scores\n        }, context)\n      };\n      console.log('Final calculation result:', result);\n      return result;\n    } catch (error) {\n      console.error('Error in score calculation:', error);\n\n      // Return a fallback result to prevent UI errors\n      return {\n        scores: {\n          overall: 50,\n          categories: {\n            technology: {\n              score: 50\n            },\n            process: {\n              score: 50\n            },\n            people: {\n              score: 50\n            },\n            strategy: {\n              score: 50\n            }\n          }\n        },\n        insights: [{\n          type: 'warning',\n          title: 'Score Calculation Issue',\n          description: 'There was an issue calculating your detailed scores.'\n        }],\n        report: this.generateDefaultReport()\n      };\n    }\n  }\n  calculateDimensionScores(responses) {\n    // Default implementation for base dimension calculation\n    console.log('Calculating dimension scores with responses:', responses);\n\n    // Extract question responses and organize them by category\n    const categories = {};\n\n    // Initialize default categories with zero scores\n    const defaultCategories = ['technology', 'process', 'people', 'strategy'];\n    defaultCategories.forEach(cat => {\n      categories[cat] = {\n        score: 0,\n        count: 0,\n        responses: []\n      };\n    });\n\n    // Process each response\n    Object.entries(responses).forEach(([questionId, answer]) => {\n      // Skip non-numeric responses or special properties\n      if (typeof answer !== 'number' || questionId === 'selectedServices') return;\n\n      // Determine category from question ID - default to 'technology' if unknown\n      // Format might be: tech_01, people_02, etc.\n      const category = questionId.split('_')[0] || 'technology';\n      const normalizedCategory = this.normalizeCategory(category);\n\n      // If category not initialized, create it\n      if (!categories[normalizedCategory]) {\n        categories[normalizedCategory] = {\n          score: 0,\n          count: 0,\n          responses: []\n        };\n      }\n\n      // Add the score (assuming questions are scored 0-5)\n      categories[normalizedCategory].score += answer;\n      categories[normalizedCategory].count++;\n      categories[normalizedCategory].responses.push({\n        id: questionId,\n        value: answer\n      });\n    });\n\n    // Calculate average scores for each category\n    const dimensionScores = {};\n    Object.entries(categories).forEach(([category, data]) => {\n      dimensionScores[category] = {\n        score: data.count > 0 ? Math.round(data.score / (data.count * 5) * 100) : 0,\n        responses: data.responses\n      };\n    });\n    console.log('Calculated dimension scores:', dimensionScores);\n    return dimensionScores;\n  }\n  calculateOverallScore(dimensionScores) {\n    // Default implementation for overall score calculation\n    console.log('Calculating overall score with dimension scores:', dimensionScores);\n    let weightedSum = 0;\n    let totalWeight = 0;\n\n    // Calculate weighted sum of dimension scores\n    Object.entries(dimensionScores).forEach(([dimension, data]) => {\n      const weight = this.weights[dimension] || 0.25; // Default equal weight if not specified\n      weightedSum += (data.score || 0) * weight;\n      totalWeight += weight;\n    });\n\n    // Calculate overall score (rounded to nearest integer)\n    const overallScore = totalWeight > 0 ? Math.round(weightedSum / totalWeight) : 50;\n    console.log('Calculated overall score:', overallScore);\n    return overallScore;\n  }\n  applyContextAdjustments(scores, context) {\n    // Apply size, industry, or other contextual adjustments\n    console.log('Applying context adjustments with context:', context);\n\n    // If no context, return scores unchanged\n    if (!context) return scores;\n\n    // Example: Adjust for company size\n    if (context.companySize) {\n      // Small companies might get a boost in technology score\n      if (context.companySize === 'small' && scores.technology) {\n        scores.technology.score = Math.min(100, scores.technology.score + 5);\n      }\n    }\n\n    // Example: Adjust for selected services\n    if (context.selectedServices) {\n      const serviceCount = Object.keys(context.selectedServices).length;\n      // More focused companies (fewer services) might score higher in strategy\n      if (serviceCount <= 2 && scores.strategy) {\n        scores.strategy.score = Math.min(100, scores.strategy.score + 5);\n      }\n    }\n    return scores;\n  }\n  generateInsights(scores, context) {\n    // Generate insights based on scores\n    const insights = [];\n\n    // Only proceed if we have valid scores\n    if (!scores) return insights;\n\n    // Generate overall insights\n    if (typeof scores.overall === 'number') {\n      if (scores.overall < 30) {\n        insights.push({\n          type: 'critical',\n          title: 'Significant Improvement Needed',\n          description: 'Your marketing maturity score indicates substantial room for improvement across multiple dimensions.'\n        });\n      } else if (scores.overall < 60) {\n        insights.push({\n          type: 'warning',\n          title: 'Building Foundations',\n          description: 'You have some marketing fundamentals in place, but there are key areas that need strengthening.'\n        });\n      } else if (scores.overall < 80) {\n        insights.push({\n          type: 'positive',\n          title: 'Solid Performance',\n          description: 'Your marketing operations show good maturity with specific opportunities for optimization.'\n        });\n      } else {\n        insights.push({\n          type: 'excellent',\n          title: 'Marketing Excellence',\n          description: 'Your marketing organization demonstrates high levels of maturity and effectiveness.'\n        });\n      }\n    }\n\n    // Generate dimension-specific insights\n    Object.entries(scores.dimensions || {}).forEach(([dimension, data]) => {\n      if (typeof data.score === 'number' && data.score < 50) {\n        insights.push({\n          type: 'opportunity',\n          dimension: dimension,\n          title: `${this.formatDimension(dimension)} Opportunity`,\n          description: `Your ${this.formatDimension(dimension)} score suggests this is a high-priority area for improvement.`\n        });\n      }\n    });\n    return insights;\n  }\n}\n// Configuration for different assessment types\nScoringEngine.assessmentTypes = {\n  'agency-vulnerability': {\n    defaultWeights: {\n      technology: 0.3,\n      process: 0.3,\n      people: 0.2,\n      strategy: 0.2\n    },\n    dimensionConfig: {\n      technology: {\n        icon: '游눹',\n        description: 'Your agency technology stack and utilization',\n        insights: {\n          low: ['Limited use of marketing technology', 'Manual processes dominate workflow', 'Disconnected data sources'],\n          medium: ['Basic marketing tools in use', 'Some automation implemented', 'Partial integration of platforms'],\n          high: ['Advanced MarTech stack', 'Sophisticated automation', 'Integrated data ecosystem']\n        }\n      },\n      process: {\n        icon: '丘뙖잺',\n        description: 'Your agency processes and operational efficiency',\n        insights: {\n          low: ['Ad hoc project execution', 'Inconsistent workflows', 'Limited documentation'],\n          medium: ['Defined core processes', 'Consistent execution', 'Some measurement in place'],\n          high: ['Optimized workflows', 'Continuous improvement cycle', 'Clear ownership and accountability']\n        }\n      },\n      people: {\n        icon: '游논',\n        description: 'Your team skills, structure and capabilities',\n        insights: {\n          low: ['Skills gaps in key areas', 'Siloed responsibilities', 'Limited AI training'],\n          medium: ['Core competencies covered', 'Defined roles', 'Some AI exploration'],\n          high: ['AI-ready expertise', 'Cross-functional collaboration', 'Continuous AI skill development']\n        }\n      },\n      strategy: {\n        icon: '游꿢',\n        description: 'Your agency strategy and client positioning',\n        insights: {\n          low: ['Tactical focus', 'Reactive planning', 'Limited client AI conversations'],\n          medium: ['Defined AI objectives', 'Regular planning cycles', 'Some AI positioning'],\n          high: ['Clear AI strategic direction', 'AI-driven decision making', 'Strong AI value proposition']\n        }\n      }\n    }\n  },\n  'inhouse-marketing': {\n    defaultWeights: {\n      technology: 0.25,\n      process: 0.25,\n      people: 0.25,\n      strategy: 0.25\n    },\n    dimensionConfig: {\n      technology: {\n        icon: '游눹',\n        description: 'Your marketing technology stack and utilization',\n        insights: {\n          low: ['Limited use of AI marketing tools', 'Manual content creation', 'Basic analytics'],\n          medium: ['Some AI tools implemented', 'Partial automation', 'Standard reporting'],\n          high: ['Advanced AI MarTech stack', 'Sophisticated automation', 'Predictive analytics']\n        }\n      },\n      process: {\n        icon: '丘뙖잺',\n        description: 'Your marketing processes and workflow efficiency',\n        insights: {\n          low: ['Ad hoc marketing execution', 'Manual approval workflows', 'Limited measurement'],\n          medium: ['Defined marketing processes', 'Some automation', 'Regular KPI tracking'],\n          high: ['AI-optimized workflows', 'Automated campaign management', 'Continuous optimization']\n        }\n      },\n      people: {\n        icon: '游논',\n        description: 'Your team skills and AI readiness',\n        insights: {\n          low: ['Limited AI awareness', 'Skills gaps', 'Resistance to new tools'],\n          medium: ['Basic AI literacy', 'Some experimenting', 'Identified champions'],\n          high: ['AI-fluent team', 'Continuous learning culture', 'Clear AI roles']\n        }\n      },\n      strategy: {\n        icon: '游꿢',\n        description: 'Your marketing strategy and planning approach',\n        insights: {\n          low: ['Traditional planning', 'No AI integration', 'Limited personalization'],\n          medium: ['Some AI considerations', 'Testing AI-driven targeting', 'Partial personalization'],\n          high: ['AI-centered strategy', 'Dynamic personalization', 'Predictive customer journey']\n        }\n      }\n    }\n  }\n};\nexport default ScoringEngine;","map":{"version":3,"names":["ScoringEngine","normalizeCategory","category","categoryMap","toLowerCase","formatDimension","dimension","dimensionLabels","charAt","toUpperCase","slice","generateReport","scores","context","overallScore","overall","reportConfig","title","readinessTitle","readinessSubtitle","bookingHeadline","bookingSubheadline","testimonialQuote","testimonialAuthor","testimonialCompany","config","assessmentType","executive","headline","subheadline","narrative","generateSummary","snapshot","generateSnapshot","keyMetrics","roi","value","Math","round","label","interpretation","efficiency","readiness","subtitle","dimensions","generateDimensionCards","summary","recommendations","generateRecommendations","nextSteps","booking","buttonText","urgency","message","testimonial","quote","author","company","roadmap","generateRoadmap","valuation","generateValuationImpact","error","console","generateDefaultReport","phases","name","duration","focus","milestones","recommendationsByType","technology","description","specificAction","process","people","strategy","general","typeRecommendations","Object","entries","forEach","data","score","rec","push","length","generalRec","constructor","customScoring","_this$customScoring","assessmentTypes","defaultWeights","dimensionConfig","weights","calculate","responses","log","keys","_this$customScoring2","calculateDimensionScores","customScores","applyContextAdjustments","calculateOverallScore","result","categories","insights","generateInsights","report","type","defaultCategories","cat","count","questionId","answer","split","normalizedCategory","id","dimensionScores","weightedSum","totalWeight","weight","companySize","min","selectedServices","serviceCount","icon","low","medium","high"],"sources":["/Users/jon/Documents/GitHub/assessor/src/core/engine/ScoringEngine.js"],"sourcesContent":["export class ScoringEngine {\n    // Configuration for different assessment types\n    static assessmentTypes = {\n        'agency-vulnerability': {\n            defaultWeights: {\n                technology: 0.3,\n                process: 0.3,\n                people: 0.2,\n                strategy: 0.2\n            },\n            dimensionConfig: {\n                technology: {\n                    icon: '游눹',\n                    description: 'Your agency technology stack and utilization',\n                    insights: {\n                        low: ['Limited use of marketing technology', 'Manual processes dominate workflow', 'Disconnected data sources'],\n                        medium: ['Basic marketing tools in use', 'Some automation implemented', 'Partial integration of platforms'],\n                        high: ['Advanced MarTech stack', 'Sophisticated automation', 'Integrated data ecosystem']\n                    }\n                },\n                process: {\n                    icon: '丘뙖잺',\n                    description: 'Your agency processes and operational efficiency',\n                    insights: {\n                        low: ['Ad hoc project execution', 'Inconsistent workflows', 'Limited documentation'],\n                        medium: ['Defined core processes', 'Consistent execution', 'Some measurement in place'],\n                        high: ['Optimized workflows', 'Continuous improvement cycle', 'Clear ownership and accountability']\n                    }\n                },\n                people: {\n                    icon: '游논',\n                    description: 'Your team skills, structure and capabilities',\n                    insights: {\n                        low: ['Skills gaps in key areas', 'Siloed responsibilities', 'Limited AI training'],\n                        medium: ['Core competencies covered', 'Defined roles', 'Some AI exploration'],\n                        high: ['AI-ready expertise', 'Cross-functional collaboration', 'Continuous AI skill development']\n                    }\n                },\n                strategy: {\n                    icon: '游꿢',\n                    description: 'Your agency strategy and client positioning',\n                    insights: {\n                        low: ['Tactical focus', 'Reactive planning', 'Limited client AI conversations'],\n                        medium: ['Defined AI objectives', 'Regular planning cycles', 'Some AI positioning'],\n                        high: ['Clear AI strategic direction', 'AI-driven decision making', 'Strong AI value proposition']\n                    }\n                }\n            }\n        },\n        'inhouse-marketing': {\n            defaultWeights: {\n                technology: 0.25,\n                process: 0.25,\n                people: 0.25,\n                strategy: 0.25\n            },\n            dimensionConfig: {\n                technology: {\n                    icon: '游눹',\n                    description: 'Your marketing technology stack and utilization',\n                    insights: {\n                        low: ['Limited use of AI marketing tools', 'Manual content creation', 'Basic analytics'],\n                        medium: ['Some AI tools implemented', 'Partial automation', 'Standard reporting'],\n                        high: ['Advanced AI MarTech stack', 'Sophisticated automation', 'Predictive analytics']\n                    }\n                },\n                process: {\n                    icon: '丘뙖잺',\n                    description: 'Your marketing processes and workflow efficiency',\n                    insights: {\n                        low: ['Ad hoc marketing execution', 'Manual approval workflows', 'Limited measurement'],\n                        medium: ['Defined marketing processes', 'Some automation', 'Regular KPI tracking'],\n                        high: ['AI-optimized workflows', 'Automated campaign management', 'Continuous optimization']\n                    }\n                },\n                people: {\n                    icon: '游논',\n                    description: 'Your team skills and AI readiness',\n                    insights: {\n                        low: ['Limited AI awareness', 'Skills gaps', 'Resistance to new tools'],\n                        medium: ['Basic AI literacy', 'Some experimenting', 'Identified champions'],\n                        high: ['AI-fluent team', 'Continuous learning culture', 'Clear AI roles']\n                    }\n                },\n                strategy: {\n                    icon: '游꿢',\n                    description: 'Your marketing strategy and planning approach',\n                    insights: {\n                        low: ['Traditional planning', 'No AI integration', 'Limited personalization'],\n                        medium: ['Some AI considerations', 'Testing AI-driven targeting', 'Partial personalization'],\n                        high: ['AI-centered strategy', 'Dynamic personalization', 'Predictive customer journey']\n                    }\n                }\n            }\n        }\n    }\n    // Helper methods for category and dimension handling\n    normalizeCategory(category) {\n        // Map various category names to standard categories\n        const categoryMap = {\n            'tech': 'technology',\n            'technology': 'technology',\n            'tools': 'technology',\n            'process': 'process',\n            'processes': 'process',\n            'workflow': 'process',\n            'people': 'people',\n            'team': 'people',\n            'skills': 'people',\n            'talent': 'people',\n            'strategy': 'strategy',\n            'plan': 'strategy',\n            'planning': 'strategy',\n            'content': 'content',\n            'analytics': 'analytics'\n        };\n        \n        return categoryMap[category.toLowerCase()] || 'technology';\n    }\n    \n    formatDimension(dimension) {\n        // Format dimension names for display\n        const dimensionLabels = {\n            'technology': 'Technology',\n            'process': 'Process',\n            'people': 'People',\n            'strategy': 'Strategy',\n            'content': 'Content',\n            'analytics': 'Analytics'\n        };\n        \n        return dimensionLabels[dimension.toLowerCase()] || dimension.charAt(0).toUpperCase() + dimension.slice(1);\n    }\n    \n    generateReport(scores, context) {\n        // Generate a complete report based on scores and context and assessment type\n        try {\n            const overallScore = scores.overall || 0;\n            \n            // Get assessment-specific configurations and titles\n            const reportConfig = {\n                'agency-vulnerability': {\n                    title: 'Agency AI Vulnerability Assessment',\n                    readinessTitle: 'Agency AI Readiness Assessment',\n                    readinessSubtitle: 'How your agency compares across key dimensions',\n                    bookingHeadline: 'Ready to Future-Proof Your Agency?',\n                    bookingSubheadline: 'Schedule a consultation to get personalized insights',\n                    testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our agency has doubled client retention.',\n                    testimonialAuthor: 'Creative Director',\n                    testimonialCompany: 'Mid-Size Agency'\n                },\n                'inhouse-marketing': {\n                    title: 'Marketing AI Maturity Assessment',\n                    readinessTitle: 'Marketing AI Readiness Assessment',\n                    readinessSubtitle: 'How your marketing organization compares across key dimensions',\n                    bookingHeadline: 'Ready to Elevate Your Marketing?',\n                    bookingSubheadline: 'Schedule a consultation to get personalized insights',\n                    testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our marketing ROI has doubled.',\n                    testimonialAuthor: 'Marketing Director',\n                    testimonialCompany: 'B2B Software Company'\n                }\n            };\n            \n            // Get configuration for this assessment type (with fallback)\n            const config = reportConfig[this.assessmentType] || reportConfig['agency-vulnerability'];\n            \n            // Executive summary section\n            const executive = {\n                headline: 'Your Assessment Results',\n                subheadline: 'Detailed analysis and recommendations below',\n                narrative: this.generateSummary(scores),\n                snapshot: this.generateSnapshot(scores, context),\n                keyMetrics: {\n                    roi: {\n                        value: `${Math.round(overallScore * 1.5)}%`,\n                        label: this.assessmentType === 'agency-vulnerability' ? 'Potential Revenue Impact' : 'Potential ROI',\n                        interpretation: overallScore < 40 ? 'Significant room for improvement' : 'Strong foundation for growth'\n                    },\n                    efficiency: {\n                        value: `${Math.round(overallScore * 0.8)}%`,\n                        label: 'Operational Efficiency',\n                        interpretation: 'Based on your process maturity'\n                    },\n                    readiness: {\n                        value: overallScore < 30 ? 'Low' : overallScore < 60 ? 'Medium' : 'High',\n                        label: 'AI Readiness',\n                        interpretation: this.assessmentType === 'agency-vulnerability' ? \n                                        'Your overall agency AI readiness' : \n                                        'Your overall marketing AI maturity'\n                    }\n                }\n            };\n            \n            // Readiness section\n            const readiness = {\n                title: config.readinessTitle,\n                subtitle: config.readinessSubtitle,\n                dimensions: this.generateDimensionCards(scores)\n            };\n            \n            // Create full report object based on assessment type\n            return {\n                title: config.title,\n                summary: this.generateSummary(scores) || 'Thank you for completing the assessment.',\n                executive: executive,\n                readiness: readiness,\n                recommendations: this.generateRecommendations(scores, context),\n                nextSteps: {\n                    booking: {\n                        headline: config.bookingHeadline,\n                        subheadline: config.bookingSubheadline,\n                        buttonText: 'Book Your Strategy Session'\n                    },\n                    urgency: {\n                        message: 'Limited spots available this month'\n                    },\n                    testimonial: {\n                        quote: config.testimonialQuote,\n                        author: config.testimonialAuthor,\n                        company: config.testimonialCompany\n                    }\n                },\n                roadmap: this.generateRoadmap(scores),\n                valuation: this.generateValuationImpact(scores, context)\n            };\n        } catch (error) {\n            console.error('Error generating report:', error);\n            // Return default report if error occurs\n            return this.generateDefaultReport();\n        }\n    }\n    \n    generateDefaultReport() {\n        // Generate a default report when scoring fails\n        return {\n            title: 'Marketing Maturity Assessment',\n            summary: 'Based on your responses, we have prepared an initial assessment of your marketing maturity.',\n            recommendations: [],\n            nextSteps: {\n                booking: {\n                    headline: 'Get a Complete Assessment',\n                    subheadline: 'Schedule a consultation to get personalized insights',\n                    buttonText: 'Book Your Strategy Session'\n                }\n            },\n            roadmap: {\n                phases: [\n                    {\n                        name: 'Foundation',\n                        duration: '1-3 months',\n                        focus: 'Establish core marketing processes',\n                        milestones: ['Marketing strategy', 'Basic analytics', 'Content planning']\n                    },\n                    {\n                        name: 'Growth',\n                        duration: '3-6 months',\n                        focus: 'Scale effective channels',\n                        milestones: ['Channel optimization', 'Automation', 'Lead scoring']\n                    }\n                ]\n            }\n        };\n    }\n    \n    generateSummary(scores) {\n        // Generate summary text based on overall score\n        if (!scores || typeof scores.overall !== 'number') {\n            return 'Thank you for completing the assessment.';\n        }\n        \n        if (scores.overall < 30) {\n            return 'Your marketing organization is in the early stages of development. There are significant opportunities to build a more effective marketing function.';\n        } else if (scores.overall < 60) {\n            return 'Your marketing organization has established some foundations but needs further development in key areas to become fully effective.';\n        } else if (scores.overall < 80) {\n            return 'Your marketing organization demonstrates good maturity with specific opportunities for optimization to reach excellence.';\n        } else {\n            return 'Your marketing organization shows high maturity across multiple dimensions. Focus on refinement and innovation to maintain your competitive edge.';\n        }\n    }\n    \n    generateRecommendations(scores, context) {\n        const recommendations = [];\n        \n        // Only proceed if we have valid scores\n        if (!scores || !scores.dimensions) return recommendations;\n        \n        // Define assessment-type specific recommendations\n        const recommendationsByType = {\n            'agency-vulnerability': {\n                technology: {\n                    title: 'Agency Technology Modernization',\n                    description: 'Your agency technology score indicates vulnerability to AI disruption.',\n                    specificAction: 'Conduct an AI readiness audit to identify tools that can augment your team capabilities.'\n                },\n                process: {\n                    title: 'AI-Ready Process Development',\n                    description: 'Integrating AI into your agency workflows will improve efficiency and client deliverables.',\n                    specificAction: 'Document your creative and production processes to identify AI integration opportunities.'\n                },\n                people: {\n                    title: 'AI Talent Development',\n                    description: 'Building AI fluency in your agency team will be critical to remain competitive.',\n                    specificAction: 'Identify AI champions and create a skills development plan for your agency team.'\n                },\n                strategy: {\n                    title: 'AI Positioning Strategy',\n                    description: 'A clear AI strategy will help your agency differentiate and retain clients.',\n                    specificAction: 'Develop an AI capabilities roadmap that you can share with clients and prospects.'\n                },\n                general: {\n                    title: 'Agency AI Readiness',\n                    description: 'While your agency is ahead on AI adoption, continuous innovation will maintain your advantage.',\n                    specificAction: 'Establish an AI innovation process to continuously evaluate and integrate new capabilities.'\n                }\n            },\n            'inhouse-marketing': {\n                technology: {\n                    title: 'Marketing AI Technology Integration',\n                    description: 'Your marketing technology score indicates opportunities to leverage AI tools.',\n                    specificAction: 'Evaluate AI-powered marketing tools that can augment your existing technology stack.'\n                },\n                process: {\n                    title: 'Marketing Workflow Optimization',\n                    description: 'Integrating AI into your marketing processes will improve efficiency and results.',\n                    specificAction: 'Map your content and campaign workflows to identify AI automation opportunities.'\n                },\n                people: {\n                    title: 'Marketing AI Capability Building',\n                    description: 'Developing AI skills in your marketing team will drive better performance.',\n                    specificAction: 'Create an AI training program focused on practical marketing applications.'\n                },\n                strategy: {\n                    title: 'AI-Powered Marketing Strategy',\n                    description: 'Incorporating AI into your marketing strategy will improve targeting and personalization.',\n                    specificAction: 'Develop an AI-enhanced customer journey that leverages predictive analytics.'\n                },\n                general: {\n                    title: 'Marketing AI Excellence',\n                    description: 'While your marketing AI maturity is strong, continuous improvement will maintain your advantage.',\n                    specificAction: 'Establish quarterly AI marketing reviews to identify new optimization opportunities.'\n                }\n            }\n        };\n        \n        // Get recommendations for the current assessment type (with fallback)\n        const typeRecommendations = recommendationsByType[this.assessmentType] || \n                                  recommendationsByType['agency-vulnerability'];\n        \n        // Generate recommendations for each dimension with low scores\n        Object.entries(scores.dimensions).forEach(([dimension, data]) => {\n            if (data.score < 50) {\n                const rec = typeRecommendations[dimension] || {\n                    title: `${this.formatDimension(dimension)} Enhancement`,\n                    description: `Your ${this.formatDimension(dimension)} capabilities need strengthening.`,\n                    specificAction: `Evaluate your current ${dimension} approach and develop an improvement plan.`\n                };\n                \n                recommendations.push({\n                    dimension: dimension,\n                    title: rec.title,\n                    description: rec.description,\n                    specificAction: rec.specificAction\n                });\n            }\n        });\n        \n        // Add general recommendations if needed\n        if (recommendations.length === 0) {\n            const generalRec = typeRecommendations.general || {\n                title: 'Continuous Improvement',\n                description: 'While your scores are strong, continuous improvement will maintain your advantage.',\n                specificAction: 'Establish quarterly reviews to identify optimization opportunities.'\n            };\n            \n            recommendations.push({\n                dimension: 'general',\n                title: generalRec.title,\n                description: generalRec.description,\n                specificAction: generalRec.specificAction\n            });\n        }\n        \n        return recommendations;\n    }\n    \n    generateRoadmap(scores) {\n        // Generate a roadmap based on scores\n        const phases = [\n            {\n                name: 'Foundation',\n                duration: '1-3 months',\n                focus: 'Establish core marketing capabilities',\n                milestones: [\n                    'Develop marketing strategy',\n                    'Implement basic analytics',\n                    'Standardize content production',\n                    'Set up CRM processes'\n                ]\n            },\n            {\n                name: 'Growth',\n                duration: '3-6 months',\n                focus: 'Scale effective channels and processes',\n                milestones: [\n                    'Optimize high-performing channels',\n                    'Implement marketing automation',\n                    'Develop lead scoring model',\n                    'Create customer journey maps'\n                ]\n            },\n            {\n                name: 'Optimization',\n                duration: '6-12 months',\n                focus: 'Refine performance and integration',\n                milestones: [\n                    'Advanced attribution modeling',\n                    'Cross-channel integration',\n                    'Personalization at scale',\n                    'ROI optimization'\n                ]\n            }\n        ];\n        \n        return { phases };\n    }\n    constructor(customScoring, assessmentType = 'agency-vulnerability') {\n        this.customScoring = customScoring;\n        this.assessmentType = assessmentType;\n        \n        // Get configuration for this assessment type\n        const config = ScoringEngine.assessmentTypes[this.assessmentType] || \n                      ScoringEngine.assessmentTypes['agency-vulnerability']; // Fallback\n        \n        // Set default weights based on assessment type\n        this.defaultWeights = config.defaultWeights || {\n            technology: 0.25,\n            process: 0.25,\n            people: 0.25,\n            strategy: 0.25\n        };\n        \n        this.dimensionConfig = config.dimensionConfig || {};\n        \n        // Allow custom scoring to override default weights\n        this.weights = this.customScoring?.weights || this.defaultWeights;\n    }\n\n    calculate(responses, context) {\n        console.log('Starting score calculation with responses:', Object.keys(responses).length);\n        console.log('Context for calculation:', context);\n        \n        try {\n            // Base scoring logic used by all assessments\n            let scores = this.calculateDimensionScores(responses);\n    \n            // Apply custom scoring if provided\n            if (this.customScoring?.calculate) {\n                try {\n                    const customScores = this.customScoring.calculate(scores, responses, context);\n                    if (customScores) scores = customScores;\n                } catch (error) {\n                    console.error('Error in custom scoring calculation:', error);\n                }\n            }\n    \n            // Apply context-based adjustments\n            scores = this.applyContextAdjustments(scores, context);\n    \n            // Calculate overall score\n            const overall = this.calculateOverallScore(scores);\n            \n            // Generate insights\n            const result = {\n                scores: {\n                    overall: overall,\n                    categories: scores\n                },\n                insights: this.generateInsights({ overall, dimensions: scores }, context),\n                report: this.generateReport({ overall, dimensions: scores }, context)\n            };\n            \n            console.log('Final calculation result:', result);\n            return result;\n        } catch (error) {\n            console.error('Error in score calculation:', error);\n            \n            // Return a fallback result to prevent UI errors\n            return {\n                scores: {\n                    overall: 50,\n                    categories: {\n                        technology: { score: 50 },\n                        process: { score: 50 },\n                        people: { score: 50 },\n                        strategy: { score: 50 }\n                    }\n                },\n                insights: [{\n                    type: 'warning',\n                    title: 'Score Calculation Issue',\n                    description: 'There was an issue calculating your detailed scores.'\n                }],\n                report: this.generateDefaultReport()\n            };\n        }\n    }\n\n    calculateDimensionScores(responses) {\n        // Default implementation for base dimension calculation\n        console.log('Calculating dimension scores with responses:', responses);\n        \n        // Extract question responses and organize them by category\n        const categories = {};\n        \n        // Initialize default categories with zero scores\n        const defaultCategories = ['technology', 'process', 'people', 'strategy'];\n        defaultCategories.forEach(cat => {\n            categories[cat] = { score: 0, count: 0, responses: [] };\n        });\n        \n        // Process each response\n        Object.entries(responses).forEach(([questionId, answer]) => {\n            // Skip non-numeric responses or special properties\n            if (typeof answer !== 'number' || questionId === 'selectedServices') return;\n            \n            // Determine category from question ID - default to 'technology' if unknown\n            // Format might be: tech_01, people_02, etc.\n            const category = questionId.split('_')[0] || 'technology';\n            const normalizedCategory = this.normalizeCategory(category);\n            \n            // If category not initialized, create it\n            if (!categories[normalizedCategory]) {\n                categories[normalizedCategory] = { score: 0, count: 0, responses: [] };\n            }\n            \n            // Add the score (assuming questions are scored 0-5)\n            categories[normalizedCategory].score += answer;\n            categories[normalizedCategory].count++;\n            categories[normalizedCategory].responses.push({ id: questionId, value: answer });\n        });\n        \n        // Calculate average scores for each category\n        const dimensionScores = {};\n        Object.entries(categories).forEach(([category, data]) => {\n            dimensionScores[category] = {\n                score: data.count > 0 ? Math.round((data.score / (data.count * 5)) * 100) : 0,\n                responses: data.responses\n            };\n        });\n        \n        console.log('Calculated dimension scores:', dimensionScores);\n        return dimensionScores;\n    }\n\n    calculateOverallScore(dimensionScores) {\n        // Default implementation for overall score calculation\n        console.log('Calculating overall score with dimension scores:', dimensionScores);\n        \n        let weightedSum = 0;\n        let totalWeight = 0;\n        \n        // Calculate weighted sum of dimension scores\n        Object.entries(dimensionScores).forEach(([dimension, data]) => {\n            const weight = this.weights[dimension] || 0.25; // Default equal weight if not specified\n            weightedSum += (data.score || 0) * weight;\n            totalWeight += weight;\n        });\n        \n        // Calculate overall score (rounded to nearest integer)\n        const overallScore = totalWeight > 0 ? Math.round(weightedSum / totalWeight) : 50;\n        \n        console.log('Calculated overall score:', overallScore);\n        return overallScore;\n    }\n\n    applyContextAdjustments(scores, context) {\n        // Apply size, industry, or other contextual adjustments\n        console.log('Applying context adjustments with context:', context);\n        \n        // If no context, return scores unchanged\n        if (!context) return scores;\n        \n        // Example: Adjust for company size\n        if (context.companySize) {\n            // Small companies might get a boost in technology score\n            if (context.companySize === 'small' && scores.technology) {\n                scores.technology.score = Math.min(100, scores.technology.score + 5);\n            }\n        }\n        \n        // Example: Adjust for selected services\n        if (context.selectedServices) {\n            const serviceCount = Object.keys(context.selectedServices).length;\n            // More focused companies (fewer services) might score higher in strategy\n            if (serviceCount <= 2 && scores.strategy) {\n                scores.strategy.score = Math.min(100, scores.strategy.score + 5);\n            }\n        }\n        \n        return scores;\n    }\n\n    generateInsights(scores, context) {\n        // Generate insights based on scores\n        const insights = [];\n        \n        // Only proceed if we have valid scores\n        if (!scores) return insights;\n        \n        // Generate overall insights\n        if (typeof scores.overall === 'number') {\n            if (scores.overall < 30) {\n                insights.push({\n                    type: 'critical',\n                    title: 'Significant Improvement Needed',\n                    description: 'Your marketing maturity score indicates substantial room for improvement across multiple dimensions.'\n                });\n            } else if (scores.overall < 60) {\n                insights.push({\n                    type: 'warning',\n                    title: 'Building Foundations',\n                    description: 'You have some marketing fundamentals in place, but there are key areas that need strengthening.'\n                });\n            } else if (scores.overall < 80) {\n                insights.push({\n                    type: 'positive',\n                    title: 'Solid Performance',\n                    description: 'Your marketing operations show good maturity with specific opportunities for optimization.'\n                });\n            } else {\n                insights.push({\n                    type: 'excellent',\n                    title: 'Marketing Excellence',\n                    description: 'Your marketing organization demonstrates high levels of maturity and effectiveness.'\n                });\n            }\n        }\n        \n        // Generate dimension-specific insights\n        Object.entries(scores.dimensions || {}).forEach(([dimension, data]) => {\n            if (typeof data.score === 'number' && data.score < 50) {\n                insights.push({\n                    type: 'opportunity',\n                    dimension: dimension,\n                    title: `${this.formatDimension(dimension)} Opportunity`,\n                    description: `Your ${this.formatDimension(dimension)} score suggests this is a high-priority area for improvement.`\n                });\n            }\n        });\n        \n        return insights;\n    }\n}\n\nexport default ScoringEngine;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}