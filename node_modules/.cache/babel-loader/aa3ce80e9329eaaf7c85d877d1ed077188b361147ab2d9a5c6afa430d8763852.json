{"ast":null,"code":"/**\n * ResultsAdapter for inhouse-marketing assessment\n * Transforms raw scoring engine output into a consistent format for the results view\n */\n\nclass InhouseMarketingResultsAdapter {\n  /**\n   * Adapts raw results from the scoring engine into the format needed by the view component\n   * @param {Object} rawResults - Raw results object from the scoring engine\n   * @param {Function} getResponse - Function to retrieve saved responses\n   * @returns {Object} - Formatted results object\n   */\n  adaptResults(rawResults, getResponse) {\n    console.log('InhouseMarketingResultsAdapter: Starting adaptation process');\n\n    // Critical validation - ensure we have data to work with\n    if (!rawResults) {\n      console.error('InhouseMarketingResultsAdapter: No raw results provided');\n      return null;\n    }\n    console.log('InhouseMarketingResultsAdapter: Raw results overview:', {\n      hasOverall: Boolean(rawResults.overall),\n      hasDimensions: Boolean(rawResults.dimensions),\n      hasInsights: Boolean(rawResults.insights),\n      hasCategories: Boolean(rawResults.categoryScores)\n    });\n\n    // Step 1: Extract core assessment data with validation\n    const overallScore = typeof rawResults.overall === 'number' ? rawResults.overall : 35;\n\n    // Extract dimension scores with validation\n    const dimensionScores = rawResults.dimensions || {};\n    const validatedDimensions = {\n      humanReadiness: typeof dimensionScores.humanReadiness === 'number' ? dimensionScores.humanReadiness : 35,\n      technicalReadiness: typeof dimensionScores.technicalReadiness === 'number' ? dimensionScores.technicalReadiness : 30,\n      processMaturity: typeof dimensionScores.processMaturity === 'number' ? dimensionScores.processMaturity : 40,\n      activityAutomation: typeof dimensionScores.activityAutomation === 'number' ? dimensionScores.activityAutomation : 40\n    };\n\n    // Extract category scores with validation\n    const categoryScores = rawResults.categoryScores || {};\n    const validatedCategories = {};\n    Object.keys(categoryScores).forEach(category => {\n      if (typeof categoryScores[category] === 'number') {\n        validatedCategories[category] = categoryScores[category];\n      }\n    });\n\n    // Activity scores for detailed recommendations\n    const activityScores = rawResults.activityScores || {};\n\n    // Step 2: Get all user responses to generate accurate insights\n    const allResponses = {};\n    try {\n      // Get all saved question responses from various sections\n      const questionTypes = ['qualifying', 'service_selection', 'dynamic_questions'];\n      questionTypes.forEach(type => {\n        const savedData = getResponse(type);\n        if (savedData) {\n          Object.assign(allResponses, savedData);\n        }\n      });\n      console.log('InhouseMarketingResultsAdapter: Retrieved responses for sections', questionTypes);\n    } catch (error) {\n      console.error('InhouseMarketingResultsAdapter: Error retrieving responses:', error);\n    }\n\n    // Step 3: Extract contextual information about the assessment\n    const companySize = allResponses.company_size || 'small';\n    const sector = allResponses.sector || {};\n    const sectorName = sector.name || 'General Business';\n\n    // Parse selected services/activities\n    const selectedServices = allResponses.selectedServices || {};\n    let selectedActivities = Object.keys(selectedServices).filter(key => selectedServices[key] > 0.05);\n    if (!selectedActivities.length) {\n      selectedActivities = ['content_marketing', 'email_marketing', 'social_media'];\n    }\n    console.log('InhouseMarketingResultsAdapter: Context data', {\n      companySize,\n      sectorName,\n      selectedActivities: selectedActivities.length\n    });\n\n    // Step 4: Process insights from raw results or generate them algorithmically\n    const rawInsights = rawResults.insights || [];\n    let processedInsights = [];\n\n    // Check for legitimate insights from the scoring engine\n    if (rawInsights.length > 0) {\n      // Use scoring engine insights, but ensure they're consistent and valid\n      processedInsights = rawInsights.filter(insight => {\n        return insight && typeof insight.text === 'string' && (insight.type === 'strength' || insight.type === 'weakness');\n      });\n    }\n\n    // If we have insufficient valid insights, generate them algorithmically based on scores\n    if (processedInsights.length < 4) {\n      console.log('InhouseMarketingResultsAdapter: Generating algorithmic insights based on scores');\n\n      // Clear existing insights if they're sparse or invalid\n      processedInsights = [];\n\n      // Generate strengths based on highest dimension scores\n      const strengths = [];\n      if (validatedDimensions.humanReadiness > 50) {\n        strengths.push({\n          type: 'strength',\n          category: 'humanReadiness',\n          text: 'Your team has good readiness for marketing transformation'\n        });\n      }\n      if (validatedDimensions.technicalReadiness > 45) {\n        strengths.push({\n          type: 'strength',\n          category: 'technicalReadiness',\n          text: 'Your technical foundation supports marketing automation'\n        });\n      }\n      if (validatedDimensions.processMaturity > 45 || validatedDimensions.activityAutomation > 45) {\n        strengths.push({\n          type: 'strength',\n          category: 'processMaturity',\n          text: 'Your marketing processes show good maturity'\n        });\n      }\n\n      // Generate weaknesses based on lowest dimension scores\n      const weaknesses = [];\n      if (validatedDimensions.humanReadiness < 50) {\n        weaknesses.push({\n          type: 'weakness',\n          category: 'humanReadiness',\n          text: 'Your team needs more preparation for marketing transformation'\n        });\n      }\n      if (validatedDimensions.technicalReadiness < 45) {\n        weaknesses.push({\n          type: 'weakness',\n          category: 'technicalReadiness',\n          text: 'Your technical foundation needs strengthening'\n        });\n      }\n      if (validatedDimensions.processMaturity < 45 || validatedDimensions.activityAutomation < 45) {\n        weaknesses.push({\n          type: 'weakness',\n          category: 'processMaturity',\n          text: 'Your marketing processes need more structure'\n        });\n      }\n\n      // Add activity-specific insights based on selected activities\n      if (selectedActivities.includes('content_marketing')) {\n        const contentScore = activityScores.content_marketing || 35;\n        if (contentScore > 50) {\n          strengths.push({\n            type: 'strength',\n            category: 'content_marketing',\n            text: 'Your content marketing foundation is solid'\n          });\n        } else {\n          weaknesses.push({\n            type: 'weakness',\n            category: 'content_marketing',\n            text: 'Your content marketing processes need improvement'\n          });\n        }\n      }\n      if (selectedActivities.includes('email_marketing')) {\n        const emailScore = activityScores.email_marketing || 40;\n        if (emailScore > 50) {\n          strengths.push({\n            type: 'strength',\n            category: 'email_marketing',\n            text: 'Your email marketing is well-structured'\n          });\n        } else {\n          weaknesses.push({\n            type: 'weakness',\n            category: 'email_marketing',\n            text: 'Your email marketing automation needs enhancement'\n          });\n        }\n      }\n      if (selectedActivities.includes('social_media')) {\n        const socialScore = activityScores.social_media || 30;\n        if (socialScore > 50) {\n          strengths.push({\n            type: 'strength',\n            category: 'social_media',\n            text: 'Your social media processes are effective'\n          });\n        } else {\n          weaknesses.push({\n            type: 'weakness',\n            category: 'social_media',\n            text: 'Your social media management needs streamlining'\n          });\n        }\n      }\n\n      // Combine strengths and weaknesses, ensuring we have at least 2 of each\n      processedInsights = [...strengths.slice(0, 3), ...weaknesses.slice(0, 3)];\n\n      // Ensure we have at least some insights\n      if (processedInsights.length < 4) {\n        if (strengths.length < 2) {\n          processedInsights.push({\n            type: 'strength',\n            category: 'general',\n            text: 'Your willingness to assess marketing maturity is a positive step'\n          });\n        }\n        if (weaknesses.length < 2) {\n          processedInsights.push({\n            type: 'weakness',\n            category: 'general',\n            text: 'A comprehensive marketing strategy framework is needed'\n          });\n        }\n      }\n    }\n    console.log('InhouseMarketingResultsAdapter: Processed insights', processedInsights.length);\n\n    // Create filtered lists of strengths and weaknesses\n    const strengthsList = processedInsights.filter(i => i.type === 'strength').map(i => i.text);\n    const weaknessesList = processedInsights.filter(i => i.type === 'weakness').map(i => i.text);\n\n    // Step 5: Generate priorities based on insights and selected activities\n    let priorities = rawResults.priorities || [];\n\n    // If priorities are missing or invalid, generate them algorithmically\n    if (!priorities.length) {\n      console.log('InhouseMarketingResultsAdapter: Generating algorithmic priorities');\n      priorities = [];\n\n      // Generate foundational priorities\n      if (validatedDimensions.technicalReadiness < 50) {\n        priorities.push({\n          area: 'Technical Foundation',\n          timeframe: 'short',\n          impact: 'High',\n          effort: 'Medium',\n          steps: ['Audit existing marketing tools', 'Identify integration opportunities', 'Create implementation roadmap']\n        });\n      }\n      if (validatedDimensions.humanReadiness < 50) {\n        priorities.push({\n          area: 'Team Development',\n          timeframe: 'medium',\n          impact: 'High',\n          effort: 'Medium',\n          steps: ['Assess skill gaps', 'Create training program', 'Establish learning workflow']\n        });\n      }\n\n      // Add activity-specific priorities\n      if (selectedActivities.includes('content_marketing')) {\n        priorities.push({\n          area: 'Content Marketing Efficiency',\n          timeframe: 'short',\n          impact: 'High',\n          effort: 'Low',\n          steps: ['Create content calendar', 'Develop content templates', 'Implement batch creation process']\n        });\n      }\n      if (selectedActivities.includes('email_marketing')) {\n        priorities.push({\n          area: 'Email Automation',\n          timeframe: 'short',\n          impact: 'High',\n          effort: 'Medium',\n          steps: ['Segment audience', 'Create welcome sequence', 'Set up behavioral triggers']\n        });\n      }\n      if (selectedActivities.includes('social_media')) {\n        priorities.push({\n          area: 'Social Media Management',\n          timeframe: 'short',\n          impact: 'Medium',\n          effort: 'Low',\n          steps: ['Create content batching system', 'Set up scheduling calendar', 'Implement engagement workflow']\n        });\n      }\n    }\n    console.log('Selected services/activities for recommendations:', selectedActivities);\n    console.log('Sector context:', sector);\n\n    // Generate readiness level headline based on overall score\n    const getReadinessHeadline = score => {\n      if (score < 40) return 'Urgent Action Required';\n      if (score < 60) return 'Early Stage Adaptation';\n      if (score < 80) return 'Building Strong Capability';\n      return 'Marketing Transformation Ready';\n    };\n\n    // Format data in the structure expected by InhouseResultsView component\n    const executiveSummary = {\n      headline: getReadinessHeadline(overallScore),\n      subheadline: `Your organization scored ${overallScore} out of 100 on marketing readiness.`,\n      summary: `Based on your assessment responses, we've analyzed your organization's readiness for in-house marketing transformation across key dimensions. Your overall score of ${overallScore} indicates ${overallScore < 50 ? 'significant opportunities for improvement' : 'a solid foundation with targeted improvement areas'}.`,\n      strengths: insights.filter(insight => insight.type === 'strength').map(s => s.text) || ['Team shows openness to new tools', 'Basic technical foundation exists'],\n      weaknesses: insights.filter(insight => insight.type === 'weakness').map(w => w.text) || ['Limited automation expertise', 'Resource constraints may impact implementation']\n    };\n\n    // Format market position data\n    const marketPosition = {\n      position: rawMarketPosition.position || 'Developing',\n      description: rawMarketPosition.description || 'Your organization is in the developing stage of marketing maturity.',\n      competitiveAnalysis: {\n        ahead: rawMarketPosition.competitiveAdvantages || ['Early adoption of some automation tools'],\n        behind: rawMarketPosition.competitiveDisadvantages || ['Limited cross-channel integration']\n      },\n      industryBenchmark: {\n        score: rawMarketPosition.industryAverage || Math.max(30, overallScore - 15),\n        comparison: overallScore > (rawMarketPosition.industryAverage || 50) ? 'ahead' : 'behind'\n      }\n    };\n\n    // Service-specific recommendation mappings\n    const serviceRecommendations = {\n      content_marketing: {\n        quick: {\n          title: 'Implement Content Calendar',\n          description: 'Organize your content production pipeline with a structured calendar',\n          impact: 'High',\n          effort: 'Low',\n          implementation: ['Audit existing content', 'Define content themes', 'Create 90-day calendar']\n        },\n        medium: 'Develop content repurposing workflow',\n        long: 'Implement AI-assisted content creation'\n      },\n      email_marketing: {\n        quick: {\n          title: 'Set Up Welcome Sequence',\n          description: 'Create an automated onboarding email series for new subscribers',\n          impact: 'High',\n          effort: 'Medium',\n          implementation: ['Map customer journey', 'Draft 5-email sequence', 'Implement automation triggers']\n        },\n        medium: 'Segment email list based on behavior',\n        long: 'Implement predictive send-time optimization'\n      },\n      social_media: {\n        quick: {\n          title: 'Create Content Batching Process',\n          description: 'Implement efficient process for creating social posts in batches',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Set up content templates', 'Schedule monthly batching sessions', 'Use scheduling tools']\n        },\n        medium: 'Develop cross-platform content strategy',\n        long: 'Implement social listening and response system'\n      },\n      seo_sem: {\n        quick: {\n          title: 'Conduct Keyword Gap Analysis',\n          description: 'Identify untapped keyword opportunities vs competitors',\n          impact: 'High',\n          effort: 'Medium',\n          implementation: ['Analyze top 3 competitors', 'Identify content gaps', 'Prioritize quick-win terms']\n        },\n        medium: 'Implement technical SEO improvements',\n        long: 'Create hub and spoke content strategy'\n      },\n      analytics_data: {\n        quick: {\n          title: 'Set Up Basic Dashboard',\n          description: 'Create a centralized view of key marketing metrics',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Define KPIs', 'Connect data sources', 'Build initial dashboard']\n        },\n        medium: 'Implement campaign attribution model',\n        long: 'Develop predictive analytics capabilities'\n      },\n      paid_advertising: {\n        quick: {\n          title: 'Audit Ad Account Structure',\n          description: 'Reorganize campaigns for better tracking and optimization',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Review current structure', 'Create logical hierarchy', 'Implement proper tagging']\n        },\n        medium: 'Implement cross-channel retargeting',\n        long: 'Develop AI-driven bidding strategy'\n      },\n      creative_design: {\n        quick: {\n          title: 'Create Brand Style Guide',\n          description: 'Document visual standards for consistent brand presentation',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Audit current assets', 'Document standards', 'Create template library']\n        },\n        medium: 'Implement design workflow system',\n        long: 'Develop modular design system'\n      },\n      marketing_automation: {\n        quick: {\n          title: 'Map Automation Opportunities',\n          description: 'Identify and prioritize processes for automation',\n          impact: 'High',\n          effort: 'Low',\n          implementation: ['Document manual processes', 'Prioritize by impact/effort', 'Select initial project']\n        },\n        medium: 'Implement cross-channel triggers',\n        long: 'Create full customer journey automation'\n      }\n    };\n\n    // Generate service-specific quick wins based on selected services\n    const quickWins = selectedActivities.length > 0 ? selectedActivities.filter(service => serviceRecommendations[service]).map(service => serviceRecommendations[service].quick).filter(Boolean).slice(0, 3) : priorities.filter(p => p.timeframe === 'short').map(p => ({\n      title: p.title || 'Implement basic automation',\n      description: p.description || 'Quick impact opportunity requiring minimal investment',\n      impact: p.impact || 'Medium',\n      effort: p.effort || 'Low',\n      implementation: p.steps || ['Identify process', 'Select tool', 'Initial setup']\n    })) || [{\n      title: 'Implement basic email automation',\n      description: 'Set up fundamental automated email sequences',\n      impact: 'Medium',\n      effort: 'Low',\n      implementation: ['Audit current emails', 'Select automation triggers', 'Build first sequence']\n    }, {\n      title: 'Enhance analytics tracking',\n      description: 'Improve measurement of key marketing activities',\n      impact: 'High',\n      effort: 'Medium',\n      implementation: ['Audit current tracking', 'Define key metrics', 'Implement tracking']\n    }];\n\n    // Generate service-specific medium and long-term recommendations\n    const mediumTermActions = selectedActivities.length > 0 ? selectedActivities.filter(service => serviceRecommendations[service]).map(service => serviceRecommendations[service].medium).filter(Boolean).slice(0, 4) : priorities.filter(p => p.timeframe === 'medium').map(p => p.title) || ['Expand automation scope', 'Implement cross-channel coordination', 'Enhance reporting'];\n    const longTermActions = selectedActivities.length > 0 ? selectedActivities.filter(service => serviceRecommendations[service]).map(service => serviceRecommendations[service].long).filter(Boolean).slice(0, 4) : priorities.filter(p => p.timeframe === 'long').map(p => p.title) || ['Implement advanced personalization', 'Predictive analytics integration', 'Full marketing operations optimization'];\n\n    // Sector-specific investment guidelines\n    const sectorInvestmentGuidelines = {\n      b2b_saas: 'Estimated investment of $30,000-60,000 with 4-6x ROI potential within 12 months',\n      ecommerce: 'Estimated investment of $25,000-55,000 with 3-5x ROI potential within 9 months',\n      professional_services: 'Estimated investment of $20,000-45,000 with 2-4x ROI potential within 12 months',\n      healthcare: 'Estimated investment of $35,000-70,000 with 2-3x ROI potential within 15 months',\n      manufacturing: 'Estimated investment of $25,000-50,000 with 2-4x ROI potential within 12 months'\n    };\n\n    // Strategic roadmap with phases - now with service-specific recommendations\n    const strategicRoadmap = {\n      overview: 'A 9-month phased approach to transform your marketing capabilities',\n      phase1: {\n        title: 'Foundation Building',\n        timeframe: '0-3 months',\n        focus: 'Establish fundamental processes and quick wins',\n        actions: quickWins.map(win => win.title),\n        expectedOutcome: 'Baseline processes established with initial efficiency gains'\n      },\n      phase2: {\n        title: 'Capability Expansion',\n        timeframe: '3-6 months',\n        focus: 'Scale successful initiatives and add complexity',\n        actions: mediumTermActions,\n        expectedOutcome: 'Improved cross-channel effectiveness with better measurement'\n      },\n      phase3: {\n        title: 'Advanced Optimization',\n        timeframe: '6-9 months',\n        focus: 'Refine and optimize for maximum impact',\n        actions: longTermActions,\n        expectedOutcome: 'Highly optimized, data-driven marketing operation'\n      },\n      investmentGuide: savingsPotential.description || sector.id && sectorInvestmentGuidelines[sector.id] || 'Estimated investment of $20,000-50,000 with 3-5x ROI potential within 12 months'\n    };\n\n    // Service-specific expected outcomes\n    const serviceOutcomes = {\n      content_marketing: {\n        area: 'Content Effectiveness',\n        keyMetric: 'Content Engagement Rate',\n        baseline: 'Current baseline',\n        target: '45% increase',\n        timeframe: '6 months'\n      },\n      email_marketing: {\n        area: 'Email Performance',\n        keyMetric: 'Email Conversion Rate',\n        baseline: 'Current baseline',\n        target: '30% increase',\n        timeframe: '3 months'\n      },\n      social_media: {\n        area: 'Social Engagement',\n        keyMetric: 'Social Media Conversion',\n        baseline: 'Current baseline',\n        target: '40% increase',\n        timeframe: '6 months'\n      },\n      seo_sem: {\n        area: 'Organic Traffic',\n        keyMetric: 'Qualified Organic Visitors',\n        baseline: 'Current baseline',\n        target: '50% increase',\n        timeframe: '9 months'\n      },\n      analytics_data: {\n        area: 'Decision Quality',\n        keyMetric: 'Data-Driven Decisions',\n        baseline: '20% of decisions',\n        target: '80% of decisions',\n        timeframe: '6 months'\n      },\n      paid_advertising: {\n        area: 'Ad Performance',\n        keyMetric: 'Cost Per Acquisition',\n        baseline: 'Current baseline',\n        target: '35% reduction',\n        timeframe: '3 months'\n      },\n      creative_design: {\n        area: 'Brand Consistency',\n        keyMetric: 'Brand Recognition',\n        baseline: 'Current level',\n        target: '50% improvement',\n        timeframe: '9 months'\n      },\n      marketing_automation: {\n        area: 'Process Efficiency',\n        keyMetric: 'Time Spent on Routine Tasks',\n        baseline: '60% of marketing time',\n        target: '25% of marketing time',\n        timeframe: '6 months'\n      }\n    };\n\n    // Generate service-specific outcomes based on selected services\n    const serviceSpecificOutcomes = selectedActivities.length > 0 ? selectedActivities.filter(service => serviceOutcomes[service]).map(service => serviceOutcomes[service]).filter(Boolean) : [];\n    console.log('Service-specific outcomes:', serviceSpecificOutcomes);\n\n    // Expected outcomes - combine standard outcomes with service-specific ones\n    const expectedOutcomes = [\n    // Always include these core outcomes\n    {\n      area: 'Marketing Efficiency',\n      keyMetric: 'Time Spent on Routine Tasks',\n      baseline: '60% of marketing time',\n      target: '30% of marketing time',\n      timeframe: '6 months'\n    }, {\n      area: 'Lead Generation',\n      keyMetric: 'Marketing Qualified Leads',\n      baseline: 'Current baseline',\n      target: '35% increase',\n      timeframe: '6 months'\n    }, {\n      area: 'Marketing ROI',\n      keyMetric: 'Return on Marketing Investment',\n      baseline: 'Current baseline',\n      target: '40% improvement',\n      timeframe: '12 months'\n    },\n    // Add up to 3 service-specific outcomes\n    ...serviceSpecificOutcomes.slice(0, 3)];\n\n    // Ensure we have at least one expected outcome\n    if (!expectedOutcomes.length) {\n      expectedOutcomes.push({\n        area: 'Marketing Efficiency',\n        keyMetric: 'Time Saved on Routine Tasks',\n        baseline: '0 hours/week',\n        target: '10+ hours/week',\n        timeframe: '3 months'\n      });\n    }\n    console.log('Expected outcomes prepared:', expectedOutcomes.length);\n\n    // Next steps\n    const nextSteps = {\n      primaryCTA: {\n        title: 'Schedule Your Strategy Session',\n        description: 'Get personalized guidance on implementing your marketing transformation plan',\n        buttonText: 'Book Your QuickMap Session',\n        link: 'https://calendly.com/your-booking-link'\n      },\n      alternatives: [{\n        text: 'Download Full Report',\n        description: 'Get a detailed PDF version of this assessment',\n        link: '#download-report'\n      }, {\n        text: 'Share With Your Team',\n        description: 'Email these results to key stakeholders',\n        link: '#share-results'\n      }]\n    };\n\n    // Calculate maturity levels for different dimensions based on dimension scores\n    const maturityLevels = {\n      humanReadiness: {\n        score: dimensionScores.humanReadiness || 35,\n        level: getMaturityLevel(dimensionScores.humanReadiness || 35),\n        label: 'Team Readiness'\n      },\n      technicalReadiness: {\n        score: dimensionScores.technicalReadiness || 30,\n        level: getMaturityLevel(dimensionScores.technicalReadiness || 30),\n        label: 'Technical Foundation'\n      },\n      processMaturity: {\n        score: dimensionScores.processMaturity || dimensionScores.activityAutomation || 40,\n        level: getMaturityLevel(dimensionScores.processMaturity || dimensionScores.activityAutomation || 40),\n        label: 'Process Maturity'\n      },\n      overallMaturity: {\n        score: overallScore,\n        level: getMaturityLevel(overallScore),\n        label: 'Overall Marketing Maturity'\n      }\n    };\n    console.log('Maturity levels prepared:', Object.keys(maturityLevels).length);\n\n    // Helper function to determine maturity level from score\n    function getMaturityLevel(score) {\n      if (score < 30) return 'Initial';\n      if (score < 50) return 'Developing';\n      if (score < 70) return 'Defined';\n      if (score < 85) return 'Managed';\n      return 'Optimized';\n    }\n\n    // Final validation to ensure all required data structures are populated\n    console.log('Validating final output structures before returning...');\n\n    // Validate all required sections have content\n    if (!executiveSummary.strengths || !executiveSummary.strengths.length) {\n      console.log('Adding default strengths data');\n      executiveSummary.strengths = ['Team shows willingness to adopt new technologies', 'Basic technical infrastructure is in place', 'Key marketing activities are already identified'];\n    }\n    if (!executiveSummary.weaknesses || !executiveSummary.weaknesses.length) {\n      console.log('Adding default weaknesses data');\n      executiveSummary.weaknesses = ['Limited automation expertise in current team', 'Manual processes consume significant time', 'Cross-channel coordination needs improvement'];\n    }\n    if (!marketPosition.competitiveAnalysis || !marketPosition.competitiveAnalysis.ahead || !marketPosition.competitiveAnalysis.ahead.length) {\n      console.log('Adding default competitive advantages');\n      marketPosition.competitiveAnalysis.ahead = ['Early adoption of some automation tools', 'Solid understanding of target audience', 'Willingness to innovate'];\n    }\n    if (!marketPosition.competitiveAnalysis || !marketPosition.competitiveAnalysis.behind || !marketPosition.competitiveAnalysis.behind.length) {\n      console.log('Adding default competitive disadvantages');\n      marketPosition.competitiveAnalysis.behind = ['Limited cross-channel integration', 'Manual reporting processes', 'Siloed marketing data'];\n    }\n    if (!quickWins || !quickWins.length) {\n      console.log('Adding default quick wins');\n      quickWins = [{\n        title: 'Implement Content Calendar',\n        description: 'Organize content production with a structured calendar',\n        impact: 'High',\n        effort: 'Low',\n        implementation: ['Audit existing content', 'Define content themes', 'Create 90-day calendar']\n      }, {\n        title: 'Set Up Welcome Sequence',\n        description: 'Create an automated email sequence for new subscribers',\n        impact: 'High',\n        effort: 'Medium',\n        implementation: ['Map customer journey', 'Draft email sequence', 'Implement triggers']\n      }];\n    }\n\n    // Log summary of data prepared for view\n    console.log('Data preparation complete. Summary:');\n    console.log(`- Executive Summary: ${executiveSummary.strengths.length} strengths, ${executiveSummary.weaknesses.length} weaknesses`);\n    console.log(`- Market Position: Position = ${marketPosition.position}`);\n    console.log(`- Quick Wins: ${quickWins.length} items`);\n    console.log(`- Strategic Roadmap: ${Object.keys(strategicRoadmap).length} sections`);\n    console.log(`- Expected Outcomes: ${expectedOutcomes.length} items`);\n    console.log(`- Maturity Levels: ${Object.keys(maturityLevels).length} dimensions`);\n\n    // Complete results object including both original raw data and the formatted view data\n    return {\n      // For the InhouseResultsView component\n      executiveSummary,\n      marketPosition,\n      quickWins,\n      strategicRoadmap,\n      expectedOutcomes,\n      nextSteps,\n      maturityLevels,\n      // Original assessment metadata\n      assessmentType: 'inhouse-marketing',\n      timestamp: rawResults.timestamp || new Date().toISOString(),\n      // Individual question responses\n      responses: allResponses,\n      // Context data\n      context: {\n        companySize,\n        sector,\n        selectedActivities\n      },\n      // Original results data\n      results: {\n        overall: overallScore,\n        dimensions: dimensionScores,\n        categoryScores: categoryScores,\n        activityScores: activityScores,\n        insights: insights,\n        priorities: priorities,\n        readinessLevel: readinessLevel,\n        marketPosition: rawMarketPosition,\n        savingsPotential: savingsPotential\n      },\n      // Engine data for completeness\n      engineData: {\n        allResponses: allResponses,\n        context: {\n          companySize,\n          sector,\n          selectedActivities\n        },\n        progressData: {\n          current: 5,\n          total: 6,\n          percentage: 80,\n          stageName: 'results'\n        },\n        completionStatus: true\n      },\n      // Include raw data for debugging\n      _rawData: rawResults\n    };\n  }\n}\nexport default InhouseMarketingResultsAdapter;","map":{"version":3,"names":["InhouseMarketingResultsAdapter","adaptResults","rawResults","getResponse","console","log","error","hasOverall","Boolean","overall","hasDimensions","dimensions","hasInsights","insights","hasCategories","categoryScores","overallScore","dimensionScores","validatedDimensions","humanReadiness","technicalReadiness","processMaturity","activityAutomation","validatedCategories","Object","keys","forEach","category","activityScores","allResponses","questionTypes","type","savedData","assign","companySize","company_size","sector","sectorName","name","selectedServices","selectedActivities","filter","key","length","rawInsights","processedInsights","insight","text","strengths","push","weaknesses","includes","contentScore","content_marketing","emailScore","email_marketing","socialScore","social_media","slice","strengthsList","i","map","weaknessesList","priorities","area","timeframe","impact","effort","steps","getReadinessHeadline","score","executiveSummary","headline","subheadline","summary","s","w","marketPosition","position","rawMarketPosition","description","competitiveAnalysis","ahead","competitiveAdvantages","behind","competitiveDisadvantages","industryBenchmark","industryAverage","Math","max","comparison","serviceRecommendations","quick","title","implementation","medium","long","seo_sem","analytics_data","paid_advertising","creative_design","marketing_automation","quickWins","service","p","mediumTermActions","longTermActions","sectorInvestmentGuidelines","b2b_saas","ecommerce","professional_services","healthcare","manufacturing","strategicRoadmap","overview","phase1","focus","actions","win","expectedOutcome","phase2","phase3","investmentGuide","savingsPotential","id","serviceOutcomes","keyMetric","baseline","target","serviceSpecificOutcomes","expectedOutcomes","nextSteps","primaryCTA","buttonText","link","alternatives","maturityLevels","level","getMaturityLevel","label","overallMaturity","assessmentType","timestamp","Date","toISOString","responses","context","results","readinessLevel","engineData","progressData","current","total","percentage","stageName","completionStatus","_rawData"],"sources":["/Users/jon/Documents/GitHub/assessor/src/assessments/inhouse-marketing/ResultsAdapter.js"],"sourcesContent":["/**\n * ResultsAdapter for inhouse-marketing assessment\n * Transforms raw scoring engine output into a consistent format for the results view\n */\n\nclass InhouseMarketingResultsAdapter {\n  /**\n   * Adapts raw results from the scoring engine into the format needed by the view component\n   * @param {Object} rawResults - Raw results object from the scoring engine\n   * @param {Function} getResponse - Function to retrieve saved responses\n   * @returns {Object} - Formatted results object\n   */\n  adaptResults(rawResults, getResponse) {\n    console.log('InhouseMarketingResultsAdapter: Starting adaptation process');\n    \n    // Critical validation - ensure we have data to work with\n    if (!rawResults) {\n      console.error('InhouseMarketingResultsAdapter: No raw results provided');\n      return null;\n    }\n\n    console.log('InhouseMarketingResultsAdapter: Raw results overview:', {\n      hasOverall: Boolean(rawResults.overall),\n      hasDimensions: Boolean(rawResults.dimensions),\n      hasInsights: Boolean(rawResults.insights),\n      hasCategories: Boolean(rawResults.categoryScores)\n    });\n    \n    // Step 1: Extract core assessment data with validation\n    const overallScore = typeof rawResults.overall === 'number' ? rawResults.overall : 35;\n    \n    // Extract dimension scores with validation\n    const dimensionScores = rawResults.dimensions || {};\n    const validatedDimensions = {\n      humanReadiness: typeof dimensionScores.humanReadiness === 'number' ? dimensionScores.humanReadiness : 35,\n      technicalReadiness: typeof dimensionScores.technicalReadiness === 'number' ? dimensionScores.technicalReadiness : 30,\n      processMaturity: typeof dimensionScores.processMaturity === 'number' ? dimensionScores.processMaturity : 40,\n      activityAutomation: typeof dimensionScores.activityAutomation === 'number' ? dimensionScores.activityAutomation : 40\n    };\n    \n    // Extract category scores with validation\n    const categoryScores = rawResults.categoryScores || {};\n    const validatedCategories = {};\n    Object.keys(categoryScores).forEach(category => {\n      if (typeof categoryScores[category] === 'number') {\n        validatedCategories[category] = categoryScores[category];\n      }\n    });\n    \n    // Activity scores for detailed recommendations\n    const activityScores = rawResults.activityScores || {};\n    \n    // Step 2: Get all user responses to generate accurate insights\n    const allResponses = {};\n    try {\n      // Get all saved question responses from various sections\n      const questionTypes = ['qualifying', 'service_selection', 'dynamic_questions'];\n      questionTypes.forEach(type => {\n        const savedData = getResponse(type);\n        if (savedData) {\n          Object.assign(allResponses, savedData);\n        }\n      });\n      console.log('InhouseMarketingResultsAdapter: Retrieved responses for sections', questionTypes);\n    } catch (error) {\n      console.error('InhouseMarketingResultsAdapter: Error retrieving responses:', error);\n    }\n    \n    // Step 3: Extract contextual information about the assessment\n    const companySize = allResponses.company_size || 'small';\n    const sector = allResponses.sector || {};\n    const sectorName = sector.name || 'General Business';\n    \n    // Parse selected services/activities\n    const selectedServices = allResponses.selectedServices || {};\n    let selectedActivities = Object.keys(selectedServices).filter(key => selectedServices[key] > 0.05);\n    if (!selectedActivities.length) {\n      selectedActivities = ['content_marketing', 'email_marketing', 'social_media'];\n    }\n    \n    console.log('InhouseMarketingResultsAdapter: Context data', {\n      companySize,\n      sectorName,\n      selectedActivities: selectedActivities.length\n    });\n    \n    // Step 4: Process insights from raw results or generate them algorithmically\n    const rawInsights = rawResults.insights || [];\n    let processedInsights = [];\n    \n    // Check for legitimate insights from the scoring engine\n    if (rawInsights.length > 0) {\n      // Use scoring engine insights, but ensure they're consistent and valid\n      processedInsights = rawInsights.filter(insight => {\n        return insight && typeof insight.text === 'string' && \n               (insight.type === 'strength' || insight.type === 'weakness');\n      });\n    }\n    \n    // If we have insufficient valid insights, generate them algorithmically based on scores\n    if (processedInsights.length < 4) {\n      console.log('InhouseMarketingResultsAdapter: Generating algorithmic insights based on scores');\n      \n      // Clear existing insights if they're sparse or invalid\n      processedInsights = [];\n      \n      // Generate strengths based on highest dimension scores\n      const strengths = [];\n      \n      if (validatedDimensions.humanReadiness > 50) {\n        strengths.push({ \n          type: 'strength', \n          category: 'humanReadiness',\n          text: 'Your team has good readiness for marketing transformation'\n        });\n      }\n      \n      if (validatedDimensions.technicalReadiness > 45) {\n        strengths.push({ \n          type: 'strength', \n          category: 'technicalReadiness',\n          text: 'Your technical foundation supports marketing automation'\n        });\n      }\n      \n      if (validatedDimensions.processMaturity > 45 || validatedDimensions.activityAutomation > 45) {\n        strengths.push({ \n          type: 'strength', \n          category: 'processMaturity',\n          text: 'Your marketing processes show good maturity'\n        });\n      }\n      \n      // Generate weaknesses based on lowest dimension scores\n      const weaknesses = [];\n      \n      if (validatedDimensions.humanReadiness < 50) {\n        weaknesses.push({ \n          type: 'weakness', \n          category: 'humanReadiness',\n          text: 'Your team needs more preparation for marketing transformation'\n        });\n      }\n      \n      if (validatedDimensions.technicalReadiness < 45) {\n        weaknesses.push({ \n          type: 'weakness', \n          category: 'technicalReadiness',\n          text: 'Your technical foundation needs strengthening'\n        });\n      }\n      \n      if (validatedDimensions.processMaturity < 45 || validatedDimensions.activityAutomation < 45) {\n        weaknesses.push({ \n          type: 'weakness', \n          category: 'processMaturity',\n          text: 'Your marketing processes need more structure'\n        });\n      }\n      \n      // Add activity-specific insights based on selected activities\n      if (selectedActivities.includes('content_marketing')) {\n        const contentScore = activityScores.content_marketing || 35;\n        if (contentScore > 50) {\n          strengths.push({\n            type: 'strength',\n            category: 'content_marketing',\n            text: 'Your content marketing foundation is solid'\n          });\n        } else {\n          weaknesses.push({\n            type: 'weakness',\n            category: 'content_marketing',\n            text: 'Your content marketing processes need improvement'\n          });\n        }\n      }\n      \n      if (selectedActivities.includes('email_marketing')) {\n        const emailScore = activityScores.email_marketing || 40;\n        if (emailScore > 50) {\n          strengths.push({\n            type: 'strength',\n            category: 'email_marketing',\n            text: 'Your email marketing is well-structured'\n          });\n        } else {\n          weaknesses.push({\n            type: 'weakness',\n            category: 'email_marketing',\n            text: 'Your email marketing automation needs enhancement'\n          });\n        }\n      }\n      \n      if (selectedActivities.includes('social_media')) {\n        const socialScore = activityScores.social_media || 30;\n        if (socialScore > 50) {\n          strengths.push({\n            type: 'strength',\n            category: 'social_media',\n            text: 'Your social media processes are effective'\n          });\n        } else {\n          weaknesses.push({\n            type: 'weakness',\n            category: 'social_media',\n            text: 'Your social media management needs streamlining'\n          });\n        }\n      }\n      \n      // Combine strengths and weaknesses, ensuring we have at least 2 of each\n      processedInsights = [\n        ...strengths.slice(0, 3),\n        ...weaknesses.slice(0, 3)\n      ];\n      \n      // Ensure we have at least some insights\n      if (processedInsights.length < 4) {\n        if (strengths.length < 2) {\n          processedInsights.push({\n            type: 'strength',\n            category: 'general',\n            text: 'Your willingness to assess marketing maturity is a positive step'\n          });\n        }\n        \n        if (weaknesses.length < 2) {\n          processedInsights.push({\n            type: 'weakness',\n            category: 'general',\n            text: 'A comprehensive marketing strategy framework is needed'\n          });\n        }\n      }\n    }\n    \n    console.log('InhouseMarketingResultsAdapter: Processed insights', processedInsights.length);\n    \n    // Create filtered lists of strengths and weaknesses\n    const strengthsList = processedInsights.filter(i => i.type === 'strength').map(i => i.text);\n    const weaknessesList = processedInsights.filter(i => i.type === 'weakness').map(i => i.text);\n    \n    // Step 5: Generate priorities based on insights and selected activities\n    let priorities = rawResults.priorities || [];\n    \n    // If priorities are missing or invalid, generate them algorithmically\n    if (!priorities.length) {\n      console.log('InhouseMarketingResultsAdapter: Generating algorithmic priorities');\n      priorities = [];\n      \n      // Generate foundational priorities\n      if (validatedDimensions.technicalReadiness < 50) {\n        priorities.push({\n          area: 'Technical Foundation',\n          timeframe: 'short',\n          impact: 'High',\n          effort: 'Medium',\n          steps: [\n            'Audit existing marketing tools',\n            'Identify integration opportunities',\n            'Create implementation roadmap'\n          ]\n        });\n      }\n      \n      if (validatedDimensions.humanReadiness < 50) {\n        priorities.push({\n          area: 'Team Development',\n          timeframe: 'medium',\n          impact: 'High',\n          effort: 'Medium',\n          steps: [\n            'Assess skill gaps',\n            'Create training program',\n            'Establish learning workflow'\n          ]\n        });\n      }\n      \n      // Add activity-specific priorities\n      if (selectedActivities.includes('content_marketing')) {\n        priorities.push({\n          area: 'Content Marketing Efficiency',\n          timeframe: 'short',\n          impact: 'High',\n          effort: 'Low',\n          steps: [\n            'Create content calendar',\n            'Develop content templates',\n            'Implement batch creation process'\n          ]\n        });\n      }\n      \n      if (selectedActivities.includes('email_marketing')) {\n        priorities.push({\n          area: 'Email Automation',\n          timeframe: 'short',\n          impact: 'High',\n          effort: 'Medium',\n          steps: [\n            'Segment audience',\n            'Create welcome sequence',\n            'Set up behavioral triggers'\n          ]\n        });\n      }\n      \n      if (selectedActivities.includes('social_media')) {\n        priorities.push({\n          area: 'Social Media Management',\n          timeframe: 'short',\n          impact: 'Medium',\n          effort: 'Low',\n          steps: [\n            'Create content batching system',\n            'Set up scheduling calendar',\n            'Implement engagement workflow'\n          ]\n        });\n      }\n    }\n    \n    console.log('Selected services/activities for recommendations:', selectedActivities);\n    console.log('Sector context:', sector);\n    \n    // Generate readiness level headline based on overall score\n    const getReadinessHeadline = (score) => {\n      if (score < 40) return 'Urgent Action Required';\n      if (score < 60) return 'Early Stage Adaptation';\n      if (score < 80) return 'Building Strong Capability';\n      return 'Marketing Transformation Ready';\n    };\n\n    // Format data in the structure expected by InhouseResultsView component\n    const executiveSummary = {\n      headline: getReadinessHeadline(overallScore),\n      subheadline: `Your organization scored ${overallScore} out of 100 on marketing readiness.`,\n      summary: `Based on your assessment responses, we've analyzed your organization's readiness for in-house marketing transformation across key dimensions. Your overall score of ${overallScore} indicates ${overallScore < 50 ? 'significant opportunities for improvement' : 'a solid foundation with targeted improvement areas'}.`,\n      strengths: insights.filter(insight => insight.type === 'strength').map(s => s.text) || \n        ['Team shows openness to new tools', 'Basic technical foundation exists'],\n      weaknesses: insights.filter(insight => insight.type === 'weakness').map(w => w.text) || \n        ['Limited automation expertise', 'Resource constraints may impact implementation']\n    };\n\n    // Format market position data\n    const marketPosition = {\n      position: rawMarketPosition.position || 'Developing',\n      description: rawMarketPosition.description || 'Your organization is in the developing stage of marketing maturity.',\n      competitiveAnalysis: {\n        ahead: rawMarketPosition.competitiveAdvantages || ['Early adoption of some automation tools'],\n        behind: rawMarketPosition.competitiveDisadvantages || ['Limited cross-channel integration']\n      },\n      industryBenchmark: {\n        score: rawMarketPosition.industryAverage || Math.max(30, overallScore - 15),\n        comparison: overallScore > (rawMarketPosition.industryAverage || 50) ? 'ahead' : 'behind'\n      }\n    };\n\n    // Service-specific recommendation mappings\n    const serviceRecommendations = {\n      content_marketing: {\n        quick: {\n          title: 'Implement Content Calendar',\n          description: 'Organize your content production pipeline with a structured calendar',\n          impact: 'High',\n          effort: 'Low',\n          implementation: ['Audit existing content', 'Define content themes', 'Create 90-day calendar']\n        },\n        medium: 'Develop content repurposing workflow',\n        long: 'Implement AI-assisted content creation'\n      },\n      email_marketing: {\n        quick: {\n          title: 'Set Up Welcome Sequence',\n          description: 'Create an automated onboarding email series for new subscribers',\n          impact: 'High',\n          effort: 'Medium',\n          implementation: ['Map customer journey', 'Draft 5-email sequence', 'Implement automation triggers']\n        },\n        medium: 'Segment email list based on behavior',\n        long: 'Implement predictive send-time optimization'\n      },\n      social_media: {\n        quick: {\n          title: 'Create Content Batching Process',\n          description: 'Implement efficient process for creating social posts in batches',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Set up content templates', 'Schedule monthly batching sessions', 'Use scheduling tools']\n        },\n        medium: 'Develop cross-platform content strategy',\n        long: 'Implement social listening and response system'\n      },\n      seo_sem: {\n        quick: {\n          title: 'Conduct Keyword Gap Analysis',\n          description: 'Identify untapped keyword opportunities vs competitors',\n          impact: 'High',\n          effort: 'Medium',\n          implementation: ['Analyze top 3 competitors', 'Identify content gaps', 'Prioritize quick-win terms']\n        },\n        medium: 'Implement technical SEO improvements',\n        long: 'Create hub and spoke content strategy'\n      },\n      analytics_data: {\n        quick: {\n          title: 'Set Up Basic Dashboard',\n          description: 'Create a centralized view of key marketing metrics',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Define KPIs', 'Connect data sources', 'Build initial dashboard']\n        },\n        medium: 'Implement campaign attribution model',\n        long: 'Develop predictive analytics capabilities'\n      },\n      paid_advertising: {\n        quick: {\n          title: 'Audit Ad Account Structure',\n          description: 'Reorganize campaigns for better tracking and optimization',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Review current structure', 'Create logical hierarchy', 'Implement proper tagging']\n        },\n        medium: 'Implement cross-channel retargeting',\n        long: 'Develop AI-driven bidding strategy'\n      },\n      creative_design: {\n        quick: {\n          title: 'Create Brand Style Guide',\n          description: 'Document visual standards for consistent brand presentation',\n          impact: 'Medium',\n          effort: 'Low',\n          implementation: ['Audit current assets', 'Document standards', 'Create template library']\n        },\n        medium: 'Implement design workflow system',\n        long: 'Develop modular design system'\n      },\n      marketing_automation: {\n        quick: {\n          title: 'Map Automation Opportunities',\n          description: 'Identify and prioritize processes for automation',\n          impact: 'High',\n          effort: 'Low',\n          implementation: ['Document manual processes', 'Prioritize by impact/effort', 'Select initial project']\n        },\n        medium: 'Implement cross-channel triggers',\n        long: 'Create full customer journey automation'\n      }\n    };\n    \n    // Generate service-specific quick wins based on selected services\n    const quickWins = selectedActivities.length > 0 \n      ? selectedActivities\n        .filter(service => serviceRecommendations[service])\n        .map(service => serviceRecommendations[service].quick)\n        .filter(Boolean)\n        .slice(0, 3)\n      : priorities.filter(p => p.timeframe === 'short').map(p => ({\n          title: p.title || 'Implement basic automation',\n          description: p.description || 'Quick impact opportunity requiring minimal investment',\n          impact: p.impact || 'Medium',\n          effort: p.effort || 'Low',\n          implementation: p.steps || ['Identify process', 'Select tool', 'Initial setup']\n        })) || [\n          {\n            title: 'Implement basic email automation',\n            description: 'Set up fundamental automated email sequences',\n            impact: 'Medium',\n            effort: 'Low',\n            implementation: ['Audit current emails', 'Select automation triggers', 'Build first sequence']\n          },\n          {\n            title: 'Enhance analytics tracking',\n            description: 'Improve measurement of key marketing activities',\n            impact: 'High',\n            effort: 'Medium',\n            implementation: ['Audit current tracking', 'Define key metrics', 'Implement tracking']\n          }\n        ];\n\n    // Generate service-specific medium and long-term recommendations\n    const mediumTermActions = selectedActivities.length > 0 \n      ? selectedActivities\n          .filter(service => serviceRecommendations[service])\n          .map(service => serviceRecommendations[service].medium)\n          .filter(Boolean)\n          .slice(0, 4)\n      : priorities.filter(p => p.timeframe === 'medium').map(p => p.title) || \n          ['Expand automation scope', 'Implement cross-channel coordination', 'Enhance reporting'];\n          \n    const longTermActions = selectedActivities.length > 0 \n      ? selectedActivities\n          .filter(service => serviceRecommendations[service])\n          .map(service => serviceRecommendations[service].long)\n          .filter(Boolean)\n          .slice(0, 4)\n      : priorities.filter(p => p.timeframe === 'long').map(p => p.title) || \n          ['Implement advanced personalization', 'Predictive analytics integration', 'Full marketing operations optimization'];\n    \n    // Sector-specific investment guidelines\n    const sectorInvestmentGuidelines = {\n      b2b_saas: 'Estimated investment of $30,000-60,000 with 4-6x ROI potential within 12 months',\n      ecommerce: 'Estimated investment of $25,000-55,000 with 3-5x ROI potential within 9 months',\n      professional_services: 'Estimated investment of $20,000-45,000 with 2-4x ROI potential within 12 months',\n      healthcare: 'Estimated investment of $35,000-70,000 with 2-3x ROI potential within 15 months',\n      manufacturing: 'Estimated investment of $25,000-50,000 with 2-4x ROI potential within 12 months'\n    };\n    \n    // Strategic roadmap with phases - now with service-specific recommendations\n    const strategicRoadmap = {\n      overview: 'A 9-month phased approach to transform your marketing capabilities',\n      phase1: {\n        title: 'Foundation Building',\n        timeframe: '0-3 months',\n        focus: 'Establish fundamental processes and quick wins',\n        actions: quickWins.map(win => win.title),\n        expectedOutcome: 'Baseline processes established with initial efficiency gains'\n      },\n      phase2: {\n        title: 'Capability Expansion',\n        timeframe: '3-6 months',\n        focus: 'Scale successful initiatives and add complexity',\n        actions: mediumTermActions,\n        expectedOutcome: 'Improved cross-channel effectiveness with better measurement'\n      },\n      phase3: {\n        title: 'Advanced Optimization',\n        timeframe: '6-9 months',\n        focus: 'Refine and optimize for maximum impact',\n        actions: longTermActions,\n        expectedOutcome: 'Highly optimized, data-driven marketing operation'\n      },\n      investmentGuide: savingsPotential.description || \n        (sector.id && sectorInvestmentGuidelines[sector.id]) || \n        'Estimated investment of $20,000-50,000 with 3-5x ROI potential within 12 months'\n    };\n\n    // Service-specific expected outcomes\n    const serviceOutcomes = {\n      content_marketing: {\n        area: 'Content Effectiveness',\n        keyMetric: 'Content Engagement Rate',\n        baseline: 'Current baseline',\n        target: '45% increase',\n        timeframe: '6 months'\n      },\n      email_marketing: {\n        area: 'Email Performance',\n        keyMetric: 'Email Conversion Rate',\n        baseline: 'Current baseline',\n        target: '30% increase',\n        timeframe: '3 months'\n      },\n      social_media: {\n        area: 'Social Engagement',\n        keyMetric: 'Social Media Conversion',\n        baseline: 'Current baseline',\n        target: '40% increase',\n        timeframe: '6 months'\n      },\n      seo_sem: {\n        area: 'Organic Traffic',\n        keyMetric: 'Qualified Organic Visitors',\n        baseline: 'Current baseline',\n        target: '50% increase',\n        timeframe: '9 months'\n      },\n      analytics_data: {\n        area: 'Decision Quality',\n        keyMetric: 'Data-Driven Decisions',\n        baseline: '20% of decisions',\n        target: '80% of decisions',\n        timeframe: '6 months'\n      },\n      paid_advertising: {\n        area: 'Ad Performance',\n        keyMetric: 'Cost Per Acquisition',\n        baseline: 'Current baseline',\n        target: '35% reduction',\n        timeframe: '3 months'\n      },\n      creative_design: {\n        area: 'Brand Consistency',\n        keyMetric: 'Brand Recognition',\n        baseline: 'Current level',\n        target: '50% improvement',\n        timeframe: '9 months'\n      },\n      marketing_automation: {\n        area: 'Process Efficiency',\n        keyMetric: 'Time Spent on Routine Tasks',\n        baseline: '60% of marketing time',\n        target: '25% of marketing time',\n        timeframe: '6 months'\n      }\n    };\n    \n    // Generate service-specific outcomes based on selected services\n    const serviceSpecificOutcomes = selectedActivities.length > 0 \n      ? selectedActivities\n          .filter(service => serviceOutcomes[service])\n          .map(service => serviceOutcomes[service])\n          .filter(Boolean)\n      : [];\n    \n    console.log('Service-specific outcomes:', serviceSpecificOutcomes);\n          \n    // Expected outcomes - combine standard outcomes with service-specific ones\n    const expectedOutcomes = [\n      // Always include these core outcomes\n      {\n        area: 'Marketing Efficiency',\n        keyMetric: 'Time Spent on Routine Tasks',\n        baseline: '60% of marketing time',\n        target: '30% of marketing time',\n        timeframe: '6 months'\n      },\n      {\n        area: 'Lead Generation',\n        keyMetric: 'Marketing Qualified Leads',\n        baseline: 'Current baseline',\n        target: '35% increase',\n        timeframe: '6 months'\n      },\n      {\n        area: 'Marketing ROI',\n        keyMetric: 'Return on Marketing Investment',\n        baseline: 'Current baseline',\n        target: '40% improvement',\n        timeframe: '12 months'\n      },\n      // Add up to 3 service-specific outcomes\n      ...serviceSpecificOutcomes.slice(0, 3)\n    ];\n\n    // Ensure we have at least one expected outcome\n    if (!expectedOutcomes.length) {\n      expectedOutcomes.push({\n        area: 'Marketing Efficiency',\n        keyMetric: 'Time Saved on Routine Tasks',\n        baseline: '0 hours/week',\n        target: '10+ hours/week',\n        timeframe: '3 months'\n      });\n    }\n\n    console.log('Expected outcomes prepared:', expectedOutcomes.length);\n\n    // Next steps\n    const nextSteps = {\n      primaryCTA: {\n        title: 'Schedule Your Strategy Session',\n        description: 'Get personalized guidance on implementing your marketing transformation plan',\n        buttonText: 'Book Your QuickMap Session',\n        link: 'https://calendly.com/your-booking-link'\n      },\n      alternatives: [\n        {\n          text: 'Download Full Report',\n          description: 'Get a detailed PDF version of this assessment',\n          link: '#download-report'\n        },\n        {\n          text: 'Share With Your Team',\n          description: 'Email these results to key stakeholders',\n          link: '#share-results'\n        }\n      ]\n    };\n\n    // Calculate maturity levels for different dimensions based on dimension scores\n    const maturityLevels = {\n      humanReadiness: {\n        score: dimensionScores.humanReadiness || 35,\n        level: getMaturityLevel(dimensionScores.humanReadiness || 35),\n        label: 'Team Readiness'\n      },\n      technicalReadiness: {\n        score: dimensionScores.technicalReadiness || 30,\n        level: getMaturityLevel(dimensionScores.technicalReadiness || 30),\n        label: 'Technical Foundation'\n      },\n      processMaturity: {\n        score: dimensionScores.processMaturity || dimensionScores.activityAutomation || 40,\n        level: getMaturityLevel(dimensionScores.processMaturity || dimensionScores.activityAutomation || 40),\n        label: 'Process Maturity'\n      },\n      overallMaturity: {\n        score: overallScore,\n        level: getMaturityLevel(overallScore),\n        label: 'Overall Marketing Maturity'\n      }\n    };\n    \n    console.log('Maturity levels prepared:', Object.keys(maturityLevels).length);\n    \n    // Helper function to determine maturity level from score\n    function getMaturityLevel(score) {\n      if (score < 30) return 'Initial';\n      if (score < 50) return 'Developing';\n      if (score < 70) return 'Defined';\n      if (score < 85) return 'Managed';\n      return 'Optimized';\n    }\n    \n    // Final validation to ensure all required data structures are populated\n    console.log('Validating final output structures before returning...');\n    \n    // Validate all required sections have content\n    if (!executiveSummary.strengths || !executiveSummary.strengths.length) {\n      console.log('Adding default strengths data');\n      executiveSummary.strengths = [\n        'Team shows willingness to adopt new technologies',\n        'Basic technical infrastructure is in place',\n        'Key marketing activities are already identified'\n      ];\n    }\n    \n    if (!executiveSummary.weaknesses || !executiveSummary.weaknesses.length) {\n      console.log('Adding default weaknesses data');\n      executiveSummary.weaknesses = [\n        'Limited automation expertise in current team',\n        'Manual processes consume significant time',\n        'Cross-channel coordination needs improvement'\n      ];\n    }\n    \n    if (!marketPosition.competitiveAnalysis || !marketPosition.competitiveAnalysis.ahead || !marketPosition.competitiveAnalysis.ahead.length) {\n      console.log('Adding default competitive advantages');\n      marketPosition.competitiveAnalysis.ahead = [\n        'Early adoption of some automation tools',\n        'Solid understanding of target audience',\n        'Willingness to innovate'\n      ];\n    }\n    \n    if (!marketPosition.competitiveAnalysis || !marketPosition.competitiveAnalysis.behind || !marketPosition.competitiveAnalysis.behind.length) {\n      console.log('Adding default competitive disadvantages');\n      marketPosition.competitiveAnalysis.behind = [\n        'Limited cross-channel integration',\n        'Manual reporting processes',\n        'Siloed marketing data'\n      ];\n    }\n    \n    if (!quickWins || !quickWins.length) {\n      console.log('Adding default quick wins');\n      quickWins = [\n        {\n          title: 'Implement Content Calendar',\n          description: 'Organize content production with a structured calendar',\n          impact: 'High',\n          effort: 'Low',\n          implementation: ['Audit existing content', 'Define content themes', 'Create 90-day calendar']\n        },\n        {\n          title: 'Set Up Welcome Sequence',\n          description: 'Create an automated email sequence for new subscribers',\n          impact: 'High',\n          effort: 'Medium',\n          implementation: ['Map customer journey', 'Draft email sequence', 'Implement triggers']\n        }\n      ];\n    }\n    \n    // Log summary of data prepared for view\n    console.log('Data preparation complete. Summary:');\n    console.log(`- Executive Summary: ${executiveSummary.strengths.length} strengths, ${executiveSummary.weaknesses.length} weaknesses`);\n    console.log(`- Market Position: Position = ${marketPosition.position}`);\n    console.log(`- Quick Wins: ${quickWins.length} items`);\n    console.log(`- Strategic Roadmap: ${Object.keys(strategicRoadmap).length} sections`);\n    console.log(`- Expected Outcomes: ${expectedOutcomes.length} items`);\n    console.log(`- Maturity Levels: ${Object.keys(maturityLevels).length} dimensions`);\n    \n    // Complete results object including both original raw data and the formatted view data\n    return {\n      // For the InhouseResultsView component\n      executiveSummary,\n      marketPosition,\n      quickWins,\n      strategicRoadmap,\n      expectedOutcomes,\n      nextSteps,\n      maturityLevels,\n      \n      // Original assessment metadata\n      assessmentType: 'inhouse-marketing',\n      timestamp: rawResults.timestamp || new Date().toISOString(),\n      \n      // Individual question responses\n      responses: allResponses,\n      \n      // Context data\n      context: {\n        companySize,\n        sector,\n        selectedActivities\n      },\n      \n      // Original results data\n      results: {\n        overall: overallScore,\n        dimensions: dimensionScores,\n        categoryScores: categoryScores,\n        activityScores: activityScores,\n        insights: insights,\n        priorities: priorities,\n        readinessLevel: readinessLevel,\n        marketPosition: rawMarketPosition,\n        savingsPotential: savingsPotential,\n      },\n      \n      // Engine data for completeness\n      engineData: {\n        allResponses: allResponses,\n        context: {\n          companySize,\n          sector,\n          selectedActivities\n        },\n        progressData: {\n          current: 5,\n          total: 6,\n          percentage: 80,\n          stageName: 'results'\n        },\n        completionStatus: true\n      },\n      \n      // Include raw data for debugging\n      _rawData: rawResults\n    };\n  }\n}\n\nexport default InhouseMarketingResultsAdapter;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}