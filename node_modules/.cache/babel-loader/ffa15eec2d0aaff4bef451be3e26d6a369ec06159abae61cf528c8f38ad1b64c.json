{"ast":null,"code":"export class ScoringEngine {\n  // Helper methods for category and dimension handling\n  normalizeCategory(category) {\n    // Map various category names to standard categories\n    const categoryMap = {\n      'tech': 'technology',\n      'technology': 'technology',\n      'tools': 'technology',\n      'process': 'process',\n      'processes': 'process',\n      'workflow': 'process',\n      'people': 'people',\n      'team': 'people',\n      'skills': 'people',\n      'talent': 'people',\n      'strategy': 'strategy',\n      'plan': 'strategy',\n      'planning': 'strategy',\n      'content': 'content',\n      'analytics': 'analytics'\n    };\n    return categoryMap[category.toLowerCase()] || 'technology';\n  }\n  formatDimension(dimension) {\n    // Format dimension names for display\n    const dimensionLabels = {\n      'technology': 'Technology',\n      'process': 'Process',\n      'people': 'People',\n      'strategy': 'Strategy',\n      'content': 'Content',\n      'analytics': 'Analytics'\n    };\n    return dimensionLabels[dimension.toLowerCase()] || dimension.charAt(0).toUpperCase() + dimension.slice(1);\n  }\n  generateReport(scores, context) {\n    // Generate a complete report based on scores and context\n    try {\n      const overallScore = scores.overall || 0;\n\n      // Executive summary section\n      const executive = {\n        headline: 'Your Assessment Results',\n        subheadline: 'Detailed analysis and recommendations below',\n        narrative: this.generateSummary(scores),\n        snapshot: this.generateSnapshot(scores, context),\n        keyMetrics: {\n          roi: {\n            value: `${Math.round(overallScore * 1.5)}%`,\n            label: 'Potential ROI',\n            interpretation: overallScore < 40 ? 'Significant room for improvement' : 'Strong foundation for growth'\n          },\n          efficiency: {\n            value: `${Math.round(overallScore * 0.8)}%`,\n            label: 'Operational Efficiency',\n            interpretation: 'Based on your process maturity'\n          },\n          readiness: {\n            value: overallScore < 30 ? 'Low' : overallScore < 60 ? 'Medium' : 'High',\n            label: 'Marketing Readiness',\n            interpretation: 'Your overall marketing maturity'\n          }\n        }\n      };\n\n      // Readiness section\n      const readiness = {\n        title: 'Marketing Readiness Assessment',\n        subtitle: 'How your marketing organization compares across key dimensions',\n        dimensions: this.generateDimensionCards(scores)\n      };\n\n      // Create full report object\n      return {\n        title: 'Marketing Maturity Assessment',\n        summary: this.generateSummary(scores) || 'Thank you for completing the assessment.',\n        executive: executive,\n        readiness: readiness,\n        recommendations: this.generateRecommendations(scores, context),\n        nextSteps: {\n          booking: {\n            headline: 'Ready to Elevate Your Marketing?',\n            subheadline: 'Schedule a consultation to get personalized insights',\n            buttonText: 'Book Your Strategy Session'\n          },\n          urgency: {\n            message: 'Limited spots available this month'\n          },\n          testimonial: {\n            quote: 'The assessment identified exactly where we needed to focus. Six months later, our marketing ROI has doubled.',\n            author: 'Marketing Director',\n            role: 'SaaS Company',\n            result: '107% increase in qualified leads'\n          }\n        },\n        roadmap: this.generateRoadmap(scores),\n        valuation: this.generateValuationImpact(scores, context)\n      };\n    } catch (error) {\n      console.error('Error generating report:', error);\n      return this.generateDefaultReport();\n    }\n  }\n  generateDefaultReport() {\n    // Generate a default report when scoring fails\n    return {\n      title: 'Marketing Maturity Assessment',\n      summary: 'Based on your responses, we have prepared an initial assessment of your marketing maturity.',\n      recommendations: [],\n      nextSteps: {\n        booking: {\n          headline: 'Get a Complete Assessment',\n          subheadline: 'Schedule a consultation to get personalized insights',\n          buttonText: 'Book Your Strategy Session'\n        }\n      },\n      roadmap: {\n        phases: [{\n          name: 'Foundation',\n          duration: '1-3 months',\n          focus: 'Establish core marketing processes',\n          milestones: ['Marketing strategy', 'Basic analytics', 'Content planning']\n        }, {\n          name: 'Growth',\n          duration: '3-6 months',\n          focus: 'Scale effective channels',\n          milestones: ['Channel optimization', 'Automation', 'Lead scoring']\n        }]\n      }\n    };\n  }\n  generateSummary(scores) {\n    // Generate summary text based on overall score\n    if (!scores || typeof scores.overall !== 'number') {\n      return 'Thank you for completing the assessment.';\n    }\n    if (scores.overall < 30) {\n      return 'Your marketing organization is in the early stages of development. There are significant opportunities to build a more effective marketing function.';\n    } else if (scores.overall < 60) {\n      return 'Your marketing organization has established some foundations but needs further development in key areas to become fully effective.';\n    } else if (scores.overall < 80) {\n      return 'Your marketing organization demonstrates good maturity with specific opportunities for optimization to reach excellence.';\n    } else {\n      return 'Your marketing organization shows high maturity across multiple dimensions. Focus on refinement and innovation to maintain your competitive edge.';\n    }\n  }\n  generateRecommendations(scores, context) {\n    const recommendations = [];\n\n    // Only proceed if we have valid scores\n    if (!scores || !scores.dimensions) return recommendations;\n\n    // Generate recommendations for each dimension with low scores\n    Object.entries(scores.dimensions).forEach(([dimension, data]) => {\n      if (data.score < 50) {\n        switch (dimension) {\n          case 'technology':\n            recommendations.push({\n              dimension: 'technology',\n              title: 'Technology Stack Optimization',\n              description: 'Your marketing technology score indicates room for improvement.',\n              specificAction: 'Conduct a technology audit and identify critical gaps in your marketing stack.'\n            });\n            break;\n          case 'process':\n            recommendations.push({\n              dimension: 'process',\n              title: 'Process Standardization',\n              description: 'Standardizing your marketing processes will improve efficiency and consistency.',\n              specificAction: 'Document your core marketing workflows and identify bottlenecks.'\n            });\n            break;\n          case 'people':\n            recommendations.push({\n              dimension: 'people',\n              title: 'Talent Development',\n              description: 'Investing in your marketing team capabilities will drive better results.',\n              specificAction: 'Assess skill gaps and create a training plan for your marketing team.'\n            });\n            break;\n          case 'strategy':\n            recommendations.push({\n              dimension: 'strategy',\n              title: 'Strategic Planning',\n              description: 'A more robust marketing strategy will align efforts and improve outcomes.',\n              specificAction: 'Develop a comprehensive marketing strategy document with clear KPIs.'\n            });\n            break;\n          default:\n            recommendations.push({\n              dimension: dimension,\n              title: `${this.formatDimension(dimension)} Enhancement`,\n              description: `Your ${this.formatDimension(dimension)} capabilities need strengthening.`,\n              specificAction: `Evaluate your current ${dimension} approach and develop an improvement plan.`\n            });\n        }\n      }\n    });\n\n    // Add general recommendations if needed\n    if (recommendations.length === 0) {\n      recommendations.push({\n        dimension: 'general',\n        title: 'Continuous Improvement',\n        description: 'While your marketing maturity is strong, continuous improvement will maintain your advantage.',\n        specificAction: 'Establish quarterly marketing reviews to identify optimization opportunities.'\n      });\n    }\n    return recommendations;\n  }\n  generateRoadmap(scores) {\n    // Generate a roadmap based on scores\n    const phases = [{\n      name: 'Foundation',\n      duration: '1-3 months',\n      focus: 'Establish core marketing capabilities',\n      milestones: ['Develop marketing strategy', 'Implement basic analytics', 'Standardize content production', 'Set up CRM processes']\n    }, {\n      name: 'Growth',\n      duration: '3-6 months',\n      focus: 'Scale effective channels and processes',\n      milestones: ['Optimize high-performing channels', 'Implement marketing automation', 'Develop lead scoring model', 'Create customer journey maps']\n    }, {\n      name: 'Optimization',\n      duration: '6-12 months',\n      focus: 'Refine performance and integration',\n      milestones: ['Advanced attribution modeling', 'Cross-channel integration', 'Personalization at scale', 'ROI optimization']\n    }];\n    return {\n      phases\n    };\n  }\n  constructor(customScoring, assessmentType = 'agency-vulnerability') {\n    var _this$customScoring;\n    this.customScoring = customScoring;\n    this.assessmentType = assessmentType;\n\n    // Get configuration for this assessment type\n    const config = ScoringEngine.assessmentTypes[this.assessmentType] || ScoringEngine.assessmentTypes['agency-vulnerability']; // Fallback\n\n    // Set default weights based on assessment type\n    this.defaultWeights = config.defaultWeights || {\n      technology: 0.25,\n      process: 0.25,\n      people: 0.25,\n      strategy: 0.25\n    };\n    this.dimensionConfig = config.dimensionConfig || {};\n\n    // Allow custom scoring to override default weights\n    this.weights = ((_this$customScoring = this.customScoring) === null || _this$customScoring === void 0 ? void 0 : _this$customScoring.weights) || this.defaultWeights;\n  }\n  calculate(responses, context) {\n    console.log('Starting score calculation with responses:', Object.keys(responses).length);\n    console.log('Context for calculation:', context);\n    try {\n      var _this$customScoring2;\n      // Base scoring logic used by all assessments\n      let scores = this.calculateDimensionScores(responses);\n\n      // Apply custom scoring if provided\n      if ((_this$customScoring2 = this.customScoring) !== null && _this$customScoring2 !== void 0 && _this$customScoring2.calculate) {\n        try {\n          const customScores = this.customScoring.calculate(scores, responses, context);\n          if (customScores) scores = customScores;\n        } catch (error) {\n          console.error('Error in custom scoring calculation:', error);\n        }\n      }\n\n      // Apply context-based adjustments\n      scores = this.applyContextAdjustments(scores, context);\n\n      // Calculate overall score\n      const overall = this.calculateOverallScore(scores);\n\n      // Generate insights\n      const result = {\n        scores: {\n          overall: overall,\n          categories: scores\n        },\n        insights: this.generateInsights({\n          overall,\n          dimensions: scores\n        }, context),\n        report: this.generateReport({\n          overall,\n          dimensions: scores\n        }, context)\n      };\n      console.log('Final calculation result:', result);\n      return result;\n    } catch (error) {\n      console.error('Error in score calculation:', error);\n\n      // Return a fallback result to prevent UI errors\n      return {\n        scores: {\n          overall: 50,\n          categories: {\n            technology: {\n              score: 50\n            },\n            process: {\n              score: 50\n            },\n            people: {\n              score: 50\n            },\n            strategy: {\n              score: 50\n            }\n          }\n        },\n        insights: [{\n          type: 'warning',\n          title: 'Score Calculation Issue',\n          description: 'There was an issue calculating your detailed scores.'\n        }],\n        report: this.generateDefaultReport()\n      };\n    }\n  }\n  calculateDimensionScores(responses) {\n    // Default implementation for base dimension calculation\n    console.log('Calculating dimension scores with responses:', responses);\n\n    // Extract question responses and organize them by category\n    const categories = {};\n\n    // Initialize default categories with zero scores\n    const defaultCategories = ['technology', 'process', 'people', 'strategy'];\n    defaultCategories.forEach(cat => {\n      categories[cat] = {\n        score: 0,\n        count: 0,\n        responses: []\n      };\n    });\n\n    // Process each response\n    Object.entries(responses).forEach(([questionId, answer]) => {\n      // Skip non-numeric responses or special properties\n      if (typeof answer !== 'number' || questionId === 'selectedServices') return;\n\n      // Determine category from question ID - default to 'technology' if unknown\n      // Format might be: tech_01, people_02, etc.\n      const category = questionId.split('_')[0] || 'technology';\n      const normalizedCategory = this.normalizeCategory(category);\n\n      // If category not initialized, create it\n      if (!categories[normalizedCategory]) {\n        categories[normalizedCategory] = {\n          score: 0,\n          count: 0,\n          responses: []\n        };\n      }\n\n      // Add the score (assuming questions are scored 0-5)\n      categories[normalizedCategory].score += answer;\n      categories[normalizedCategory].count++;\n      categories[normalizedCategory].responses.push({\n        id: questionId,\n        value: answer\n      });\n    });\n\n    // Calculate average scores for each category\n    const dimensionScores = {};\n    Object.entries(categories).forEach(([category, data]) => {\n      dimensionScores[category] = {\n        score: data.count > 0 ? Math.round(data.score / (data.count * 5) * 100) : 0,\n        responses: data.responses\n      };\n    });\n    console.log('Calculated dimension scores:', dimensionScores);\n    return dimensionScores;\n  }\n  calculateOverallScore(dimensionScores) {\n    // Default implementation for overall score calculation\n    console.log('Calculating overall score with dimension scores:', dimensionScores);\n    let weightedSum = 0;\n    let totalWeight = 0;\n\n    // Calculate weighted sum of dimension scores\n    Object.entries(dimensionScores).forEach(([dimension, data]) => {\n      const weight = this.weights[dimension] || 0.25; // Default equal weight if not specified\n      weightedSum += (data.score || 0) * weight;\n      totalWeight += weight;\n    });\n\n    // Calculate overall score (rounded to nearest integer)\n    const overallScore = totalWeight > 0 ? Math.round(weightedSum / totalWeight) : 50;\n    console.log('Calculated overall score:', overallScore);\n    return overallScore;\n  }\n  applyContextAdjustments(scores, context) {\n    // Apply size, industry, or other contextual adjustments\n    console.log('Applying context adjustments with context:', context);\n\n    // If no context, return scores unchanged\n    if (!context) return scores;\n\n    // Example: Adjust for company size\n    if (context.companySize) {\n      // Small companies might get a boost in technology score\n      if (context.companySize === 'small' && scores.technology) {\n        scores.technology.score = Math.min(100, scores.technology.score + 5);\n      }\n    }\n\n    // Example: Adjust for selected services\n    if (context.selectedServices) {\n      const serviceCount = Object.keys(context.selectedServices).length;\n      // More focused companies (fewer services) might score higher in strategy\n      if (serviceCount <= 2 && scores.strategy) {\n        scores.strategy.score = Math.min(100, scores.strategy.score + 5);\n      }\n    }\n    return scores;\n  }\n  generateInsights(scores, context) {\n    // Generate insights based on scores\n    const insights = [];\n\n    // Only proceed if we have valid scores\n    if (!scores) return insights;\n\n    // Generate overall insights\n    if (typeof scores.overall === 'number') {\n      if (scores.overall < 30) {\n        insights.push({\n          type: 'critical',\n          title: 'Significant Improvement Needed',\n          description: 'Your marketing maturity score indicates substantial room for improvement across multiple dimensions.'\n        });\n      } else if (scores.overall < 60) {\n        insights.push({\n          type: 'warning',\n          title: 'Building Foundations',\n          description: 'You have some marketing fundamentals in place, but there are key areas that need strengthening.'\n        });\n      } else if (scores.overall < 80) {\n        insights.push({\n          type: 'positive',\n          title: 'Solid Performance',\n          description: 'Your marketing operations show good maturity with specific opportunities for optimization.'\n        });\n      } else {\n        insights.push({\n          type: 'excellent',\n          title: 'Marketing Excellence',\n          description: 'Your marketing organization demonstrates high levels of maturity and effectiveness.'\n        });\n      }\n    }\n\n    // Generate dimension-specific insights\n    Object.entries(scores.dimensions || {}).forEach(([dimension, data]) => {\n      if (typeof data.score === 'number' && data.score < 50) {\n        insights.push({\n          type: 'opportunity',\n          dimension: dimension,\n          title: `${this.formatDimension(dimension)} Opportunity`,\n          description: `Your ${this.formatDimension(dimension)} score suggests this is a high-priority area for improvement.`\n        });\n      }\n    });\n    return insights;\n  }\n}\n// Configuration for different assessment types\nScoringEngine.assessmentTypes = {\n  'agency-vulnerability': {\n    defaultWeights: {\n      technology: 0.3,\n      process: 0.3,\n      people: 0.2,\n      strategy: 0.2\n    },\n    dimensionConfig: {\n      technology: {\n        icon: '💻',\n        description: 'Your agency technology stack and utilization',\n        insights: {\n          low: ['Limited use of marketing technology', 'Manual processes dominate workflow', 'Disconnected data sources'],\n          medium: ['Basic marketing tools in use', 'Some automation implemented', 'Partial integration of platforms'],\n          high: ['Advanced MarTech stack', 'Sophisticated automation', 'Integrated data ecosystem']\n        }\n      },\n      process: {\n        icon: '⚙️',\n        description: 'Your agency processes and operational efficiency',\n        insights: {\n          low: ['Ad hoc project execution', 'Inconsistent workflows', 'Limited documentation'],\n          medium: ['Defined core processes', 'Consistent execution', 'Some measurement in place'],\n          high: ['Optimized workflows', 'Continuous improvement cycle', 'Clear ownership and accountability']\n        }\n      },\n      people: {\n        icon: '👥',\n        description: 'Your team skills, structure and capabilities',\n        insights: {\n          low: ['Skills gaps in key areas', 'Siloed responsibilities', 'Limited AI training'],\n          medium: ['Core competencies covered', 'Defined roles', 'Some AI exploration'],\n          high: ['AI-ready expertise', 'Cross-functional collaboration', 'Continuous AI skill development']\n        }\n      },\n      strategy: {\n        icon: '🎯',\n        description: 'Your agency strategy and client positioning',\n        insights: {\n          low: ['Tactical focus', 'Reactive planning', 'Limited client AI conversations'],\n          medium: ['Defined AI objectives', 'Regular planning cycles', 'Some AI positioning'],\n          high: ['Clear AI strategic direction', 'AI-driven decision making', 'Strong AI value proposition']\n        }\n      }\n    }\n  },\n  'inhouse-marketing': {\n    defaultWeights: {\n      technology: 0.25,\n      process: 0.25,\n      people: 0.25,\n      strategy: 0.25\n    },\n    dimensionConfig: {\n      technology: {\n        icon: '💻',\n        description: 'Your marketing technology stack and utilization',\n        insights: {\n          low: ['Limited use of AI marketing tools', 'Manual content creation', 'Basic analytics'],\n          medium: ['Some AI tools implemented', 'Partial automation', 'Standard reporting'],\n          high: ['Advanced AI MarTech stack', 'Sophisticated automation', 'Predictive analytics']\n        }\n      },\n      process: {\n        icon: '⚙️',\n        description: 'Your marketing processes and workflow efficiency',\n        insights: {\n          low: ['Ad hoc marketing execution', 'Manual approval workflows', 'Limited measurement'],\n          medium: ['Defined marketing processes', 'Some automation', 'Regular KPI tracking'],\n          high: ['AI-optimized workflows', 'Automated campaign management', 'Continuous optimization']\n        }\n      },\n      people: {\n        icon: '👥',\n        description: 'Your team skills and AI readiness',\n        insights: {\n          low: ['Limited AI awareness', 'Skills gaps', 'Resistance to new tools'],\n          medium: ['Basic AI literacy', 'Some experimenting', 'Identified champions'],\n          high: ['AI-fluent team', 'Continuous learning culture', 'Clear AI roles']\n        }\n      },\n      strategy: {\n        icon: '🎯',\n        description: 'Your marketing strategy and planning approach',\n        insights: {\n          low: ['Traditional planning', 'No AI integration', 'Limited personalization'],\n          medium: ['Some AI considerations', 'Testing AI-driven targeting', 'Partial personalization'],\n          high: ['AI-centered strategy', 'Dynamic personalization', 'Predictive customer journey']\n        }\n      }\n    }\n  }\n};\nexport default ScoringEngine;","map":{"version":3,"names":["ScoringEngine","normalizeCategory","category","categoryMap","toLowerCase","formatDimension","dimension","dimensionLabels","charAt","toUpperCase","slice","generateReport","scores","context","overallScore","overall","executive","headline","subheadline","narrative","generateSummary","snapshot","generateSnapshot","keyMetrics","roi","value","Math","round","label","interpretation","efficiency","readiness","title","subtitle","dimensions","generateDimensionCards","summary","recommendations","generateRecommendations","nextSteps","booking","buttonText","urgency","message","testimonial","quote","author","role","result","roadmap","generateRoadmap","valuation","generateValuationImpact","error","console","generateDefaultReport","phases","name","duration","focus","milestones","Object","entries","forEach","data","score","push","description","specificAction","length","constructor","customScoring","assessmentType","_this$customScoring","config","assessmentTypes","defaultWeights","technology","process","people","strategy","dimensionConfig","weights","calculate","responses","log","keys","_this$customScoring2","calculateDimensionScores","customScores","applyContextAdjustments","calculateOverallScore","categories","insights","generateInsights","report","type","defaultCategories","cat","count","questionId","answer","split","normalizedCategory","id","dimensionScores","weightedSum","totalWeight","weight","companySize","min","selectedServices","serviceCount","icon","low","medium","high"],"sources":["/Users/jon/Documents/GitHub/assessor/src/core/engine/ScoringEngine.js"],"sourcesContent":["export class ScoringEngine {\n    // Configuration for different assessment types\n    static assessmentTypes = {\n        'agency-vulnerability': {\n            defaultWeights: {\n                technology: 0.3,\n                process: 0.3,\n                people: 0.2,\n                strategy: 0.2\n            },\n            dimensionConfig: {\n                technology: {\n                    icon: '💻',\n                    description: 'Your agency technology stack and utilization',\n                    insights: {\n                        low: ['Limited use of marketing technology', 'Manual processes dominate workflow', 'Disconnected data sources'],\n                        medium: ['Basic marketing tools in use', 'Some automation implemented', 'Partial integration of platforms'],\n                        high: ['Advanced MarTech stack', 'Sophisticated automation', 'Integrated data ecosystem']\n                    }\n                },\n                process: {\n                    icon: '⚙️',\n                    description: 'Your agency processes and operational efficiency',\n                    insights: {\n                        low: ['Ad hoc project execution', 'Inconsistent workflows', 'Limited documentation'],\n                        medium: ['Defined core processes', 'Consistent execution', 'Some measurement in place'],\n                        high: ['Optimized workflows', 'Continuous improvement cycle', 'Clear ownership and accountability']\n                    }\n                },\n                people: {\n                    icon: '👥',\n                    description: 'Your team skills, structure and capabilities',\n                    insights: {\n                        low: ['Skills gaps in key areas', 'Siloed responsibilities', 'Limited AI training'],\n                        medium: ['Core competencies covered', 'Defined roles', 'Some AI exploration'],\n                        high: ['AI-ready expertise', 'Cross-functional collaboration', 'Continuous AI skill development']\n                    }\n                },\n                strategy: {\n                    icon: '🎯',\n                    description: 'Your agency strategy and client positioning',\n                    insights: {\n                        low: ['Tactical focus', 'Reactive planning', 'Limited client AI conversations'],\n                        medium: ['Defined AI objectives', 'Regular planning cycles', 'Some AI positioning'],\n                        high: ['Clear AI strategic direction', 'AI-driven decision making', 'Strong AI value proposition']\n                    }\n                }\n            }\n        },\n        'inhouse-marketing': {\n            defaultWeights: {\n                technology: 0.25,\n                process: 0.25,\n                people: 0.25,\n                strategy: 0.25\n            },\n            dimensionConfig: {\n                technology: {\n                    icon: '💻',\n                    description: 'Your marketing technology stack and utilization',\n                    insights: {\n                        low: ['Limited use of AI marketing tools', 'Manual content creation', 'Basic analytics'],\n                        medium: ['Some AI tools implemented', 'Partial automation', 'Standard reporting'],\n                        high: ['Advanced AI MarTech stack', 'Sophisticated automation', 'Predictive analytics']\n                    }\n                },\n                process: {\n                    icon: '⚙️',\n                    description: 'Your marketing processes and workflow efficiency',\n                    insights: {\n                        low: ['Ad hoc marketing execution', 'Manual approval workflows', 'Limited measurement'],\n                        medium: ['Defined marketing processes', 'Some automation', 'Regular KPI tracking'],\n                        high: ['AI-optimized workflows', 'Automated campaign management', 'Continuous optimization']\n                    }\n                },\n                people: {\n                    icon: '👥',\n                    description: 'Your team skills and AI readiness',\n                    insights: {\n                        low: ['Limited AI awareness', 'Skills gaps', 'Resistance to new tools'],\n                        medium: ['Basic AI literacy', 'Some experimenting', 'Identified champions'],\n                        high: ['AI-fluent team', 'Continuous learning culture', 'Clear AI roles']\n                    }\n                },\n                strategy: {\n                    icon: '🎯',\n                    description: 'Your marketing strategy and planning approach',\n                    insights: {\n                        low: ['Traditional planning', 'No AI integration', 'Limited personalization'],\n                        medium: ['Some AI considerations', 'Testing AI-driven targeting', 'Partial personalization'],\n                        high: ['AI-centered strategy', 'Dynamic personalization', 'Predictive customer journey']\n                    }\n                }\n            }\n        }\n    }\n    // Helper methods for category and dimension handling\n    normalizeCategory(category) {\n        // Map various category names to standard categories\n        const categoryMap = {\n            'tech': 'technology',\n            'technology': 'technology',\n            'tools': 'technology',\n            'process': 'process',\n            'processes': 'process',\n            'workflow': 'process',\n            'people': 'people',\n            'team': 'people',\n            'skills': 'people',\n            'talent': 'people',\n            'strategy': 'strategy',\n            'plan': 'strategy',\n            'planning': 'strategy',\n            'content': 'content',\n            'analytics': 'analytics'\n        };\n        \n        return categoryMap[category.toLowerCase()] || 'technology';\n    }\n    \n    formatDimension(dimension) {\n        // Format dimension names for display\n        const dimensionLabels = {\n            'technology': 'Technology',\n            'process': 'Process',\n            'people': 'People',\n            'strategy': 'Strategy',\n            'content': 'Content',\n            'analytics': 'Analytics'\n        };\n        \n        return dimensionLabels[dimension.toLowerCase()] || dimension.charAt(0).toUpperCase() + dimension.slice(1);\n    }\n    \n    generateReport(scores, context) {\n        // Generate a complete report based on scores and context\n        try {\n            const overallScore = scores.overall || 0;\n            \n            // Executive summary section\n            const executive = {\n                headline: 'Your Assessment Results',\n                subheadline: 'Detailed analysis and recommendations below',\n                narrative: this.generateSummary(scores),\n                snapshot: this.generateSnapshot(scores, context),\n                keyMetrics: {\n                    roi: {\n                        value: `${Math.round(overallScore * 1.5)}%`,\n                        label: 'Potential ROI',\n                        interpretation: overallScore < 40 ? 'Significant room for improvement' : 'Strong foundation for growth'\n                    },\n                    efficiency: {\n                        value: `${Math.round(overallScore * 0.8)}%`,\n                        label: 'Operational Efficiency',\n                        interpretation: 'Based on your process maturity'\n                    },\n                    readiness: {\n                        value: overallScore < 30 ? 'Low' : overallScore < 60 ? 'Medium' : 'High',\n                        label: 'Marketing Readiness',\n                        interpretation: 'Your overall marketing maturity'\n                    }\n                }\n            };\n            \n            // Readiness section\n            const readiness = {\n                title: 'Marketing Readiness Assessment',\n                subtitle: 'How your marketing organization compares across key dimensions',\n                dimensions: this.generateDimensionCards(scores)\n            };\n            \n            // Create full report object\n            return {\n                title: 'Marketing Maturity Assessment',\n                summary: this.generateSummary(scores) || 'Thank you for completing the assessment.',\n                executive: executive,\n                readiness: readiness,\n                recommendations: this.generateRecommendations(scores, context),\n                nextSteps: {\n                    booking: {\n                        headline: 'Ready to Elevate Your Marketing?',\n                        subheadline: 'Schedule a consultation to get personalized insights',\n                        buttonText: 'Book Your Strategy Session'\n                    },\n                    urgency: {\n                        message: 'Limited spots available this month'\n                    },\n                    testimonial: {\n                        quote: 'The assessment identified exactly where we needed to focus. Six months later, our marketing ROI has doubled.',\n                        author: 'Marketing Director',\n                        role: 'SaaS Company',\n                        result: '107% increase in qualified leads'\n                    }\n                },\n                roadmap: this.generateRoadmap(scores),\n                valuation: this.generateValuationImpact(scores, context)\n            };\n        } catch (error) {\n            console.error('Error generating report:', error);\n            return this.generateDefaultReport();\n        }\n    }\n    \n    generateDefaultReport() {\n        // Generate a default report when scoring fails\n        return {\n            title: 'Marketing Maturity Assessment',\n            summary: 'Based on your responses, we have prepared an initial assessment of your marketing maturity.',\n            recommendations: [],\n            nextSteps: {\n                booking: {\n                    headline: 'Get a Complete Assessment',\n                    subheadline: 'Schedule a consultation to get personalized insights',\n                    buttonText: 'Book Your Strategy Session'\n                }\n            },\n            roadmap: {\n                phases: [\n                    {\n                        name: 'Foundation',\n                        duration: '1-3 months',\n                        focus: 'Establish core marketing processes',\n                        milestones: ['Marketing strategy', 'Basic analytics', 'Content planning']\n                    },\n                    {\n                        name: 'Growth',\n                        duration: '3-6 months',\n                        focus: 'Scale effective channels',\n                        milestones: ['Channel optimization', 'Automation', 'Lead scoring']\n                    }\n                ]\n            }\n        };\n    }\n    \n    generateSummary(scores) {\n        // Generate summary text based on overall score\n        if (!scores || typeof scores.overall !== 'number') {\n            return 'Thank you for completing the assessment.';\n        }\n        \n        if (scores.overall < 30) {\n            return 'Your marketing organization is in the early stages of development. There are significant opportunities to build a more effective marketing function.';\n        } else if (scores.overall < 60) {\n            return 'Your marketing organization has established some foundations but needs further development in key areas to become fully effective.';\n        } else if (scores.overall < 80) {\n            return 'Your marketing organization demonstrates good maturity with specific opportunities for optimization to reach excellence.';\n        } else {\n            return 'Your marketing organization shows high maturity across multiple dimensions. Focus on refinement and innovation to maintain your competitive edge.';\n        }\n    }\n    \n    generateRecommendations(scores, context) {\n        const recommendations = [];\n        \n        // Only proceed if we have valid scores\n        if (!scores || !scores.dimensions) return recommendations;\n        \n        // Generate recommendations for each dimension with low scores\n        Object.entries(scores.dimensions).forEach(([dimension, data]) => {\n            if (data.score < 50) {\n                switch (dimension) {\n                    case 'technology':\n                        recommendations.push({\n                            dimension: 'technology',\n                            title: 'Technology Stack Optimization',\n                            description: 'Your marketing technology score indicates room for improvement.',\n                            specificAction: 'Conduct a technology audit and identify critical gaps in your marketing stack.'\n                        });\n                        break;\n                    case 'process':\n                        recommendations.push({\n                            dimension: 'process',\n                            title: 'Process Standardization',\n                            description: 'Standardizing your marketing processes will improve efficiency and consistency.',\n                            specificAction: 'Document your core marketing workflows and identify bottlenecks.'\n                        });\n                        break;\n                    case 'people':\n                        recommendations.push({\n                            dimension: 'people',\n                            title: 'Talent Development',\n                            description: 'Investing in your marketing team capabilities will drive better results.',\n                            specificAction: 'Assess skill gaps and create a training plan for your marketing team.'\n                        });\n                        break;\n                    case 'strategy':\n                        recommendations.push({\n                            dimension: 'strategy',\n                            title: 'Strategic Planning',\n                            description: 'A more robust marketing strategy will align efforts and improve outcomes.',\n                            specificAction: 'Develop a comprehensive marketing strategy document with clear KPIs.'\n                        });\n                        break;\n                    default:\n                        recommendations.push({\n                            dimension: dimension,\n                            title: `${this.formatDimension(dimension)} Enhancement`,\n                            description: `Your ${this.formatDimension(dimension)} capabilities need strengthening.`,\n                            specificAction: `Evaluate your current ${dimension} approach and develop an improvement plan.`\n                        });\n                }\n            }\n        });\n        \n        // Add general recommendations if needed\n        if (recommendations.length === 0) {\n            recommendations.push({\n                dimension: 'general',\n                title: 'Continuous Improvement',\n                description: 'While your marketing maturity is strong, continuous improvement will maintain your advantage.',\n                specificAction: 'Establish quarterly marketing reviews to identify optimization opportunities.'\n            });\n        }\n        \n        return recommendations;\n    }\n    \n    generateRoadmap(scores) {\n        // Generate a roadmap based on scores\n        const phases = [\n            {\n                name: 'Foundation',\n                duration: '1-3 months',\n                focus: 'Establish core marketing capabilities',\n                milestones: [\n                    'Develop marketing strategy',\n                    'Implement basic analytics',\n                    'Standardize content production',\n                    'Set up CRM processes'\n                ]\n            },\n            {\n                name: 'Growth',\n                duration: '3-6 months',\n                focus: 'Scale effective channels and processes',\n                milestones: [\n                    'Optimize high-performing channels',\n                    'Implement marketing automation',\n                    'Develop lead scoring model',\n                    'Create customer journey maps'\n                ]\n            },\n            {\n                name: 'Optimization',\n                duration: '6-12 months',\n                focus: 'Refine performance and integration',\n                milestones: [\n                    'Advanced attribution modeling',\n                    'Cross-channel integration',\n                    'Personalization at scale',\n                    'ROI optimization'\n                ]\n            }\n        ];\n        \n        return { phases };\n    }\n    constructor(customScoring, assessmentType = 'agency-vulnerability') {\n        this.customScoring = customScoring;\n        this.assessmentType = assessmentType;\n        \n        // Get configuration for this assessment type\n        const config = ScoringEngine.assessmentTypes[this.assessmentType] || \n                      ScoringEngine.assessmentTypes['agency-vulnerability']; // Fallback\n        \n        // Set default weights based on assessment type\n        this.defaultWeights = config.defaultWeights || {\n            technology: 0.25,\n            process: 0.25,\n            people: 0.25,\n            strategy: 0.25\n        };\n        \n        this.dimensionConfig = config.dimensionConfig || {};\n        \n        // Allow custom scoring to override default weights\n        this.weights = this.customScoring?.weights || this.defaultWeights;\n    }\n\n    calculate(responses, context) {\n        console.log('Starting score calculation with responses:', Object.keys(responses).length);\n        console.log('Context for calculation:', context);\n        \n        try {\n            // Base scoring logic used by all assessments\n            let scores = this.calculateDimensionScores(responses);\n    \n            // Apply custom scoring if provided\n            if (this.customScoring?.calculate) {\n                try {\n                    const customScores = this.customScoring.calculate(scores, responses, context);\n                    if (customScores) scores = customScores;\n                } catch (error) {\n                    console.error('Error in custom scoring calculation:', error);\n                }\n            }\n    \n            // Apply context-based adjustments\n            scores = this.applyContextAdjustments(scores, context);\n    \n            // Calculate overall score\n            const overall = this.calculateOverallScore(scores);\n            \n            // Generate insights\n            const result = {\n                scores: {\n                    overall: overall,\n                    categories: scores\n                },\n                insights: this.generateInsights({ overall, dimensions: scores }, context),\n                report: this.generateReport({ overall, dimensions: scores }, context)\n            };\n            \n            console.log('Final calculation result:', result);\n            return result;\n        } catch (error) {\n            console.error('Error in score calculation:', error);\n            \n            // Return a fallback result to prevent UI errors\n            return {\n                scores: {\n                    overall: 50,\n                    categories: {\n                        technology: { score: 50 },\n                        process: { score: 50 },\n                        people: { score: 50 },\n                        strategy: { score: 50 }\n                    }\n                },\n                insights: [{\n                    type: 'warning',\n                    title: 'Score Calculation Issue',\n                    description: 'There was an issue calculating your detailed scores.'\n                }],\n                report: this.generateDefaultReport()\n            };\n        }\n    }\n\n    calculateDimensionScores(responses) {\n        // Default implementation for base dimension calculation\n        console.log('Calculating dimension scores with responses:', responses);\n        \n        // Extract question responses and organize them by category\n        const categories = {};\n        \n        // Initialize default categories with zero scores\n        const defaultCategories = ['technology', 'process', 'people', 'strategy'];\n        defaultCategories.forEach(cat => {\n            categories[cat] = { score: 0, count: 0, responses: [] };\n        });\n        \n        // Process each response\n        Object.entries(responses).forEach(([questionId, answer]) => {\n            // Skip non-numeric responses or special properties\n            if (typeof answer !== 'number' || questionId === 'selectedServices') return;\n            \n            // Determine category from question ID - default to 'technology' if unknown\n            // Format might be: tech_01, people_02, etc.\n            const category = questionId.split('_')[0] || 'technology';\n            const normalizedCategory = this.normalizeCategory(category);\n            \n            // If category not initialized, create it\n            if (!categories[normalizedCategory]) {\n                categories[normalizedCategory] = { score: 0, count: 0, responses: [] };\n            }\n            \n            // Add the score (assuming questions are scored 0-5)\n            categories[normalizedCategory].score += answer;\n            categories[normalizedCategory].count++;\n            categories[normalizedCategory].responses.push({ id: questionId, value: answer });\n        });\n        \n        // Calculate average scores for each category\n        const dimensionScores = {};\n        Object.entries(categories).forEach(([category, data]) => {\n            dimensionScores[category] = {\n                score: data.count > 0 ? Math.round((data.score / (data.count * 5)) * 100) : 0,\n                responses: data.responses\n            };\n        });\n        \n        console.log('Calculated dimension scores:', dimensionScores);\n        return dimensionScores;\n    }\n\n    calculateOverallScore(dimensionScores) {\n        // Default implementation for overall score calculation\n        console.log('Calculating overall score with dimension scores:', dimensionScores);\n        \n        let weightedSum = 0;\n        let totalWeight = 0;\n        \n        // Calculate weighted sum of dimension scores\n        Object.entries(dimensionScores).forEach(([dimension, data]) => {\n            const weight = this.weights[dimension] || 0.25; // Default equal weight if not specified\n            weightedSum += (data.score || 0) * weight;\n            totalWeight += weight;\n        });\n        \n        // Calculate overall score (rounded to nearest integer)\n        const overallScore = totalWeight > 0 ? Math.round(weightedSum / totalWeight) : 50;\n        \n        console.log('Calculated overall score:', overallScore);\n        return overallScore;\n    }\n\n    applyContextAdjustments(scores, context) {\n        // Apply size, industry, or other contextual adjustments\n        console.log('Applying context adjustments with context:', context);\n        \n        // If no context, return scores unchanged\n        if (!context) return scores;\n        \n        // Example: Adjust for company size\n        if (context.companySize) {\n            // Small companies might get a boost in technology score\n            if (context.companySize === 'small' && scores.technology) {\n                scores.technology.score = Math.min(100, scores.technology.score + 5);\n            }\n        }\n        \n        // Example: Adjust for selected services\n        if (context.selectedServices) {\n            const serviceCount = Object.keys(context.selectedServices).length;\n            // More focused companies (fewer services) might score higher in strategy\n            if (serviceCount <= 2 && scores.strategy) {\n                scores.strategy.score = Math.min(100, scores.strategy.score + 5);\n            }\n        }\n        \n        return scores;\n    }\n\n    generateInsights(scores, context) {\n        // Generate insights based on scores\n        const insights = [];\n        \n        // Only proceed if we have valid scores\n        if (!scores) return insights;\n        \n        // Generate overall insights\n        if (typeof scores.overall === 'number') {\n            if (scores.overall < 30) {\n                insights.push({\n                    type: 'critical',\n                    title: 'Significant Improvement Needed',\n                    description: 'Your marketing maturity score indicates substantial room for improvement across multiple dimensions.'\n                });\n            } else if (scores.overall < 60) {\n                insights.push({\n                    type: 'warning',\n                    title: 'Building Foundations',\n                    description: 'You have some marketing fundamentals in place, but there are key areas that need strengthening.'\n                });\n            } else if (scores.overall < 80) {\n                insights.push({\n                    type: 'positive',\n                    title: 'Solid Performance',\n                    description: 'Your marketing operations show good maturity with specific opportunities for optimization.'\n                });\n            } else {\n                insights.push({\n                    type: 'excellent',\n                    title: 'Marketing Excellence',\n                    description: 'Your marketing organization demonstrates high levels of maturity and effectiveness.'\n                });\n            }\n        }\n        \n        // Generate dimension-specific insights\n        Object.entries(scores.dimensions || {}).forEach(([dimension, data]) => {\n            if (typeof data.score === 'number' && data.score < 50) {\n                insights.push({\n                    type: 'opportunity',\n                    dimension: dimension,\n                    title: `${this.formatDimension(dimension)} Opportunity`,\n                    description: `Your ${this.formatDimension(dimension)} score suggests this is a high-priority area for improvement.`\n                });\n            }\n        });\n        \n        return insights;\n    }\n}\n\nexport default ScoringEngine;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}