{"ast":null,"code":"var _jsxFileName = \"/Users/jon/Documents/GitHub/assessor/src/core/components/DynamicQuestions.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAssessment } from '../hooks/useAssessment';\nimport { QuestionCard } from './QuestionCard';\nimport { ProgressBar } from './ProgressBar';\nimport styles from '../styles/components.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DynamicQuestions = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    type\n  } = useParams();\n  const {\n    saveResponse,\n    getResponse,\n    assessmentData,\n    updateAssessmentData,\n    saveProgress,\n    progress: assessmentProgress\n  } = useAssessment();\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const loadQuestions = async () => {\n      try {\n        var _assessmentData$servi;\n        setLoading(true);\n        // Load questions based on assessment type\n        const module = await import(`../../assessments/${type}/questions.json`);\n        const data = module.default || module;\n\n        // Flatten the coreQuestions object into an array\n        const coreQuestions = Object.values(data.coreQuestions || {}).flat();\n\n        // If we have selected services, load service-specific questions\n        let serviceQuestions = [];\n        if ((assessmentData === null || assessmentData === void 0 ? void 0 : (_assessmentData$servi = assessmentData.services) === null || _assessmentData$servi === void 0 ? void 0 : _assessmentData$servi.length) > 0) {\n          try {\n            const serviceModule = await import(`../../assessments/${type}/service-questions.json`);\n            const serviceData = serviceModule.default || serviceModule;\n\n            // Filter questions based on selected services\n            assessmentData.services.forEach(serviceId => {\n              if (serviceData[serviceId]) {\n                serviceQuestions = [...serviceQuestions, ...serviceData[serviceId]];\n              }\n            });\n          } catch (err) {\n            console.error('Error loading service questions:', err);\n          }\n        }\n\n        // Combine all question types\n        const allQuestions = [...coreQuestions, ...serviceQuestions];\n        setQuestions(allQuestions);\n      } catch (error) {\n        console.error('Failed to load questions:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadQuestions();\n  }, [type, assessmentData === null || assessmentData === void 0 ? void 0 : assessmentData.services]);\n  const currentQuestion = questions[currentQuestionIndex];\n  const isLastQuestion = currentQuestionIndex === questions.length - 1;\n  const handleAnswer = (value, option) => {\n    if (currentQuestion) {\n      saveResponse(currentQuestion.id, value);\n    }\n  };\n  const handleNext = async () => {\n    if (isLastQuestion) {\n      // Save progress before moving to email gate\n      await saveProgress('questions');\n      navigate(`/assessment/${type}/email`);\n    } else {\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  };\n  const handlePrevious = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    } else {\n      navigate(`/assessment/${type}/services`);\n    }\n  };\n  const handleSkip = () => {\n    handleNext();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading questions...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 16\n    }, this);\n  }\n  if (!currentQuestion) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"No questions available\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 16\n    }, this);\n  }\n  const selectedValue = getResponse(currentQuestion.id);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.screen,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.logo,\n        children: [\"obsolete\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \".\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 54\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n        progress: assessmentProgress || 65,\n        label: \"Step 5 of 7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(QuestionCard, {\n      question: currentQuestion,\n      questionNumber: currentQuestionIndex + 1,\n      totalQuestions: questions.length,\n      selectedValue: selectedValue,\n      onSelect: handleAnswer,\n      insight: currentQuestion.insight,\n      benchmark: currentQuestion.benchmark\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.navigation,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.navButton,\n        onClick: handlePrevious,\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${styles.navButton} ${styles.skip}`,\n        onClick: handleSkip,\n        children: \"Skip\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${styles.navButton} ${styles.primary}`,\n        disabled: !selectedValue,\n        onClick: handleNext,\n        children: isLastQuestion ? 'Complete' : 'Continue'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n};\n_s(DynamicQuestions, \"p6jvaNcrs6Sz5Gsl64qMxPAI47M=\", false, function () {\n  return [useNavigate, useParams, useAssessment];\n});\n_c = DynamicQuestions;\nexport default DynamicQuestions;\nvar _c;\n$RefreshReg$(_c, \"DynamicQuestions\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","useAssessment","QuestionCard","ProgressBar","styles","jsxDEV","_jsxDEV","DynamicQuestions","_s","navigate","type","saveResponse","getResponse","assessmentData","updateAssessmentData","saveProgress","progress","assessmentProgress","questions","setQuestions","currentQuestionIndex","setCurrentQuestionIndex","loading","setLoading","loadQuestions","_assessmentData$servi","module","data","default","coreQuestions","Object","values","flat","serviceQuestions","services","length","serviceModule","serviceData","forEach","serviceId","err","console","error","allQuestions","currentQuestion","isLastQuestion","handleAnswer","value","option","id","handleNext","prev","handlePrevious","handleSkip","children","fileName","_jsxFileName","lineNumber","columnNumber","selectedValue","className","screen","header","logo","label","question","questionNumber","totalQuestions","onSelect","insight","benchmark","navigation","navButton","onClick","skip","primary","disabled","_c","$RefreshReg$"],"sources":["/Users/jon/Documents/GitHub/assessor/src/core/components/DynamicQuestions.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAssessment } from '../hooks/useAssessment';\nimport { QuestionCard } from './QuestionCard';\nimport { ProgressBar } from './ProgressBar';\nimport styles from '../styles/components.module.css';\n\nconst DynamicQuestions = () => {\n    const navigate = useNavigate();\n    const { type } = useParams();\n    const { \n        saveResponse, \n        getResponse, \n        assessmentData,\n        updateAssessmentData,\n        saveProgress,\n        progress: assessmentProgress \n    } = useAssessment();\n    const [questions, setQuestions] = useState([]);\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const loadQuestions = async () => {\n            try {\n                setLoading(true);\n                // Load questions based on assessment type\n                const module = await import(`../../assessments/${type}/questions.json`);\n                const data = module.default || module;\n                \n                // Flatten the coreQuestions object into an array\n                const coreQuestions = Object.values(data.coreQuestions || {}).flat();\n                \n                // If we have selected services, load service-specific questions\n                let serviceQuestions = [];\n                if (assessmentData?.services?.length > 0) {\n                    try {\n                        const serviceModule = await import(`../../assessments/${type}/service-questions.json`);\n                        const serviceData = serviceModule.default || serviceModule;\n                        \n                        // Filter questions based on selected services\n                        assessmentData.services.forEach(serviceId => {\n                            if (serviceData[serviceId]) {\n                                serviceQuestions = [...serviceQuestions, ...serviceData[serviceId]];\n                            }\n                        });\n                    } catch (err) {\n                        console.error('Error loading service questions:', err);\n                    }\n                }\n                \n                // Combine all question types\n                const allQuestions = [\n                    ...coreQuestions,\n                    ...serviceQuestions\n                ];\n                \n                setQuestions(allQuestions);\n            } catch (error) {\n                console.error('Failed to load questions:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadQuestions();\n    }, [type, assessmentData?.services]);\n\n    const currentQuestion = questions[currentQuestionIndex];\n    const isLastQuestion = currentQuestionIndex === questions.length - 1;\n\n    const handleAnswer = (value, option) => {\n        if (currentQuestion) {\n            saveResponse(currentQuestion.id, value);\n        }\n    };\n\n    const handleNext = async () => {\n        if (isLastQuestion) {\n            // Save progress before moving to email gate\n            await saveProgress('questions');\n            navigate(`/assessment/${type}/email`);\n        } else {\n            setCurrentQuestionIndex(prev => prev + 1);\n        }\n    };\n\n    const handlePrevious = () => {\n        if (currentQuestionIndex > 0) {\n            setCurrentQuestionIndex(prev => prev - 1);\n        } else {\n            navigate(`/assessment/${type}/services`);\n        }\n    };\n\n    const handleSkip = () => {\n        handleNext();\n    };\n\n    if (loading) {\n        return <div>Loading questions...</div>;\n    }\n\n    if (!currentQuestion) {\n        return <div>No questions available</div>;\n    }\n\n    const selectedValue = getResponse(currentQuestion.id);\n\n    return (\n        <div className={styles.screen}>\n            <div className={styles.header}>\n                <div className={styles.logo}>obsolete<span>.</span></div>\n                <ProgressBar progress={assessmentProgress || 65} label=\"Step 5 of 7\" />\n            </div>\n            \n            <QuestionCard\n                question={currentQuestion}\n                questionNumber={currentQuestionIndex + 1}\n                totalQuestions={questions.length}\n                selectedValue={selectedValue}\n                onSelect={handleAnswer}\n                insight={currentQuestion.insight}\n                benchmark={currentQuestion.benchmark}\n            />\n            \n            <div className={styles.navigation}>\n                <button className={styles.navButton} onClick={handlePrevious}>\n                    ← Back\n                </button>\n                <button className={`${styles.navButton} ${styles.skip}`} onClick={handleSkip}>\n                    Skip\n                </button>\n                <button \n                    className={`${styles.navButton} ${styles.primary}`}\n                    disabled={!selectedValue}\n                    onClick={handleNext}\n                >\n                    {isLastQuestion ? 'Complete' : 'Continue'}\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default DynamicQuestions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}