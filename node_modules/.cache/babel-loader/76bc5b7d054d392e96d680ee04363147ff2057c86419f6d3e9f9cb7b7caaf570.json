{"ast":null,"code":"export class ScoringEngine {\n  // Helper methods for category and dimension handling\n  normalizeCategory(category) {\n    // Map various category names to standard categories\n    const categoryMap = {\n      'tech': 'technology',\n      'technology': 'technology',\n      'tools': 'technology',\n      'process': 'process',\n      'processes': 'process',\n      'workflow': 'process',\n      'people': 'people',\n      'team': 'people',\n      'skills': 'people',\n      'talent': 'people',\n      'strategy': 'strategy',\n      'plan': 'strategy',\n      'planning': 'strategy',\n      'content': 'content',\n      'analytics': 'analytics'\n    };\n    return categoryMap[category.toLowerCase()] || 'technology';\n  }\n  formatDimension(dimension) {\n    // Format dimension names for display\n    const dimensionLabels = {\n      'technology': 'Technology',\n      'process': 'Process',\n      'people': 'People',\n      'strategy': 'Strategy',\n      'content': 'Content',\n      'analytics': 'Analytics'\n    };\n    return dimensionLabels[dimension.toLowerCase()] || dimension.charAt(0).toUpperCase() + dimension.slice(1);\n  }\n  generateReport(scores, context) {\n    // Generate a complete report based on scores and context and assessment type\n    try {\n      const overallScore = scores.overall || 0;\n\n      // Get assessment-specific configurations and titles\n      const reportConfig = {\n        'agency-vulnerability': {\n          title: 'Agency AI Vulnerability Assessment',\n          readinessTitle: 'Agency AI Readiness Assessment',\n          readinessSubtitle: 'How your agency compares across key dimensions',\n          bookingHeadline: 'Ready to Future-Proof Your Agency?',\n          bookingSubheadline: 'Schedule a consultation to get personalized insights',\n          testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our agency has doubled client retention.',\n          testimonialAuthor: 'Creative Director',\n          testimonialCompany: 'Mid-Size Agency'\n        },\n        'inhouse-marketing': {\n          title: 'Marketing AI Maturity Assessment',\n          readinessTitle: 'Marketing AI Readiness Assessment',\n          readinessSubtitle: 'How your marketing organization compares across key dimensions',\n          bookingHeadline: 'Ready to Elevate Your Marketing?',\n          bookingSubheadline: 'Schedule a consultation to get personalized insights',\n          testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our marketing ROI has doubled.',\n          testimonialAuthor: 'Marketing Director',\n          testimonialCompany: 'B2B Software Company'\n        }\n      };\n\n      // Get configuration for this assessment type (with fallback)\n      const config = reportConfig[this.assessmentType] || reportConfig['agency-vulnerability'];\n\n      // Executive summary section\n      const executive = {\n        headline: 'Your Assessment Results',\n        subheadline: 'Detailed analysis and recommendations below',\n        narrative: this.generateSummary(scores),\n        snapshot: this.generateSnapshot(scores, context),\n        keyMetrics: {\n          roi: {\n            value: `${Math.round(overallScore * 1.5)}%`,\n            label: this.assessmentType === 'agency-vulnerability' ? 'Potential Revenue Impact' : 'Potential ROI',\n            interpretation: overallScore < 40 ? 'Significant room for improvement' : 'Strong foundation for growth'\n          },\n          efficiency: {\n            value: `${Math.round(overallScore * 0.8)}%`,\n            label: 'Operational Efficiency',\n            interpretation: 'Based on your process maturity'\n          },\n          readiness: {\n            value: overallScore < 30 ? 'Low' : overallScore < 60 ? 'Medium' : 'High',\n            label: 'AI Readiness',\n            interpretation: this.assessmentType === 'agency-vulnerability' ? 'Your overall agency AI readiness' : 'Your overall marketing AI maturity'\n          }\n        }\n      };\n\n      // Readiness section\n      const readiness = {\n        title: config.readinessTitle,\n        subtitle: config.readinessSubtitle,\n        dimensions: this.generateDimensionCards(scores)\n      };\n\n      // Create full report object based on assessment type\n      return {\n        title: config.title,\n        summary: this.generateSummary(scores) || 'Thank you for completing the assessment.',\n        executive: executive,\n        readiness: readiness,\n        recommendations: this.generateRecommendations(scores, context),\n        nextSteps: {\n          booking: {\n            headline: config.bookingHeadline,\n            subheadline: config.bookingSubheadline,\n            buttonText: 'Book Your Strategy Session'\n          },\n          urgency: {\n            message: 'Limited spots available this month'\n          },\n          testimonial: {\n            quote: config.testimonialQuote,\n            author: config.testimonialAuthor,\n            company: config.testimonialCompany\n          }\n        },\n        roadmap: this.generateRoadmap(scores),\n        valuation: this.generateValuationImpact(scores, context)\n      };\n    } catch (error) {\n      console.error('Error generating report:', error);\n      // Return default report if error occurs\n      return this.generateDefaultReport();\n    }\n  }\n  generateDefaultReport() {\n    // Generate a default report when scoring fails\n    return {\n      title: 'Marketing Maturity Assessment',\n      summary: 'Based on your responses, we have prepared an initial assessment of your marketing maturity.',\n      recommendations: [],\n      nextSteps: {\n        booking: {\n          headline: 'Get a Complete Assessment',\n          subheadline: 'Schedule a consultation to get personalized insights',\n          buttonText: 'Book Your Strategy Session'\n        }\n      },\n      roadmap: {\n        phases: [{\n          name: 'Foundation',\n          duration: '1-3 months',\n          focus: 'Establish core marketing processes',\n          milestones: ['Marketing strategy', 'Basic analytics', 'Content planning']\n        }, {\n          name: 'Growth',\n          duration: '3-6 months',\n          focus: 'Scale effective channels',\n          milestones: ['Channel optimization', 'Automation', 'Lead scoring']\n        }]\n      }\n    };\n  }\n  generateSummary(scores) {\n    // Generate summary text based on overall score and assessment type\n    if (!scores || typeof scores.overall !== 'number') {\n      return 'Thank you for completing the assessment.';\n    }\n\n    // Define assessment-type specific summaries\n    const summariesByType = {\n      'agency-vulnerability': {\n        low: 'Your agency is in the early stages of AI readiness. There are significant vulnerabilities that could impact your competitive position as AI transforms the marketing landscape.',\n        medium: 'Your agency has established some AI foundations but needs further development in key areas to effectively compete as AI reshapes client expectations.',\n        high: 'Your agency demonstrates good AI readiness with specific opportunities to strengthen your position as AI continues to transform the industry.',\n        excellent: 'Your agency shows high AI maturity across multiple dimensions. Continue innovating to maintain your competitive edge as AI evolves.'\n      },\n      'inhouse-marketing': {\n        low: 'Your marketing team is in the early stages of AI adoption. There are significant opportunities to improve effectiveness through AI integration.',\n        medium: 'Your marketing organization has established some AI foundations but needs further development to fully leverage AI capabilities.',\n        high: 'Your marketing team demonstrates good AI maturity with specific opportunities for optimization to achieve marketing excellence.',\n        excellent: 'Your marketing organization shows high AI maturity across multiple dimensions. Focus on refinement and innovation to maintain your competitive edge.'\n      }\n    };\n\n    // Get the right summary set based on assessment type\n    const summaries = summariesByType[this.assessmentType] || summariesByType['agency-vulnerability'];\n\n    // Return the appropriate summary based on the score\n    if (scores.overall < 30) {\n      return summaries.low;\n    } else if (scores.overall < 60) {\n      return summaries.medium;\n    } else if (scores.overall < 80) {\n      return summaries.high;\n    } else {\n      return summaries.excellent;\n    }\n  }\n  generateRecommendations(scores, context) {\n    const recommendations = [];\n\n    // Only proceed if we have valid scores\n    if (!scores || !scores.dimensions) return recommendations;\n\n    // Define assessment-type specific recommendations\n    const recommendationsByType = {\n      'agency-vulnerability': {\n        technology: {\n          title: 'Agency Technology Modernization',\n          description: 'Your agency technology score indicates vulnerability to AI disruption.',\n          specificAction: 'Conduct an AI readiness audit to identify tools that can augment your team capabilities.'\n        },\n        process: {\n          title: 'AI-Ready Process Development',\n          description: 'Integrating AI into your agency workflows will improve efficiency and client deliverables.',\n          specificAction: 'Document your creative and production processes to identify AI integration opportunities.'\n        },\n        people: {\n          title: 'AI Talent Development',\n          description: 'Building AI fluency in your agency team will be critical to remain competitive.',\n          specificAction: 'Identify AI champions and create a skills development plan for your agency team.'\n        },\n        strategy: {\n          title: 'AI Positioning Strategy',\n          description: 'A clear AI strategy will help your agency differentiate and retain clients.',\n          specificAction: 'Develop an AI capabilities roadmap that you can share with clients and prospects.'\n        },\n        general: {\n          title: 'Agency AI Readiness',\n          description: 'While your agency is ahead on AI adoption, continuous innovation will maintain your advantage.',\n          specificAction: 'Establish an AI innovation process to continuously evaluate and integrate new capabilities.'\n        }\n      },\n      'inhouse-marketing': {\n        technology: {\n          title: 'Marketing AI Technology Integration',\n          description: 'Your marketing technology score indicates opportunities to leverage AI tools.',\n          specificAction: 'Evaluate AI-powered marketing tools that can augment your existing technology stack.'\n        },\n        process: {\n          title: 'Marketing Workflow Optimization',\n          description: 'Integrating AI into your marketing processes will improve efficiency and results.',\n          specificAction: 'Map your content and campaign workflows to identify AI automation opportunities.'\n        },\n        people: {\n          title: 'Marketing AI Capability Building',\n          description: 'Developing AI skills in your marketing team will drive better performance.',\n          specificAction: 'Create an AI training program focused on practical marketing applications.'\n        },\n        strategy: {\n          title: 'AI-Powered Marketing Strategy',\n          description: 'Incorporating AI into your marketing strategy will improve targeting and personalization.',\n          specificAction: 'Develop an AI-enhanced customer journey that leverages predictive analytics.'\n        },\n        general: {\n          title: 'Marketing AI Excellence',\n          description: 'While your marketing AI maturity is strong, continuous improvement will maintain your advantage.',\n          specificAction: 'Establish quarterly AI marketing reviews to identify new optimization opportunities.'\n        }\n      }\n    };\n\n    // Get recommendations for the current assessment type (with fallback)\n    const typeRecommendations = recommendationsByType[this.assessmentType] || recommendationsByType['agency-vulnerability'];\n\n    // Generate recommendations for each dimension with low scores\n    Object.entries(scores.dimensions).forEach(([dimension, data]) => {\n      if (data.score < 50) {\n        const rec = typeRecommendations[dimension] || {\n          title: `${this.formatDimension(dimension)} Enhancement`,\n          description: `Your ${this.formatDimension(dimension)} capabilities need strengthening.`,\n          specificAction: `Evaluate your current ${dimension} approach and develop an improvement plan.`\n        };\n        recommendations.push({\n          dimension: dimension,\n          title: rec.title,\n          description: rec.description,\n          specificAction: rec.specificAction\n        });\n      }\n    });\n\n    // Add general recommendations if needed\n    if (recommendations.length === 0) {\n      const generalRec = typeRecommendations.general || {\n        title: 'Continuous Improvement',\n        description: 'While your scores are strong, continuous improvement will maintain your advantage.',\n        specificAction: 'Establish quarterly reviews to identify optimization opportunities.'\n      };\n      recommendations.push({\n        dimension: 'general',\n        title: generalRec.title,\n        description: generalRec.description,\n        specificAction: generalRec.specificAction\n      });\n    }\n    return recommendations;\n  }\n  generateRoadmap(scores) {\n    // Generate a roadmap based on scores and assessment type\n\n    // Define assessment-type specific roadmaps\n    const roadmapsByType = {\n      'agency-vulnerability': [{\n        name: 'AI Foundation',\n        duration: '1-3 months',\n        focus: 'Establish core AI capabilities for your agency',\n        milestones: ['Conduct AI skills assessment', 'Implement basic AI tools', 'Train team on AI prompt engineering', 'Develop AI value proposition']\n      }, {\n        name: 'Client Integration',\n        duration: '3-6 months',\n        focus: 'Integrate AI into client deliverables',\n        milestones: ['Develop AI-enhanced service offerings', 'Implement AI workflows for client work', 'Create AI case studies', 'Build AI showcases for prospects']\n      }, {\n        name: 'AI Leadership',\n        duration: '6-12 months',\n        focus: 'Position your agency as an AI leader',\n        milestones: ['Develop proprietary AI methodologies', 'Advanced AI-enhanced deliverables', 'AI-driven performance optimization', 'AI thought leadership content']\n      }],\n      'inhouse-marketing': [{\n        name: 'AI Foundation',\n        duration: '1-3 months',\n        focus: 'Establish core AI marketing capabilities',\n        milestones: ['Implement basic AI marketing tools', 'Train team on AI fundamentals', 'Develop AI-enhanced content strategy', 'Set up AI analytics tracking']\n      }, {\n        name: 'AI Growth',\n        duration: '3-6 months',\n        focus: 'Scale AI-powered marketing programs',\n        milestones: ['Implement AI personalization', 'Develop AI-driven customer journeys', 'Create AI content production system', 'Build AI-powered lead scoring']\n      }, {\n        name: 'AI Optimization',\n        duration: '6-12 months',\n        focus: 'Refine and optimize AI marketing systems',\n        milestones: ['Implement AI attribution modeling', 'Advanced AI automation workflows', 'Predictive AI analytics implementation', 'AI-driven budget optimization']\n      }]\n    };\n\n    // Return the appropriate roadmap based on assessment type\n    return {\n      phases: roadmapsByType[this.assessmentType] || roadmapsByType['agency-vulnerability']\n    };\n  }\n  generateDimensionCards(scores) {\n    // Generate detailed dimension cards for the readiness section\n    const dimensionCards = [];\n    const dimensionData = scores.dimensions || {};\n\n    // Get assessment-specific dimension configuration\n    const assessmentConfig = ScoringEngine.assessmentTypes[this.assessmentType] || ScoringEngine.assessmentTypes['agency-vulnerability'];\n\n    // Generate card for each dimension\n    Object.entries(dimensionData).forEach(([dimension, data]) => {\n      const score = data.score || 0;\n      const level = score < 40 ? 'low' : score < 70 ? 'medium' : 'high';\n\n      // Use assessment-specific dimension config if available, otherwise use default\n      const dimensionConfig = assessmentConfig.dimensionConfig || {};\n      const info = dimensionConfig[dimension] || {\n        icon: '游댌',\n        description: `Your ${this.formatDimension(dimension)} capabilities`,\n        insights: {\n          low: ['Needs significant improvement'],\n          medium: ['Moderate capabilities'],\n          high: ['Strong capabilities']\n        }\n      };\n      dimensionCards.push({\n        name: this.formatDimension(dimension),\n        icon: info.icon,\n        score: score,\n        description: info.description,\n        insights: info.insights[level] || []\n      });\n    });\n\n    // Sort by score (descending)\n    dimensionCards.sort((a, b) => b.score - a.score);\n    return dimensionCards;\n  }\n  generateValuationImpact(scores, context) {\n    // Generate valuation impact data based on assessment type and scores\n\n    // Define assessment-type specific valuation impacts\n    const valuationByType = {\n      'agency-vulnerability': {\n        title: 'Agency Valuation Impact',\n        subtitle: 'How AI readiness affects your agency value',\n        baseline: {\n          label: 'Current Estimated Multiple',\n          value: '2-3x EBITDA'\n        },\n        potential: {\n          label: 'AI-Ready Potential Multiple',\n          value: '4-6x EBITDA'\n        },\n        factors: ['AI-enhanced service offerings command premium pricing', 'AI efficiency improvements increase profit margins', 'AI capabilities attract higher-value clients', 'AI-ready agencies see higher acquisition interest'],\n        note: 'Agency valuations with strong AI capabilities are seeing significant premiums in the current market.'\n      },\n      'inhouse-marketing': {\n        title: 'Marketing ROI Impact',\n        subtitle: 'How AI maturity affects your marketing returns',\n        baseline: {\n          label: 'Current Marketing ROI',\n          value: '2-3x Investment'\n        },\n        potential: {\n          label: 'AI-Enhanced ROI Potential',\n          value: '4-5x Investment'\n        },\n        factors: ['AI-powered campaign optimization improves performance', 'AI content creation reduces production costs', 'AI analytics identifies highest-value opportunities', 'AI personalization increases conversion rates'],\n        note: 'Organizations with advanced AI marketing capabilities report 30-40% higher marketing ROI on average.'\n      }\n    };\n\n    // Return the appropriate valuation impact based on assessment type\n    return valuationByType[this.assessmentType] || valuationByType['agency-vulnerability'];\n  }\n  constructor(customScoring, assessmentType = 'agency-vulnerability') {\n    var _this$customScoring;\n    this.customScoring = customScoring;\n    this.assessmentType = assessmentType;\n\n    // Get configuration for this assessment type\n    const config = ScoringEngine.assessmentTypes[this.assessmentType] || ScoringEngine.assessmentTypes['agency-vulnerability']; // Fallback\n\n    // Set default weights based on assessment type\n    this.defaultWeights = config.defaultWeights || {\n      technology: 0.25,\n      process: 0.25,\n      people: 0.25,\n      strategy: 0.25\n    };\n    this.dimensionConfig = config.dimensionConfig || {};\n\n    // Allow custom scoring to override default weights\n    this.weights = ((_this$customScoring = this.customScoring) === null || _this$customScoring === void 0 ? void 0 : _this$customScoring.weights) || this.defaultWeights;\n  }\n  calculate(responses, context) {\n    console.log('Starting score calculation with responses:', Object.keys(responses).length);\n    console.log('Context for calculation:', context);\n    try {\n      var _this$customScoring2;\n      // Base scoring logic used by all assessments\n      let scores = this.calculateDimensionScores(responses);\n\n      // Apply custom scoring if provided\n      if ((_this$customScoring2 = this.customScoring) !== null && _this$customScoring2 !== void 0 && _this$customScoring2.calculate) {\n        try {\n          const customScores = this.customScoring.calculate(scores, responses, context);\n          if (customScores) scores = customScores;\n        } catch (error) {\n          console.error('Error in custom scoring calculation:', error);\n        }\n      }\n\n      // Apply context-based adjustments\n      scores = this.applyContextAdjustments(scores, context);\n\n      // Calculate overall score\n      const overall = this.calculateOverallScore(scores);\n\n      // Generate insights\n      const result = {\n        scores: {\n          overall: overall,\n          categories: scores\n        },\n        insights: this.generateInsights({\n          overall,\n          dimensions: scores\n        }, context),\n        report: this.generateReport({\n          overall,\n          dimensions: scores\n        }, context)\n      };\n      console.log('Final calculation result:', result);\n      return result;\n    } catch (error) {\n      console.error('Error in score calculation:', error);\n\n      // Return a fallback result to prevent UI errors\n      return {\n        scores: {\n          overall: 50,\n          categories: {\n            technology: {\n              score: 50\n            },\n            process: {\n              score: 50\n            },\n            people: {\n              score: 50\n            },\n            strategy: {\n              score: 50\n            }\n          }\n        },\n        insights: [{\n          type: 'warning',\n          title: 'Score Calculation Issue',\n          description: 'There was an issue calculating your detailed scores.'\n        }],\n        report: this.generateDefaultReport()\n      };\n    }\n  }\n  calculateDimensionScores(responses) {\n    // Default implementation for base dimension calculation\n    console.log('Calculating dimension scores with responses:', responses);\n\n    // Extract question responses and organize them by category\n    const categories = {};\n\n    // Initialize default categories with zero scores\n    const defaultCategories = ['technology', 'process', 'people', 'strategy'];\n    defaultCategories.forEach(cat => {\n      categories[cat] = {\n        score: 0,\n        count: 0,\n        responses: []\n      };\n    });\n\n    // Process each response\n    Object.entries(responses).forEach(([questionId, answer]) => {\n      // Skip non-numeric responses or special properties\n      if (typeof answer !== 'number' || questionId === 'selectedServices') return;\n\n      // Determine category from question ID - default to 'technology' if unknown\n      // Format might be: tech_01, people_02, etc.\n      const category = questionId.split('_')[0] || 'technology';\n      const normalizedCategory = this.normalizeCategory(category);\n\n      // If category not initialized, create it\n      if (!categories[normalizedCategory]) {\n        categories[normalizedCategory] = {\n          score: 0,\n          count: 0,\n          responses: []\n        };\n      }\n\n      // Add the score (assuming questions are scored 0-5)\n      categories[normalizedCategory].score += answer;\n      categories[normalizedCategory].count++;\n      categories[normalizedCategory].responses.push({\n        id: questionId,\n        value: answer\n      });\n    });\n\n    // Calculate average scores for each category\n    const dimensionScores = {};\n    Object.entries(categories).forEach(([category, data]) => {\n      dimensionScores[category] = {\n        score: data.count > 0 ? Math.round(data.score / (data.count * 5) * 100) : 0,\n        responses: data.responses\n      };\n    });\n    console.log('Calculated dimension scores:', dimensionScores);\n    return dimensionScores;\n  }\n  calculateOverallScore(dimensionScores) {\n    // Default implementation for overall score calculation\n    console.log('Calculating overall score with dimension scores:', dimensionScores);\n    let weightedSum = 0;\n    let totalWeight = 0;\n\n    // Calculate weighted sum of dimension scores\n    Object.entries(dimensionScores).forEach(([dimension, data]) => {\n      const weight = this.weights[dimension] || 0.25; // Default equal weight if not specified\n      weightedSum += (data.score || 0) * weight;\n      totalWeight += weight;\n    });\n\n    // Calculate overall score (rounded to nearest integer)\n    const overallScore = totalWeight > 0 ? Math.round(weightedSum / totalWeight) : 50;\n    console.log('Calculated overall score:', overallScore);\n    return overallScore;\n  }\n  applyContextAdjustments(scores, context) {\n    // Apply size, industry, or other contextual adjustments\n    console.log('Applying context adjustments with context:', context);\n\n    // If no context, return scores unchanged\n    if (!context) return scores;\n\n    // Example: Adjust for company size\n    if (context.companySize) {\n      // Small companies might get a boost in technology score\n      if (context.companySize === 'small' && scores.technology) {\n        scores.technology.score = Math.min(100, scores.technology.score + 5);\n      }\n    }\n\n    // Example: Adjust for selected services\n    if (context.selectedServices) {\n      const serviceCount = Object.keys(context.selectedServices).length;\n      // More focused companies (fewer services) might score higher in strategy\n      if (serviceCount <= 2 && scores.strategy) {\n        scores.strategy.score = Math.min(100, scores.strategy.score + 5);\n      }\n    }\n    return scores;\n  }\n  generateInsights(scores, context) {\n    // Generate insights based on scores and assessment type\n    const insights = [];\n\n    // Only proceed if we have valid scores\n    if (!scores) return insights;\n\n    // Define assessment-type specific insights\n    const insightsByType = {\n      'agency-vulnerability': {\n        overallInsights: {\n          critical: {\n            title: 'Agency AI Vulnerability Alert',\n            description: 'Your agency shows significant vulnerability to AI disruption. Immediate action is needed to adapt your business model.'\n          },\n          warning: {\n            title: 'Agency AI Adaptation Needed',\n            description: 'Your agency has some AI capabilities in place, but several key areas require strengthening to remain competitive.'\n          },\n          positive: {\n            title: 'Agency AI Readiness',\n            description: 'Your agency shows good AI readiness with specific opportunities to further enhance your competitive position.'\n          },\n          excellent: {\n            title: 'Agency AI Leadership',\n            description: 'Your agency demonstrates excellent AI capabilities, positioning you ahead of most competitors in your space.'\n          }\n        },\n        dimensionInsights: {\n          technology: 'Your agency\\'s technology score indicates vulnerability to agencies with more advanced AI capabilities.',\n          process: 'Your agency\\'s processes need modernization to incorporate AI efficiently into client work.',\n          people: 'Your team may lack critical AI skills needed to compete with AI-enabled agencies.',\n          strategy: 'Your agency\\'s positioning around AI needs strengthening to retain and attract clients.'\n        }\n      },\n      'inhouse-marketing': {\n        overallInsights: {\n          critical: {\n            title: 'Marketing AI Transformation Needed',\n            description: 'Your marketing team shows low AI maturity. Significant transformation is needed to maintain effectiveness.'\n          },\n          warning: {\n            title: 'Building Marketing AI Foundations',\n            description: 'You have some marketing AI fundamentals in place, but several key areas require development.'\n          },\n          positive: {\n            title: 'Solid Marketing AI Performance',\n            description: 'Your marketing operations show good AI maturity with specific opportunities for optimization.'\n          },\n          excellent: {\n            title: 'Marketing AI Excellence',\n            description: 'Your marketing organization demonstrates high levels of AI maturity and effectiveness.'\n          }\n        },\n        dimensionInsights: {\n          technology: 'Your marketing technology stack has significant gaps in AI-powered capabilities.',\n          process: 'Your marketing processes could benefit from AI automation and optimization.',\n          people: 'Your marketing team may need upskilling to effectively leverage AI tools.',\n          strategy: 'Your marketing strategy needs to incorporate AI-driven targeting and personalization.'\n        }\n      }\n    };\n\n    // Get insights for the current assessment type (with fallback)\n    const typeInsights = insightsByType[this.assessmentType] || insightsByType['agency-vulnerability'];\n\n    // Generate overall insights based on assessment type\n    if (typeof scores.overall === 'number') {\n      let insightLevel;\n      if (scores.overall < 30) {\n        insightLevel = 'critical';\n      } else if (scores.overall < 60) {\n        insightLevel = 'warning';\n      } else if (scores.overall < 80) {\n        insightLevel = 'positive';\n      } else {\n        insightLevel = 'excellent';\n      }\n      const overallInsight = typeInsights.overallInsights[insightLevel] || {\n        title: 'Assessment Results',\n        description: 'Your assessment results indicate opportunities for improvement.'\n      };\n      insights.push({\n        type: insightLevel,\n        title: overallInsight.title,\n        description: overallInsight.description\n      });\n    }\n\n    // Generate dimension-specific insights based on assessment type\n    Object.entries(scores.dimensions || {}).forEach(([dimension, data]) => {\n      if (typeof data.score === 'number' && data.score < 50) {\n        const description = typeInsights.dimensionInsights[dimension] || `Your ${this.formatDimension(dimension)} score suggests this is a high-priority area for improvement.`;\n        insights.push({\n          type: 'opportunity',\n          dimension: dimension,\n          title: `${this.formatDimension(dimension)} Opportunity`,\n          description: description\n        });\n      }\n    });\n    return insights;\n  }\n}\n// Configuration for different assessment types\nScoringEngine.assessmentTypes = {\n  'agency-vulnerability': {\n    defaultWeights: {\n      technology: 0.3,\n      process: 0.3,\n      people: 0.2,\n      strategy: 0.2\n    },\n    dimensionConfig: {\n      technology: {\n        icon: '游눹',\n        description: 'Your agency technology stack and utilization',\n        insights: {\n          low: ['Limited use of marketing technology', 'Manual processes dominate workflow', 'Disconnected data sources'],\n          medium: ['Basic marketing tools in use', 'Some automation implemented', 'Partial integration of platforms'],\n          high: ['Advanced MarTech stack', 'Sophisticated automation', 'Integrated data ecosystem']\n        }\n      },\n      process: {\n        icon: '丘뙖잺',\n        description: 'Your agency processes and operational efficiency',\n        insights: {\n          low: ['Ad hoc project execution', 'Inconsistent workflows', 'Limited documentation'],\n          medium: ['Defined core processes', 'Consistent execution', 'Some measurement in place'],\n          high: ['Optimized workflows', 'Continuous improvement cycle', 'Clear ownership and accountability']\n        }\n      },\n      people: {\n        icon: '游논',\n        description: 'Your team skills, structure and capabilities',\n        insights: {\n          low: ['Skills gaps in key areas', 'Siloed responsibilities', 'Limited AI training'],\n          medium: ['Core competencies covered', 'Defined roles', 'Some AI exploration'],\n          high: ['AI-ready expertise', 'Cross-functional collaboration', 'Continuous AI skill development']\n        }\n      },\n      strategy: {\n        icon: '游꿢',\n        description: 'Your agency strategy and client positioning',\n        insights: {\n          low: ['Tactical focus', 'Reactive planning', 'Limited client AI conversations'],\n          medium: ['Defined AI objectives', 'Regular planning cycles', 'Some AI positioning'],\n          high: ['Clear AI strategic direction', 'AI-driven decision making', 'Strong AI value proposition']\n        }\n      }\n    }\n  },\n  'inhouse-marketing': {\n    defaultWeights: {\n      technology: 0.25,\n      process: 0.25,\n      people: 0.25,\n      strategy: 0.25\n    },\n    dimensionConfig: {\n      technology: {\n        icon: '游눹',\n        description: 'Your marketing technology stack and utilization',\n        insights: {\n          low: ['Limited use of AI marketing tools', 'Manual content creation', 'Basic analytics'],\n          medium: ['Some AI tools implemented', 'Partial automation', 'Standard reporting'],\n          high: ['Advanced AI MarTech stack', 'Sophisticated automation', 'Predictive analytics']\n        }\n      },\n      process: {\n        icon: '丘뙖잺',\n        description: 'Your marketing processes and workflow efficiency',\n        insights: {\n          low: ['Ad hoc marketing execution', 'Manual approval workflows', 'Limited measurement'],\n          medium: ['Defined marketing processes', 'Some automation', 'Regular KPI tracking'],\n          high: ['AI-optimized workflows', 'Automated campaign management', 'Continuous optimization']\n        }\n      },\n      people: {\n        icon: '游논',\n        description: 'Your team skills and AI readiness',\n        insights: {\n          low: ['Limited AI awareness', 'Skills gaps', 'Resistance to new tools'],\n          medium: ['Basic AI literacy', 'Some experimenting', 'Identified champions'],\n          high: ['AI-fluent team', 'Continuous learning culture', 'Clear AI roles']\n        }\n      },\n      strategy: {\n        icon: '游꿢',\n        description: 'Your marketing strategy and planning approach',\n        insights: {\n          low: ['Traditional planning', 'No AI integration', 'Limited personalization'],\n          medium: ['Some AI considerations', 'Testing AI-driven targeting', 'Partial personalization'],\n          high: ['AI-centered strategy', 'Dynamic personalization', 'Predictive customer journey']\n        }\n      }\n    }\n  }\n};\nexport default ScoringEngine;","map":{"version":3,"names":["ScoringEngine","normalizeCategory","category","categoryMap","toLowerCase","formatDimension","dimension","dimensionLabels","charAt","toUpperCase","slice","generateReport","scores","context","overallScore","overall","reportConfig","title","readinessTitle","readinessSubtitle","bookingHeadline","bookingSubheadline","testimonialQuote","testimonialAuthor","testimonialCompany","config","assessmentType","executive","headline","subheadline","narrative","generateSummary","snapshot","generateSnapshot","keyMetrics","roi","value","Math","round","label","interpretation","efficiency","readiness","subtitle","dimensions","generateDimensionCards","summary","recommendations","generateRecommendations","nextSteps","booking","buttonText","urgency","message","testimonial","quote","author","company","roadmap","generateRoadmap","valuation","generateValuationImpact","error","console","generateDefaultReport","phases","name","duration","focus","milestones","summariesByType","low","medium","high","excellent","summaries","recommendationsByType","technology","description","specificAction","process","people","strategy","general","typeRecommendations","Object","entries","forEach","data","score","rec","push","length","generalRec","roadmapsByType","dimensionCards","dimensionData","assessmentConfig","assessmentTypes","level","dimensionConfig","info","icon","insights","sort","a","b","valuationByType","baseline","potential","factors","note","constructor","customScoring","_this$customScoring","defaultWeights","weights","calculate","responses","log","keys","_this$customScoring2","calculateDimensionScores","customScores","applyContextAdjustments","calculateOverallScore","result","categories","generateInsights","report","type","defaultCategories","cat","count","questionId","answer","split","normalizedCategory","id","dimensionScores","weightedSum","totalWeight","weight","companySize","min","selectedServices","serviceCount","insightsByType","overallInsights","critical","warning","positive","dimensionInsights","typeInsights","insightLevel","overallInsight"],"sources":["/Users/jon/Documents/GitHub/assessor/src/core/engine/ScoringEngine.js"],"sourcesContent":["export class ScoringEngine {\n    // Configuration for different assessment types\n    static assessmentTypes = {\n        'agency-vulnerability': {\n            defaultWeights: {\n                technology: 0.3,\n                process: 0.3,\n                people: 0.2,\n                strategy: 0.2\n            },\n            dimensionConfig: {\n                technology: {\n                    icon: '游눹',\n                    description: 'Your agency technology stack and utilization',\n                    insights: {\n                        low: ['Limited use of marketing technology', 'Manual processes dominate workflow', 'Disconnected data sources'],\n                        medium: ['Basic marketing tools in use', 'Some automation implemented', 'Partial integration of platforms'],\n                        high: ['Advanced MarTech stack', 'Sophisticated automation', 'Integrated data ecosystem']\n                    }\n                },\n                process: {\n                    icon: '丘뙖잺',\n                    description: 'Your agency processes and operational efficiency',\n                    insights: {\n                        low: ['Ad hoc project execution', 'Inconsistent workflows', 'Limited documentation'],\n                        medium: ['Defined core processes', 'Consistent execution', 'Some measurement in place'],\n                        high: ['Optimized workflows', 'Continuous improvement cycle', 'Clear ownership and accountability']\n                    }\n                },\n                people: {\n                    icon: '游논',\n                    description: 'Your team skills, structure and capabilities',\n                    insights: {\n                        low: ['Skills gaps in key areas', 'Siloed responsibilities', 'Limited AI training'],\n                        medium: ['Core competencies covered', 'Defined roles', 'Some AI exploration'],\n                        high: ['AI-ready expertise', 'Cross-functional collaboration', 'Continuous AI skill development']\n                    }\n                },\n                strategy: {\n                    icon: '游꿢',\n                    description: 'Your agency strategy and client positioning',\n                    insights: {\n                        low: ['Tactical focus', 'Reactive planning', 'Limited client AI conversations'],\n                        medium: ['Defined AI objectives', 'Regular planning cycles', 'Some AI positioning'],\n                        high: ['Clear AI strategic direction', 'AI-driven decision making', 'Strong AI value proposition']\n                    }\n                }\n            }\n        },\n        'inhouse-marketing': {\n            defaultWeights: {\n                technology: 0.25,\n                process: 0.25,\n                people: 0.25,\n                strategy: 0.25\n            },\n            dimensionConfig: {\n                technology: {\n                    icon: '游눹',\n                    description: 'Your marketing technology stack and utilization',\n                    insights: {\n                        low: ['Limited use of AI marketing tools', 'Manual content creation', 'Basic analytics'],\n                        medium: ['Some AI tools implemented', 'Partial automation', 'Standard reporting'],\n                        high: ['Advanced AI MarTech stack', 'Sophisticated automation', 'Predictive analytics']\n                    }\n                },\n                process: {\n                    icon: '丘뙖잺',\n                    description: 'Your marketing processes and workflow efficiency',\n                    insights: {\n                        low: ['Ad hoc marketing execution', 'Manual approval workflows', 'Limited measurement'],\n                        medium: ['Defined marketing processes', 'Some automation', 'Regular KPI tracking'],\n                        high: ['AI-optimized workflows', 'Automated campaign management', 'Continuous optimization']\n                    }\n                },\n                people: {\n                    icon: '游논',\n                    description: 'Your team skills and AI readiness',\n                    insights: {\n                        low: ['Limited AI awareness', 'Skills gaps', 'Resistance to new tools'],\n                        medium: ['Basic AI literacy', 'Some experimenting', 'Identified champions'],\n                        high: ['AI-fluent team', 'Continuous learning culture', 'Clear AI roles']\n                    }\n                },\n                strategy: {\n                    icon: '游꿢',\n                    description: 'Your marketing strategy and planning approach',\n                    insights: {\n                        low: ['Traditional planning', 'No AI integration', 'Limited personalization'],\n                        medium: ['Some AI considerations', 'Testing AI-driven targeting', 'Partial personalization'],\n                        high: ['AI-centered strategy', 'Dynamic personalization', 'Predictive customer journey']\n                    }\n                }\n            }\n        }\n    }\n    // Helper methods for category and dimension handling\n    normalizeCategory(category) {\n        // Map various category names to standard categories\n        const categoryMap = {\n            'tech': 'technology',\n            'technology': 'technology',\n            'tools': 'technology',\n            'process': 'process',\n            'processes': 'process',\n            'workflow': 'process',\n            'people': 'people',\n            'team': 'people',\n            'skills': 'people',\n            'talent': 'people',\n            'strategy': 'strategy',\n            'plan': 'strategy',\n            'planning': 'strategy',\n            'content': 'content',\n            'analytics': 'analytics'\n        };\n        \n        return categoryMap[category.toLowerCase()] || 'technology';\n    }\n    \n    formatDimension(dimension) {\n        // Format dimension names for display\n        const dimensionLabels = {\n            'technology': 'Technology',\n            'process': 'Process',\n            'people': 'People',\n            'strategy': 'Strategy',\n            'content': 'Content',\n            'analytics': 'Analytics'\n        };\n        \n        return dimensionLabels[dimension.toLowerCase()] || dimension.charAt(0).toUpperCase() + dimension.slice(1);\n    }\n    \n    generateReport(scores, context) {\n        // Generate a complete report based on scores and context and assessment type\n        try {\n            const overallScore = scores.overall || 0;\n            \n            // Get assessment-specific configurations and titles\n            const reportConfig = {\n                'agency-vulnerability': {\n                    title: 'Agency AI Vulnerability Assessment',\n                    readinessTitle: 'Agency AI Readiness Assessment',\n                    readinessSubtitle: 'How your agency compares across key dimensions',\n                    bookingHeadline: 'Ready to Future-Proof Your Agency?',\n                    bookingSubheadline: 'Schedule a consultation to get personalized insights',\n                    testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our agency has doubled client retention.',\n                    testimonialAuthor: 'Creative Director',\n                    testimonialCompany: 'Mid-Size Agency'\n                },\n                'inhouse-marketing': {\n                    title: 'Marketing AI Maturity Assessment',\n                    readinessTitle: 'Marketing AI Readiness Assessment',\n                    readinessSubtitle: 'How your marketing organization compares across key dimensions',\n                    bookingHeadline: 'Ready to Elevate Your Marketing?',\n                    bookingSubheadline: 'Schedule a consultation to get personalized insights',\n                    testimonialQuote: 'The assessment identified exactly where we needed to focus. Six months later, our marketing ROI has doubled.',\n                    testimonialAuthor: 'Marketing Director',\n                    testimonialCompany: 'B2B Software Company'\n                }\n            };\n            \n            // Get configuration for this assessment type (with fallback)\n            const config = reportConfig[this.assessmentType] || reportConfig['agency-vulnerability'];\n            \n            // Executive summary section\n            const executive = {\n                headline: 'Your Assessment Results',\n                subheadline: 'Detailed analysis and recommendations below',\n                narrative: this.generateSummary(scores),\n                snapshot: this.generateSnapshot(scores, context),\n                keyMetrics: {\n                    roi: {\n                        value: `${Math.round(overallScore * 1.5)}%`,\n                        label: this.assessmentType === 'agency-vulnerability' ? 'Potential Revenue Impact' : 'Potential ROI',\n                        interpretation: overallScore < 40 ? 'Significant room for improvement' : 'Strong foundation for growth'\n                    },\n                    efficiency: {\n                        value: `${Math.round(overallScore * 0.8)}%`,\n                        label: 'Operational Efficiency',\n                        interpretation: 'Based on your process maturity'\n                    },\n                    readiness: {\n                        value: overallScore < 30 ? 'Low' : overallScore < 60 ? 'Medium' : 'High',\n                        label: 'AI Readiness',\n                        interpretation: this.assessmentType === 'agency-vulnerability' ? \n                                        'Your overall agency AI readiness' : \n                                        'Your overall marketing AI maturity'\n                    }\n                }\n            };\n            \n            // Readiness section\n            const readiness = {\n                title: config.readinessTitle,\n                subtitle: config.readinessSubtitle,\n                dimensions: this.generateDimensionCards(scores)\n            };\n            \n            // Create full report object based on assessment type\n            return {\n                title: config.title,\n                summary: this.generateSummary(scores) || 'Thank you for completing the assessment.',\n                executive: executive,\n                readiness: readiness,\n                recommendations: this.generateRecommendations(scores, context),\n                nextSteps: {\n                    booking: {\n                        headline: config.bookingHeadline,\n                        subheadline: config.bookingSubheadline,\n                        buttonText: 'Book Your Strategy Session'\n                    },\n                    urgency: {\n                        message: 'Limited spots available this month'\n                    },\n                    testimonial: {\n                        quote: config.testimonialQuote,\n                        author: config.testimonialAuthor,\n                        company: config.testimonialCompany\n                    }\n                },\n                roadmap: this.generateRoadmap(scores),\n                valuation: this.generateValuationImpact(scores, context)\n            };\n        } catch (error) {\n            console.error('Error generating report:', error);\n            // Return default report if error occurs\n            return this.generateDefaultReport();\n        }\n    }\n    \n    generateDefaultReport() {\n        // Generate a default report when scoring fails\n        return {\n            title: 'Marketing Maturity Assessment',\n            summary: 'Based on your responses, we have prepared an initial assessment of your marketing maturity.',\n            recommendations: [],\n            nextSteps: {\n                booking: {\n                    headline: 'Get a Complete Assessment',\n                    subheadline: 'Schedule a consultation to get personalized insights',\n                    buttonText: 'Book Your Strategy Session'\n                }\n            },\n            roadmap: {\n                phases: [\n                    {\n                        name: 'Foundation',\n                        duration: '1-3 months',\n                        focus: 'Establish core marketing processes',\n                        milestones: ['Marketing strategy', 'Basic analytics', 'Content planning']\n                    },\n                    {\n                        name: 'Growth',\n                        duration: '3-6 months',\n                        focus: 'Scale effective channels',\n                        milestones: ['Channel optimization', 'Automation', 'Lead scoring']\n                    }\n                ]\n            }\n        };\n    }\n    \n    generateSummary(scores) {\n        // Generate summary text based on overall score and assessment type\n        if (!scores || typeof scores.overall !== 'number') {\n            return 'Thank you for completing the assessment.';\n        }\n        \n        // Define assessment-type specific summaries\n        const summariesByType = {\n            'agency-vulnerability': {\n                low: 'Your agency is in the early stages of AI readiness. There are significant vulnerabilities that could impact your competitive position as AI transforms the marketing landscape.',\n                medium: 'Your agency has established some AI foundations but needs further development in key areas to effectively compete as AI reshapes client expectations.',\n                high: 'Your agency demonstrates good AI readiness with specific opportunities to strengthen your position as AI continues to transform the industry.',\n                excellent: 'Your agency shows high AI maturity across multiple dimensions. Continue innovating to maintain your competitive edge as AI evolves.'\n            },\n            'inhouse-marketing': {\n                low: 'Your marketing team is in the early stages of AI adoption. There are significant opportunities to improve effectiveness through AI integration.',\n                medium: 'Your marketing organization has established some AI foundations but needs further development to fully leverage AI capabilities.',\n                high: 'Your marketing team demonstrates good AI maturity with specific opportunities for optimization to achieve marketing excellence.',\n                excellent: 'Your marketing organization shows high AI maturity across multiple dimensions. Focus on refinement and innovation to maintain your competitive edge.'\n            }\n        };\n        \n        // Get the right summary set based on assessment type\n        const summaries = summariesByType[this.assessmentType] || summariesByType['agency-vulnerability'];\n        \n        // Return the appropriate summary based on the score\n        if (scores.overall < 30) {\n            return summaries.low;\n        } else if (scores.overall < 60) {\n            return summaries.medium;\n        } else if (scores.overall < 80) {\n            return summaries.high;\n        } else {\n            return summaries.excellent;\n        }\n    }\n    \n    generateRecommendations(scores, context) {\n        const recommendations = [];\n        \n        // Only proceed if we have valid scores\n        if (!scores || !scores.dimensions) return recommendations;\n        \n        // Define assessment-type specific recommendations\n        const recommendationsByType = {\n            'agency-vulnerability': {\n                technology: {\n                    title: 'Agency Technology Modernization',\n                    description: 'Your agency technology score indicates vulnerability to AI disruption.',\n                    specificAction: 'Conduct an AI readiness audit to identify tools that can augment your team capabilities.'\n                },\n                process: {\n                    title: 'AI-Ready Process Development',\n                    description: 'Integrating AI into your agency workflows will improve efficiency and client deliverables.',\n                    specificAction: 'Document your creative and production processes to identify AI integration opportunities.'\n                },\n                people: {\n                    title: 'AI Talent Development',\n                    description: 'Building AI fluency in your agency team will be critical to remain competitive.',\n                    specificAction: 'Identify AI champions and create a skills development plan for your agency team.'\n                },\n                strategy: {\n                    title: 'AI Positioning Strategy',\n                    description: 'A clear AI strategy will help your agency differentiate and retain clients.',\n                    specificAction: 'Develop an AI capabilities roadmap that you can share with clients and prospects.'\n                },\n                general: {\n                    title: 'Agency AI Readiness',\n                    description: 'While your agency is ahead on AI adoption, continuous innovation will maintain your advantage.',\n                    specificAction: 'Establish an AI innovation process to continuously evaluate and integrate new capabilities.'\n                }\n            },\n            'inhouse-marketing': {\n                technology: {\n                    title: 'Marketing AI Technology Integration',\n                    description: 'Your marketing technology score indicates opportunities to leverage AI tools.',\n                    specificAction: 'Evaluate AI-powered marketing tools that can augment your existing technology stack.'\n                },\n                process: {\n                    title: 'Marketing Workflow Optimization',\n                    description: 'Integrating AI into your marketing processes will improve efficiency and results.',\n                    specificAction: 'Map your content and campaign workflows to identify AI automation opportunities.'\n                },\n                people: {\n                    title: 'Marketing AI Capability Building',\n                    description: 'Developing AI skills in your marketing team will drive better performance.',\n                    specificAction: 'Create an AI training program focused on practical marketing applications.'\n                },\n                strategy: {\n                    title: 'AI-Powered Marketing Strategy',\n                    description: 'Incorporating AI into your marketing strategy will improve targeting and personalization.',\n                    specificAction: 'Develop an AI-enhanced customer journey that leverages predictive analytics.'\n                },\n                general: {\n                    title: 'Marketing AI Excellence',\n                    description: 'While your marketing AI maturity is strong, continuous improvement will maintain your advantage.',\n                    specificAction: 'Establish quarterly AI marketing reviews to identify new optimization opportunities.'\n                }\n            }\n        };\n        \n        // Get recommendations for the current assessment type (with fallback)\n        const typeRecommendations = recommendationsByType[this.assessmentType] || \n                                  recommendationsByType['agency-vulnerability'];\n        \n        // Generate recommendations for each dimension with low scores\n        Object.entries(scores.dimensions).forEach(([dimension, data]) => {\n            if (data.score < 50) {\n                const rec = typeRecommendations[dimension] || {\n                    title: `${this.formatDimension(dimension)} Enhancement`,\n                    description: `Your ${this.formatDimension(dimension)} capabilities need strengthening.`,\n                    specificAction: `Evaluate your current ${dimension} approach and develop an improvement plan.`\n                };\n                \n                recommendations.push({\n                    dimension: dimension,\n                    title: rec.title,\n                    description: rec.description,\n                    specificAction: rec.specificAction\n                });\n            }\n        });\n        \n        // Add general recommendations if needed\n        if (recommendations.length === 0) {\n            const generalRec = typeRecommendations.general || {\n                title: 'Continuous Improvement',\n                description: 'While your scores are strong, continuous improvement will maintain your advantage.',\n                specificAction: 'Establish quarterly reviews to identify optimization opportunities.'\n            };\n            \n            recommendations.push({\n                dimension: 'general',\n                title: generalRec.title,\n                description: generalRec.description,\n                specificAction: generalRec.specificAction\n            });\n        }\n        \n        return recommendations;\n    }\n    \n    generateRoadmap(scores) {\n        // Generate a roadmap based on scores and assessment type\n        \n        // Define assessment-type specific roadmaps\n        const roadmapsByType = {\n            'agency-vulnerability': [\n                {\n                    name: 'AI Foundation',\n                    duration: '1-3 months',\n                    focus: 'Establish core AI capabilities for your agency',\n                    milestones: [\n                        'Conduct AI skills assessment',\n                        'Implement basic AI tools',\n                        'Train team on AI prompt engineering',\n                        'Develop AI value proposition'\n                    ]\n                },\n                {\n                    name: 'Client Integration',\n                    duration: '3-6 months',\n                    focus: 'Integrate AI into client deliverables',\n                    milestones: [\n                        'Develop AI-enhanced service offerings',\n                        'Implement AI workflows for client work',\n                        'Create AI case studies',\n                        'Build AI showcases for prospects'\n                    ]\n                },\n                {\n                    name: 'AI Leadership',\n                    duration: '6-12 months',\n                    focus: 'Position your agency as an AI leader',\n                    milestones: [\n                        'Develop proprietary AI methodologies',\n                        'Advanced AI-enhanced deliverables',\n                        'AI-driven performance optimization',\n                        'AI thought leadership content'\n                    ]\n                }\n            ],\n            'inhouse-marketing': [\n                {\n                    name: 'AI Foundation',\n                    duration: '1-3 months',\n                    focus: 'Establish core AI marketing capabilities',\n                    milestones: [\n                        'Implement basic AI marketing tools',\n                        'Train team on AI fundamentals',\n                        'Develop AI-enhanced content strategy',\n                        'Set up AI analytics tracking'\n                    ]\n                },\n                {\n                    name: 'AI Growth',\n                    duration: '3-6 months',\n                    focus: 'Scale AI-powered marketing programs',\n                    milestones: [\n                        'Implement AI personalization',\n                        'Develop AI-driven customer journeys',\n                        'Create AI content production system',\n                        'Build AI-powered lead scoring'\n                    ]\n                },\n                {\n                    name: 'AI Optimization',\n                    duration: '6-12 months',\n                    focus: 'Refine and optimize AI marketing systems',\n                    milestones: [\n                        'Implement AI attribution modeling',\n                        'Advanced AI automation workflows',\n                        'Predictive AI analytics implementation',\n                        'AI-driven budget optimization'\n                    ]\n                }\n            ]\n        };\n        \n        // Return the appropriate roadmap based on assessment type\n        return { phases: roadmapsByType[this.assessmentType] || roadmapsByType['agency-vulnerability'] };\n    }\n    \n    generateDimensionCards(scores) {\n        // Generate detailed dimension cards for the readiness section\n        const dimensionCards = [];\n        const dimensionData = scores.dimensions || {};\n        \n        // Get assessment-specific dimension configuration\n        const assessmentConfig = ScoringEngine.assessmentTypes[this.assessmentType] || \n                               ScoringEngine.assessmentTypes['agency-vulnerability'];\n        \n        // Generate card for each dimension\n        Object.entries(dimensionData).forEach(([dimension, data]) => {\n            const score = data.score || 0;\n            const level = score < 40 ? 'low' : score < 70 ? 'medium' : 'high';\n            \n            // Use assessment-specific dimension config if available, otherwise use default\n            const dimensionConfig = assessmentConfig.dimensionConfig || {};\n            const info = dimensionConfig[dimension] || {\n                icon: '游댌',\n                description: `Your ${this.formatDimension(dimension)} capabilities`,\n                insights: {\n                    low: ['Needs significant improvement'],\n                    medium: ['Moderate capabilities'],\n                    high: ['Strong capabilities']\n                }\n            };\n            \n            dimensionCards.push({\n                name: this.formatDimension(dimension),\n                icon: info.icon,\n                score: score,\n                description: info.description,\n                insights: info.insights[level] || []\n            });\n        });\n        \n        // Sort by score (descending)\n        dimensionCards.sort((a, b) => b.score - a.score);\n        \n        return dimensionCards;\n    }\n    \n    generateValuationImpact(scores, context) {\n        // Generate valuation impact data based on assessment type and scores\n        \n        // Define assessment-type specific valuation impacts\n        const valuationByType = {\n            'agency-vulnerability': {\n                title: 'Agency Valuation Impact',\n                subtitle: 'How AI readiness affects your agency value',\n                baseline: {\n                    label: 'Current Estimated Multiple',\n                    value: '2-3x EBITDA'\n                },\n                potential: {\n                    label: 'AI-Ready Potential Multiple',\n                    value: '4-6x EBITDA'\n                },\n                factors: [\n                    'AI-enhanced service offerings command premium pricing',\n                    'AI efficiency improvements increase profit margins',\n                    'AI capabilities attract higher-value clients',\n                    'AI-ready agencies see higher acquisition interest'\n                ],\n                note: 'Agency valuations with strong AI capabilities are seeing significant premiums in the current market.'\n            },\n            'inhouse-marketing': {\n                title: 'Marketing ROI Impact',\n                subtitle: 'How AI maturity affects your marketing returns',\n                baseline: {\n                    label: 'Current Marketing ROI',\n                    value: '2-3x Investment'\n                },\n                potential: {\n                    label: 'AI-Enhanced ROI Potential',\n                    value: '4-5x Investment'\n                },\n                factors: [\n                    'AI-powered campaign optimization improves performance',\n                    'AI content creation reduces production costs',\n                    'AI analytics identifies highest-value opportunities',\n                    'AI personalization increases conversion rates'\n                ],\n                note: 'Organizations with advanced AI marketing capabilities report 30-40% higher marketing ROI on average.'\n            }\n        };\n        \n        // Return the appropriate valuation impact based on assessment type\n        return valuationByType[this.assessmentType] || valuationByType['agency-vulnerability'];\n    }\n    constructor(customScoring, assessmentType = 'agency-vulnerability') {\n        this.customScoring = customScoring;\n        this.assessmentType = assessmentType;\n        \n        // Get configuration for this assessment type\n        const config = ScoringEngine.assessmentTypes[this.assessmentType] || \n                      ScoringEngine.assessmentTypes['agency-vulnerability']; // Fallback\n        \n        // Set default weights based on assessment type\n        this.defaultWeights = config.defaultWeights || {\n            technology: 0.25,\n            process: 0.25,\n            people: 0.25,\n            strategy: 0.25\n        };\n        \n        this.dimensionConfig = config.dimensionConfig || {};\n        \n        // Allow custom scoring to override default weights\n        this.weights = this.customScoring?.weights || this.defaultWeights;\n    }\n\n    calculate(responses, context) {\n        console.log('Starting score calculation with responses:', Object.keys(responses).length);\n        console.log('Context for calculation:', context);\n        \n        try {\n            // Base scoring logic used by all assessments\n            let scores = this.calculateDimensionScores(responses);\n    \n            // Apply custom scoring if provided\n            if (this.customScoring?.calculate) {\n                try {\n                    const customScores = this.customScoring.calculate(scores, responses, context);\n                    if (customScores) scores = customScores;\n                } catch (error) {\n                    console.error('Error in custom scoring calculation:', error);\n                }\n            }\n    \n            // Apply context-based adjustments\n            scores = this.applyContextAdjustments(scores, context);\n    \n            // Calculate overall score\n            const overall = this.calculateOverallScore(scores);\n            \n            // Generate insights\n            const result = {\n                scores: {\n                    overall: overall,\n                    categories: scores\n                },\n                insights: this.generateInsights({ overall, dimensions: scores }, context),\n                report: this.generateReport({ overall, dimensions: scores }, context)\n            };\n            \n            console.log('Final calculation result:', result);\n            return result;\n        } catch (error) {\n            console.error('Error in score calculation:', error);\n            \n            // Return a fallback result to prevent UI errors\n            return {\n                scores: {\n                    overall: 50,\n                    categories: {\n                        technology: { score: 50 },\n                        process: { score: 50 },\n                        people: { score: 50 },\n                        strategy: { score: 50 }\n                    }\n                },\n                insights: [{\n                    type: 'warning',\n                    title: 'Score Calculation Issue',\n                    description: 'There was an issue calculating your detailed scores.'\n                }],\n                report: this.generateDefaultReport()\n            };\n        }\n    }\n\n    calculateDimensionScores(responses) {\n        // Default implementation for base dimension calculation\n        console.log('Calculating dimension scores with responses:', responses);\n        \n        // Extract question responses and organize them by category\n        const categories = {};\n        \n        // Initialize default categories with zero scores\n        const defaultCategories = ['technology', 'process', 'people', 'strategy'];\n        defaultCategories.forEach(cat => {\n            categories[cat] = { score: 0, count: 0, responses: [] };\n        });\n        \n        // Process each response\n        Object.entries(responses).forEach(([questionId, answer]) => {\n            // Skip non-numeric responses or special properties\n            if (typeof answer !== 'number' || questionId === 'selectedServices') return;\n            \n            // Determine category from question ID - default to 'technology' if unknown\n            // Format might be: tech_01, people_02, etc.\n            const category = questionId.split('_')[0] || 'technology';\n            const normalizedCategory = this.normalizeCategory(category);\n            \n            // If category not initialized, create it\n            if (!categories[normalizedCategory]) {\n                categories[normalizedCategory] = { score: 0, count: 0, responses: [] };\n            }\n            \n            // Add the score (assuming questions are scored 0-5)\n            categories[normalizedCategory].score += answer;\n            categories[normalizedCategory].count++;\n            categories[normalizedCategory].responses.push({ id: questionId, value: answer });\n        });\n        \n        // Calculate average scores for each category\n        const dimensionScores = {};\n        Object.entries(categories).forEach(([category, data]) => {\n            dimensionScores[category] = {\n                score: data.count > 0 ? Math.round((data.score / (data.count * 5)) * 100) : 0,\n                responses: data.responses\n            };\n        });\n        \n        console.log('Calculated dimension scores:', dimensionScores);\n        return dimensionScores;\n    }\n\n    calculateOverallScore(dimensionScores) {\n        // Default implementation for overall score calculation\n        console.log('Calculating overall score with dimension scores:', dimensionScores);\n        \n        let weightedSum = 0;\n        let totalWeight = 0;\n        \n        // Calculate weighted sum of dimension scores\n        Object.entries(dimensionScores).forEach(([dimension, data]) => {\n            const weight = this.weights[dimension] || 0.25; // Default equal weight if not specified\n            weightedSum += (data.score || 0) * weight;\n            totalWeight += weight;\n        });\n        \n        // Calculate overall score (rounded to nearest integer)\n        const overallScore = totalWeight > 0 ? Math.round(weightedSum / totalWeight) : 50;\n        \n        console.log('Calculated overall score:', overallScore);\n        return overallScore;\n    }\n\n    applyContextAdjustments(scores, context) {\n        // Apply size, industry, or other contextual adjustments\n        console.log('Applying context adjustments with context:', context);\n        \n        // If no context, return scores unchanged\n        if (!context) return scores;\n        \n        // Example: Adjust for company size\n        if (context.companySize) {\n            // Small companies might get a boost in technology score\n            if (context.companySize === 'small' && scores.technology) {\n                scores.technology.score = Math.min(100, scores.technology.score + 5);\n            }\n        }\n        \n        // Example: Adjust for selected services\n        if (context.selectedServices) {\n            const serviceCount = Object.keys(context.selectedServices).length;\n            // More focused companies (fewer services) might score higher in strategy\n            if (serviceCount <= 2 && scores.strategy) {\n                scores.strategy.score = Math.min(100, scores.strategy.score + 5);\n            }\n        }\n        \n        return scores;\n    }\n\n    generateInsights(scores, context) {\n        // Generate insights based on scores and assessment type\n        const insights = [];\n        \n        // Only proceed if we have valid scores\n        if (!scores) return insights;\n        \n        // Define assessment-type specific insights\n        const insightsByType = {\n            'agency-vulnerability': {\n                overallInsights: {\n                    critical: {\n                        title: 'Agency AI Vulnerability Alert',\n                        description: 'Your agency shows significant vulnerability to AI disruption. Immediate action is needed to adapt your business model.'\n                    },\n                    warning: {\n                        title: 'Agency AI Adaptation Needed',\n                        description: 'Your agency has some AI capabilities in place, but several key areas require strengthening to remain competitive.'\n                    },\n                    positive: {\n                        title: 'Agency AI Readiness',\n                        description: 'Your agency shows good AI readiness with specific opportunities to further enhance your competitive position.'\n                    },\n                    excellent: {\n                        title: 'Agency AI Leadership',\n                        description: 'Your agency demonstrates excellent AI capabilities, positioning you ahead of most competitors in your space.'\n                    }\n                },\n                dimensionInsights: {\n                    technology: 'Your agency\\'s technology score indicates vulnerability to agencies with more advanced AI capabilities.',\n                    process: 'Your agency\\'s processes need modernization to incorporate AI efficiently into client work.',\n                    people: 'Your team may lack critical AI skills needed to compete with AI-enabled agencies.',\n                    strategy: 'Your agency\\'s positioning around AI needs strengthening to retain and attract clients.'\n                }\n            },\n            'inhouse-marketing': {\n                overallInsights: {\n                    critical: {\n                        title: 'Marketing AI Transformation Needed',\n                        description: 'Your marketing team shows low AI maturity. Significant transformation is needed to maintain effectiveness.'\n                    },\n                    warning: {\n                        title: 'Building Marketing AI Foundations',\n                        description: 'You have some marketing AI fundamentals in place, but several key areas require development.'\n                    },\n                    positive: {\n                        title: 'Solid Marketing AI Performance',\n                        description: 'Your marketing operations show good AI maturity with specific opportunities for optimization.'\n                    },\n                    excellent: {\n                        title: 'Marketing AI Excellence',\n                        description: 'Your marketing organization demonstrates high levels of AI maturity and effectiveness.'\n                    }\n                },\n                dimensionInsights: {\n                    technology: 'Your marketing technology stack has significant gaps in AI-powered capabilities.',\n                    process: 'Your marketing processes could benefit from AI automation and optimization.',\n                    people: 'Your marketing team may need upskilling to effectively leverage AI tools.',\n                    strategy: 'Your marketing strategy needs to incorporate AI-driven targeting and personalization.'\n                }\n            }\n        };\n        \n        // Get insights for the current assessment type (with fallback)\n        const typeInsights = insightsByType[this.assessmentType] || \n                           insightsByType['agency-vulnerability'];\n        \n        // Generate overall insights based on assessment type\n        if (typeof scores.overall === 'number') {\n            let insightLevel;\n            if (scores.overall < 30) {\n                insightLevel = 'critical';\n            } else if (scores.overall < 60) {\n                insightLevel = 'warning';\n            } else if (scores.overall < 80) {\n                insightLevel = 'positive';\n            } else {\n                insightLevel = 'excellent';\n            }\n            \n            const overallInsight = typeInsights.overallInsights[insightLevel] || {\n                title: 'Assessment Results',\n                description: 'Your assessment results indicate opportunities for improvement.'\n            };\n            \n            insights.push({\n                type: insightLevel,\n                title: overallInsight.title,\n                description: overallInsight.description\n            });\n        }\n        \n        // Generate dimension-specific insights based on assessment type\n        Object.entries(scores.dimensions || {}).forEach(([dimension, data]) => {\n            if (typeof data.score === 'number' && data.score < 50) {\n                const description = typeInsights.dimensionInsights[dimension] ||\n                                  `Your ${this.formatDimension(dimension)} score suggests this is a high-priority area for improvement.`;\n                \n                insights.push({\n                    type: 'opportunity',\n                    dimension: dimension,\n                    title: `${this.formatDimension(dimension)} Opportunity`,\n                    description: description\n                });\n            }\n        });\n        \n        return insights;\n    }\n}\n\nexport default ScoringEngine;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}